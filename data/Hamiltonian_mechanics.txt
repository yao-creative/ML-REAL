hamiltonian mechanics emerged in 1833 as a reformulation of lagrangian mechanics. introduced by sir william rowan hamilton, hamiltonian mechanics replaces (generalized) velocities 
  
    
      
        
          
            
              
                q
                ˙
              
            
          
          
            i
          
        
      
    
    {\displaystyle {\dot {q}}^{i}}
   used in lagrangian mechanics with (generalized) momenta. both theories provide interpretations of classical mechanics and describe the same physical phenomena.
hamiltonian mechanics has a close relationship with geometry (notably, symplectic geometry and poisson structures) and serves as a link between classical and quantum mechanics.


== overview ==


=== phase space coordinates (p,q) and hamiltonian h ===
let 
  
    
      
        (
        m
        ,
        
          
            l
          
        
        )
      
    
    {\displaystyle (m,{\cal {l}})}
   be a mechanical system with the configuration space 
  
    
      
        m
      
    
    {\displaystyle m}
   and the smooth lagrangian 
  
    
      
        
          
            l
          
        
        .
      
    
    {\displaystyle {\cal {l}}.}
   select a standard coordinate system 
  
    
      
        (
        
          q
        
        ,
        
          
            
              q
              ˙
            
          
        
        )
      
    
    {\displaystyle ({\boldsymbol {q}},{\boldsymbol {\dot {q}}})}
   on 
  
    
      
        m
        .
      
    
    {\displaystyle m.}
    the quantities 
  
    
      
        
          
            p
            
              i
            
          
          (
          
            q
          
          ,
          
            
              
                q
                ˙
              
            
          
          ,
          t
          )
          
          
            
              
                
                  =
                
                
                  def
                
              
            
          
          
          
            ∂
            
              
                l
              
            
          
          
            /
          
          
            ∂
            
              
                
                  
                    q
                    ˙
                  
                
              
              
                i
              
            
          
        
      
    
    {\displaystyle \textstyle p_{i}({\boldsymbol {q}},{\boldsymbol {\dot {q}}},t)\,{\stackrel {\text{def}}{=}}\,{\partial {\cal {l}}}/{\partial {\dot {q}}^{i}}}
   are called momenta. (also generalized momenta, conjugate momenta, and canonical momenta). for a time instant 
  
    
      
        t
        ,
      
    
    {\displaystyle t,}
   the legendre transformation of 
  
    
      
        
          
            l
          
        
      
    
    {\displaystyle {\mathcal {l}}}
   is defined as the map 
  
    
      
        (
        
          q
        
        ,
        
          
            
              q
              ˙
            
          
        
        )
        →
        
          (
          
            
              p
            
            ,
            
              q
            
          
          )
        
      
    
    {\displaystyle ({\boldsymbol {q}},{\boldsymbol {\dot {q}}})\to \left({\boldsymbol {p}},{\boldsymbol {q}}\right)}
   which is assumed to have a smooth inverse 
  
    
      
        (
        
          p
        
        ,
        
          q
        
        )
        →
        (
        
          q
        
        ,
        
          
            
              q
              ˙
            
          
        
        )
        .
      
    
    {\displaystyle ({\boldsymbol {p}},{\boldsymbol {q}})\to ({\boldsymbol {q}},{\boldsymbol {\dot {q}}}).}
   for a system with 
  
    
      
        n
      
    
    {\displaystyle n}
   degrees of freedom, the lagrangian mechanics defines the energy function

  
    
      
        
          e
          
            
              l
            
          
        
        (
        
          q
        
        ,
        
          
            
              q
              ˙
            
          
        
        ,
        t
        )
        
        
          
            
              
                =
              
              
                def
              
            
          
        
        
        
          ∑
          
            i
            =
            1
          
          
            n
          
        
        
          
            
              
                q
                ˙
              
            
          
          
            i
          
        
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                
                  
                    
                      q
                      ˙
                    
                  
                
                
                  i
                
              
            
          
        
        −
        
          
            l
          
        
        .
      
    
    {\displaystyle e_{\cal {l}}({\boldsymbol {q}},{\boldsymbol {\dot {q}}},t)\,{\stackrel {\text{def}}{=}}\,\sum _{i=1}^{n}{\dot {q}}^{i}{\frac {\partial {\cal {l}}}{\partial {\dot {q}}^{i}}}-{\cal {l}}.}
  the inverse of the legendre transform of 
  
    
      
        
          
            l
          
        
      
    
    {\displaystyle {\mathcal {l}}}
   turns 
  
    
      
        
          e
          
            
              l
            
          
        
      
    
    {\displaystyle e_{\cal {l}}}
   into a function 
  
    
      
        
          
            h
          
        
        (
        
          p
        
        ,
        
          q
        
        ,
        t
        )
      
    
    {\displaystyle {\cal {h}}({\boldsymbol {p}},{\boldsymbol {q}},t)}
   known as hamiltonian. the hamiltonian satisfies

  
    
      
        
          
            h
          
        
        
          (
          
            
              
                
                  ∂
                  
                    
                      l
                    
                  
                
                
                  ∂
                  
                    
                      
                        q
                        ˙
                      
                    
                  
                
              
            
            ,
            
              q
            
            ,
            t
          
          )
        
        =
        
          e
          
            
              l
            
          
        
        (
        
          q
        
        ,
        
          
            
              q
              ˙
            
          
        
        ,
        t
        )
      
    
    {\displaystyle {\cal {h}}\left({\frac {\partial {\cal {l}}}{\partial {\boldsymbol {\dot {q}}}}},{\boldsymbol {q}},t\right)=e_{\cal {l}}({\boldsymbol {q}},{\boldsymbol {\dot {q}}},t)}
  which implies that

  
    
      
        
          
            h
          
        
        (
        
          p
        
        ,
        
          q
        
        ,
        t
        )
        =
        
          ∑
          
            i
            =
            1
          
          
            n
          
        
        
          p
          
            i
          
        
        
          
            
              
                q
                ˙
              
            
          
          
            i
          
        
        −
        
          
            l
          
        
        (
        
          q
        
        ,
        
          
            
              q
              ˙
            
          
        
        ,
        t
        )
        ,
      
    
    {\displaystyle {\cal {h}}({\boldsymbol {p}},{\boldsymbol {q}},t)=\sum _{i=1}^{n}p_{i}{\dot {q}}^{i}-{\cal {l}}({\boldsymbol {q}},{\boldsymbol {\dot {q}}},t),}
  where the velocities 
  
    
      
        
          
            
              q
              ˙
            
          
        
        =
        (
        
          
            
              
                q
                ˙
              
            
          
          
            1
          
        
        ,
        …
        ,
        
          
            
              
                q
                ˙
              
            
          
          
            n
          
        
        )
      
    
    {\displaystyle {\boldsymbol {\dot {q}}}=({\dot {q}}^{1},\ldots ,{\dot {q}}^{n})}
   are found from the (
  
    
      
        n
      
    
    {\displaystyle n}
  -dimensional) equation 
  
    
      
        
          
            p
          
          =
          
            ∂
            
              
                l
              
            
          
          
            /
          
          
            ∂
            
              
                
                  q
                  ˙
                
              
            
          
        
      
    
    {\displaystyle \textstyle {\boldsymbol {p}}={\partial {\cal {l}}}/{\partial {\boldsymbol {\dot {q}}}}}
   which, by assumption, is uniquely solvable for 
  
    
      
        
          
            
              q
              ˙
            
          
        
        .
      
    
    {\displaystyle {\boldsymbol {\dot {q}}}.}
   the (
  
    
      
        2
        n
      
    
    {\displaystyle 2n}
  -dimensional) pair 
  
    
      
        (
        
          p
        
        ,
        
          q
        
        )
      
    
    {\displaystyle ({\boldsymbol {p}},{\boldsymbol {q}})}
   is called phase space coordinates. (also canonical coordinates).


=== from euler-lagrange equation to hamilton's equations ===
in phase space coordinates 
  
    
      
        (
        
          p
        
        ,
        
          q
        
        )
        ,
      
    
    {\displaystyle ({\boldsymbol {p}},{\boldsymbol {q}}),}
   the (
  
    
      
        n
      
    
    {\displaystyle n}
  -dimensional) euler-lagrange equation

  
    
      
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                q
              
            
          
        
        −
        
          
            d
            
              d
              t
            
          
        
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                
                  
                    q
                    ˙
                  
                
              
            
          
        
        =
        0
      
    
    {\displaystyle {\frac {\partial {\cal {l}}}{\partial {\boldsymbol {q}}}}-{\frac {d}{dt}}{\frac {\partial {\cal {l}}}{\partial {\boldsymbol {\dot {q}}}}}=0}
  becomes hamilton's equations in 
  
    
      
        2
        n
      
    
    {\displaystyle 2n}
   dimensions 


=== from stationary action principle to hamilton's equations ===
let 
  
    
      
        
          
            p
          
        
        (
        a
        ,
        b
        ,
        
          
            x
          
          
            a
          
        
        ,
        
          
            x
          
          
            b
          
        
        )
      
    
    {\displaystyle {\cal {p}}(a,b,{\boldsymbol {x}}_{a},{\boldsymbol {x}}_{b})}
   be the set of smooth paths 
  
    
      
        
          q
        
        :
        [
        a
        ,
        b
        ]
        →
        m
      
    
    {\displaystyle {\boldsymbol {q}}:[a,b]\to m}
   for which 
  
    
      
        
          q
        
        (
        a
        )
        =
        
          
            x
          
          
            a
          
        
      
    
    {\displaystyle {\boldsymbol {q}}(a)={\boldsymbol {x}}_{a}}
   and 
  
    
      
        
          q
        
        (
        b
        )
        =
        
          
            x
          
          
            b
          
        
        .
      
    
    {\displaystyle {\boldsymbol {q}}(b)={\boldsymbol {x}}_{b}.}
    the action functional 
  
    
      
        
          
            s
          
        
        :
        
          
            p
          
        
        (
        a
        ,
        b
        ,
        
          
            x
          
          
            a
          
        
        ,
        
          
            x
          
          
            b
          
        
        )
        →
        
          r
        
      
    
    {\displaystyle {\cal {s}}:{\cal {p}}(a,b,{\boldsymbol {x}}_{a},{\boldsymbol {x}}_{b})\to \mathbb {r} }
   is defined via

  
    
      
        
          
            
              s
            
          
          [
          
            q
          
          ]
          =
          
            ∫
            
              a
            
            
              b
            
          
          
            
              l
            
          
          (
          t
          ,
          
            q
          
          (
          t
          )
          ,
          
            
              
                q
                ˙
              
            
          
          (
          t
          )
          )
          
          d
          t
          =
          
            ∫
            
              a
            
            
              b
            
          
          
            (
            
              
                ∑
                
                  i
                  =
                  1
                
                
                  n
                
              
              
                p
                
                  i
                
              
              
                
                  
                    
                      q
                      ˙
                    
                  
                
                
                  i
                
              
              −
              
                
                  h
                
              
              (
              
                p
              
              ,
              
                q
              
              ,
              t
              )
            
            )
          
          
          d
          t
          ,
        
      
    
    {\displaystyle \displaystyle {\cal {s}}[{\boldsymbol {q}}]=\int _{a}^{b}{\cal {l}}(t,{\boldsymbol {q}}(t),{\dot {\boldsymbol {q}}}(t))\,dt=\int _{a}^{b}\left(\sum _{i=1}^{n}p_{i}{\dot {q}}^{i}-{\cal {h}}({\boldsymbol {p}},{\boldsymbol {q}},t)\right)\,dt,}
  where 
  
    
      
        
          q
        
        =
        
          q
        
        (
        t
        )
        ,
      
    
    {\displaystyle {\boldsymbol {q}}={\boldsymbol {q}}(t),}
   and 
  
    
      
        
          p
        
        =
        ∂
        
          
            l
          
        
        
          /
        
        ∂
        
          
            
              q
              ˙
            
          
        
      
    
    {\displaystyle {\boldsymbol {p}}=\partial {\cal {l}}/\partial {\boldsymbol {\dot {q}}}}
   (see above). a path 
  
    
      
        
          q
        
        ∈
        
          
            p
          
        
        (
        a
        ,
        b
        ,
        
          
            x
          
          
            a
          
        
        ,
        
          
            x
          
          
            b
          
        
        )
      
    
    {\displaystyle {\boldsymbol {q}}\in {\cal {p}}(a,b,{\boldsymbol {x}}_{a},{\boldsymbol {x}}_{b})}
   is a stationary point of 
  
    
      
        
          
            s
          
        
      
    
    {\displaystyle {\cal {s}}}
   (and hence is an equation of motion) if and only if the path 
  
    
      
        (
        
          p
        
        (
        t
        )
        ,
        
          q
        
        (
        t
        )
        )
      
    
    {\displaystyle ({\boldsymbol {p}}(t),{\boldsymbol {q}}(t))}
   in phase space coordinates obeys the hamilton's equations.


=== basic physical interpretation ===
a simple interpretation of hamiltonian mechanics comes from its application on a one-dimensional system consisting of one particle of mass m. the value 
  
    
      
        h
        (
        p
        ,
        q
        )
      
    
    {\displaystyle h(p,q)}
   of the hamiltonian is the total energy of the system, i.e. the sum of kinetic and potential energy, traditionally denoted t and v, respectively. here p is the momentum mv and q is the space coordinate. then

  
    
      
        
          
            h
          
        
        =
        t
        +
        v
        
        ,
        
        t
        =
        
          
            
              p
              
                2
              
            
            
              2
              m
            
          
        
        
        ,
        
        v
        =
        v
        (
        q
        )
      
    
    {\displaystyle {\mathcal {h}}=t+v\quad ,\quad t={\frac {p^{2}}{2m}}\quad ,\quad v=v(q)}
  t is a function of p alone, while v is a function of q alone (i.e., t and v are scleronomic).
in this example, the time derivative of the momentum p equals the newtonian force, and so the first hamilton equation means that the force equals the negative gradient of potential energy. the time derivative of q is the velocity, and so the second hamilton equation means that the particle's velocity equals the derivative of its kinetic energy with respect to its momentum.


== example ==

a spherical pendulum consists of a mass m moving without friction on the surface of a sphere. the only forces acting on the mass are the reaction from the sphere and gravity. spherical coordinates are used to describe the position of the mass in terms of (r, θ, φ), where r is fixed, r=l.
the lagrangian for this system is

  
    
      
        l
        =
        
          
            1
            2
          
        
        m
        
          l
          
            2
          
        
        
          (
          
            
              
                
                  
                    θ
                    ˙
                  
                
              
              
                2
              
            
            +
            
              sin
              
                2
              
            
            ⁡
            θ
             
            
              
                
                  
                    ϕ
                    ˙
                  
                
              
              
                2
              
            
          
          )
        
        +
        m
        g
        l
        cos
        ⁡
        θ
        .
      
    
    {\displaystyle l={\frac {1}{2}}ml^{2}\left({\dot {\theta }}^{2}+\sin ^{2}\theta \ {\dot {\phi }}^{2}\right)+mgl\cos \theta .}
  thus the hamiltonian is

  
    
      
        h
        =
        
          p
          
            θ
          
        
        
          
            
              θ
              ˙
            
          
        
        +
        
          p
          
            ϕ
          
        
        
          
            
              ϕ
              ˙
            
          
        
        −
        l
      
    
    {\displaystyle h=p_{\theta }{\dot {\theta }}+p_{\phi }{\dot {\phi }}-l}
  where

  
    
      
        
          p
          
            θ
          
        
        =
        
          
            
              ∂
              l
            
            
              ∂
              
                
                  
                    θ
                    ˙
                  
                
              
            
          
        
        =
        m
        
          l
          
            2
          
        
        
          
            
              θ
              ˙
            
          
        
      
    
    {\displaystyle p_{\theta }={\frac {\partial l}{\partial {\dot {\theta }}}}=ml^{2}{\dot {\theta }}}
  and

  
    
      
        
          p
          
            ϕ
          
        
        =
        
          
            
              ∂
              l
            
            
              ∂
              
                
                  
                    ϕ
                    ˙
                  
                
              
            
          
        
        =
        m
        
          l
          
            2
          
        
        
          sin
          
            2
          
        
        
        θ
        
        
          
            
              ϕ
              ˙
            
          
        
        .
      
    
    {\displaystyle p_{\phi }={\frac {\partial l}{\partial {\dot {\phi }}}}=ml^{2}\sin ^{2}\!\theta \,{\dot {\phi }}.}
  in terms of coordinates and momenta, the hamiltonian reads

  
    
      
        h
        =
        
          
            
              
                [
                
                  
                    
                      1
                      2
                    
                  
                  m
                  
                    l
                    
                      2
                    
                  
                  
                    
                      
                        
                          θ
                          ˙
                        
                      
                    
                    
                      2
                    
                  
                  +
                  
                    
                      1
                      2
                    
                  
                  m
                  
                    l
                    
                      2
                    
                  
                  
                    sin
                    
                      2
                    
                  
                  
                  θ
                  
                  
                    
                      
                        
                          ϕ
                          ˙
                        
                      
                    
                    
                      2
                    
                  
                
                ]
              
              ⏟
            
          
          
            t
          
        
        +
        
          
            
              
                
                  
                    [
                  
                
                −
                m
                g
                l
                cos
                ⁡
                θ
                
                  
                    ]
                  
                
              
              ⏟
            
          
          
            v
          
        
        =
        
          
            
              p
              
                θ
              
              
                2
              
            
            
              2
              m
              
                l
                
                  2
                
              
            
          
        
        +
        
          
            
              p
              
                ϕ
              
              
                2
              
            
            
              2
              m
              
                l
                
                  2
                
              
              
                sin
                
                  2
                
              
              ⁡
              θ
            
          
        
        −
        m
        g
        l
        cos
        ⁡
        θ
      
    
    {\displaystyle h=\underbrace {\left[{\frac {1}{2}}ml^{2}{\dot {\theta }}^{2}+{\frac {1}{2}}ml^{2}\sin ^{2}\!\theta \,{\dot {\phi }}^{2}\right]} _{t}+\underbrace {{\big [}-mgl\cos \theta {\big ]}} _{v}={p_{\theta }^{2} \over 2ml^{2}}+{p_{\phi }^{2} \over 2ml^{2}\sin ^{2}\theta }-mgl\cos \theta }
  hamilton's equations give the time evolution of coordinates and conjugate momenta in four first-order differential equations,

  
    
      
        
          
            
              θ
              ˙
            
          
        
        =
        
          
            
              p
              
                θ
              
            
            
              m
              
                l
                
                  2
                
              
            
          
        
      
    
    {\displaystyle {\dot {\theta }}={p_{\theta } \over ml^{2}}}
  

  
    
      
        
          
            
              ϕ
              ˙
            
          
        
        =
        
          
            
              p
              
                ϕ
              
            
            
              m
              
                l
                
                  2
                
              
              
                sin
                
                  2
                
              
              ⁡
              θ
            
          
        
      
    
    {\displaystyle {\dot {\phi }}={p_{\phi } \over ml^{2}\sin ^{2}\theta }}
  

  
    
      
        
          
            
              
                p
                
                  θ
                
              
              ˙
            
          
        
        =
        
          
            
              p
              
                ϕ
              
              
                2
              
            
            
              m
              
                l
                
                  2
                
              
              
                sin
                
                  3
                
              
              ⁡
              θ
            
          
        
        cos
        ⁡
        θ
        −
        m
        g
        l
        sin
        ⁡
        θ
      
    
    {\displaystyle {\dot {p_{\theta }}}={p_{\phi }^{2} \over ml^{2}\sin ^{3}\theta }\cos \theta -mgl\sin \theta }
  

  
    
      
        
          
            
              
                p
                
                  ϕ
                
              
              ˙
            
          
        
        =
        0
      
    
    {\displaystyle {\dot {p_{\phi }}}=0}
  .momentum 
  
    
      
        
          p
          
            ϕ
          
        
      
    
    {\displaystyle p_{\phi }}
  , which corresponds to the vertical component of  angular momentum 
  
    
      
        
          l
          
            z
          
        
        =
        l
        sin
        ⁡
        θ
        ×
        m
        l
        sin
        ⁡
        θ
        
        
          
            
              ϕ
              ˙
            
          
        
      
    
    {\displaystyle l_{z}=l\sin \theta \times ml\sin \theta \,{\dot {\phi }}}
  ,  is a constant of motion. that is a consequence of the rotational symmetry of the system around the vertical axis. being absent from the hamiltonian, azimuth 
  
    
      
        ϕ
      
    
    {\displaystyle \phi }
   is a cyclic coordinate, which implies conservation of its conjugate momentum.


== deriving hamilton's equations ==
hamilton's equations can be derived by a calculation with the lagrangian 
  
    
      
        
          
            l
          
        
      
    
    {\displaystyle {\mathcal {l}}}
  , generalized positions qi, and generalized velocities q̇i, where 
  
    
      
        i
        =
        1
        ,
        …
        ,
        n
      
    
    {\displaystyle i=1,\ldots ,n}
  . here we work off-shell, meaning 
  
    
      
        
          q
          
            i
          
        
        ,
        
          
            
              
                q
                ˙
              
            
          
          
            i
          
        
        ,
        t
      
    
    {\displaystyle q^{i},{\dot {q}}^{i},t}
   are independent coordinates in phase space, not constrained to follow any equations of motion (in particular, 
  
    
      
        
          
            
              
                q
                ˙
              
            
          
          
            i
          
        
      
    
    {\displaystyle {\dot {q}}^{i}}
   is not a derivative of 
  
    
      
        
          q
          
            i
          
        
      
    
    {\displaystyle q^{i}}
  ). the total differential of the lagrangian is:
  
    
      
        
          d
        
        
          
            l
          
        
        =
        
          ∑
          
            i
          
        
        
          (
          
            
              
                
                  ∂
                  
                    
                      l
                    
                  
                
                
                  ∂
                  
                    q
                    
                      i
                    
                  
                
              
            
            
              d
            
            
              q
              
                i
              
            
            +
            
              
                
                  ∂
                  
                    
                      l
                    
                  
                
                
                  ∂
                  
                    
                      
                        
                          q
                          ˙
                        
                      
                    
                    
                      i
                    
                  
                
              
            
            
              d
            
            
              
                
                  
                    q
                    ˙
                  
                
              
              
                i
              
            
          
          )
        
        +
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              t
            
          
        
        
          d
        
        t
         
        .
      
    
    {\displaystyle \mathrm {d} {\mathcal {l}}=\sum _{i}\left({\frac {\partial {\mathcal {l}}}{\partial q^{i}}}\mathrm {d} q^{i}+{\frac {\partial {\mathcal {l}}}{\partial {\dot {q}}^{i}}}\mathrm {d} {\dot {q}}^{i}\right)+{\frac {\partial {\mathcal {l}}}{\partial t}}\mathrm {d} t\ .}
  the generalized momentum coordinates were defined as 
  
    
      
        
          p
          
            i
          
        
        =
        
          
            
              
                ∂
                
                  
                    l
                  
                
              
              
                ∂
                
                  
                    
                      
                        q
                        ˙
                      
                    
                  
                  
                    i
                  
                
              
            
          
        
      
    
    {\displaystyle p_{i}={\tfrac {\partial {\mathcal {l}}}{\partial {\dot {q}}^{i}}}}
  , so we may rewrite the equation as:

  
    
      
        
          
            
              
                
                  d
                
                
                  
                    l
                  
                
              
              
                =
              
              
                
                  
                    ∑
                    
                      i
                    
                  
                  
                    (
                    
                      
                        
                          
                            ∂
                            
                              
                                l
                              
                            
                          
                          
                            ∂
                            
                              q
                              
                                i
                              
                            
                          
                        
                      
                      
                        d
                      
                      
                        q
                        
                          i
                        
                      
                      +
                      
                        p
                        
                          i
                        
                      
                      
                        d
                      
                      
                        
                          
                            
                              q
                              ˙
                            
                          
                        
                        
                          i
                        
                      
                    
                    )
                  
                  +
                  
                    
                      
                        ∂
                        
                          
                            l
                          
                        
                      
                      
                        ∂
                        t
                      
                    
                  
                  
                    d
                  
                  t
                
              
            
            
              
              
                =
              
              
                
                  
                    ∑
                    
                      i
                    
                  
                  
                    (
                    
                      
                        
                          
                            ∂
                            
                              
                                l
                              
                            
                          
                          
                            ∂
                            
                              q
                              
                                i
                              
                            
                          
                        
                      
                      
                        d
                      
                      
                        q
                        
                          i
                        
                      
                      +
                      
                        d
                      
                      (
                      
                        p
                        
                          i
                        
                      
                      
                        
                          
                            
                              q
                              ˙
                            
                          
                        
                        
                          i
                        
                      
                      )
                      −
                      
                        
                          
                            
                              q
                              ˙
                            
                          
                        
                        
                          i
                        
                      
                      
                        d
                      
                      
                        p
                        
                          i
                        
                      
                    
                    )
                  
                  +
                  
                    
                      
                        ∂
                        
                          
                            l
                          
                        
                      
                      
                        ∂
                        t
                      
                    
                  
                  
                    d
                  
                  t
                  
                  .
                
              
            
          
        
      
    
    {\displaystyle {\begin{array}{rcl}\mathrm {d} {\mathcal {l}}&=&\displaystyle \sum _{i}\left({\frac {\partial {\mathcal {l}}}{\partial q^{i}}}\mathrm {d} q^{i}+p_{i}\mathrm {d} {\dot {q}}^{i}\right)+{\frac {\partial {\mathcal {l}}}{\partial t}}\mathrm {d} t\\&=&\displaystyle \sum _{i}\left({\frac {\partial {\mathcal {l}}}{\partial q^{i}}}\mathrm {d} q^{i}+\mathrm {d} (p_{i}{\dot {q}}^{i})-{\dot {q}}^{i}\mathrm {d} p_{i}\right)+{\frac {\partial {\mathcal {l}}}{\partial t}}\mathrm {d} t\,.\end{array}}}
  after rearranging, one obtains:

  
    
      
        
          d
        
        
        
          (
          
            
              ∑
              
                i
              
            
            
              p
              
                i
              
            
            
              
                
                  
                    q
                    ˙
                  
                
              
              
                i
              
            
            −
            
              
                l
              
            
          
          )
        
        =
        
          ∑
          
            i
          
        
        
          (
          
            −
            
              
                
                  ∂
                  
                    
                      l
                    
                  
                
                
                  ∂
                  
                    q
                    
                      i
                    
                  
                
              
            
            
              d
            
            
              q
              
                i
              
            
            +
            
              
                
                  
                    q
                    ˙
                  
                
              
              
                i
              
            
            
              d
            
            
              p
              
                i
              
            
          
          )
        
        −
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              t
            
          
        
        
          d
        
        t
         
        .
      
    
    {\displaystyle \mathrm {d} \!\left(\sum _{i}p_{i}{\dot {q}}^{i}-{\mathcal {l}}\right)=\sum _{i}\left(-{\frac {\partial {\mathcal {l}}}{\partial q^{i}}}\mathrm {d} q^{i}+{\dot {q}}^{i}\mathrm {d} p_{i}\right)-{\frac {\partial {\mathcal {l}}}{\partial t}}\mathrm {d} t\ .}
  the term in parentheses on the left-hand side is just the hamiltonian defined previously, therefore

  
    
      
        
          d
        
        
          
            h
          
        
        =
        
          ∑
          
            i
          
        
        
          (
          
            −
            
              
                
                  ∂
                  
                    
                      l
                    
                  
                
                
                  ∂
                  
                    q
                    
                      i
                    
                  
                
              
            
            
              d
            
            
              q
              
                i
              
            
            +
            
              
                
                  
                    q
                    ˙
                  
                
              
              
                i
              
            
            
              d
            
            
              p
              
                i
              
            
          
          )
        
        −
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              t
            
          
        
        
          d
        
        t
         
        .
      
    
    {\displaystyle \mathrm {d} {\mathcal {h}}=\sum _{i}\left(-{\frac {\partial {\mathcal {l}}}{\partial q^{i}}}\mathrm {d} q^{i}+{\dot {q}}^{i}\mathrm {d} p_{i}\right)-{\frac {\partial {\mathcal {l}}}{\partial t}}\mathrm {d} t\ .}
  one may calculate the total differential of the hamiltonian h  directly, as previously with the lagrangian l, yielding:

  
    
      
        
          d
        
        
          
            h
          
        
        =
        
          ∑
          
            i
          
        
        
          (
          
            
              
                
                  ∂
                  
                    
                      h
                    
                  
                
                
                  ∂
                  
                    q
                    
                      i
                    
                  
                
              
            
            
              d
            
            
              q
              
                i
              
            
            +
            
              
                
                  ∂
                  
                    
                      h
                    
                  
                
                
                  ∂
                  
                    p
                    
                      i
                    
                  
                
              
            
            
              d
            
            
              p
              
                i
              
            
          
          )
        
        +
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              t
            
          
        
        
          d
        
        t
         
        .
      
    
    {\displaystyle \mathrm {d} {\mathcal {h}}=\sum _{i}\left({\frac {\partial {\mathcal {h}}}{\partial q^{i}}}\mathrm {d} q^{i}+{\frac {\partial {\mathcal {h}}}{\partial p_{i}}}\mathrm {d} p_{i}\right)+{\frac {\partial {\mathcal {h}}}{\partial t}}\mathrm {d} t\ .}
  one may now equate these two expressions for 
  
    
      
        d
        
          
            h
          
        
      
    
    {\displaystyle d{\mathcal {h}}}
  , one in terms of 
  
    
      
        
          
            l
          
        
      
    
    {\displaystyle {\mathcal {l}}}
  , the other in terms of 
  
    
      
        
          
            h
          
        
      
    
    {\displaystyle {\mathcal {h}}}
  :

  
    
      
        
          ∑
          
            i
          
        
        
          (
          
            −
            
              
                
                  ∂
                  
                    
                      l
                    
                  
                
                
                  ∂
                  
                    q
                    
                      i
                    
                  
                
              
            
            
              d
            
            
              q
              
                i
              
            
            +
            
              
                
                  
                    q
                    ˙
                  
                
              
              
                i
              
            
            
              d
            
            
              p
              
                i
              
            
          
          )
        
        −
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              t
            
          
        
        
          d
        
        t
         
        =
         
        
          ∑
          
            i
          
        
        
          (
          
            
              
                
                  ∂
                  
                    
                      h
                    
                  
                
                
                  ∂
                  
                    q
                    
                      i
                    
                  
                
              
            
            
              d
            
            
              q
              
                i
              
            
            +
            
              
                
                  ∂
                  
                    
                      h
                    
                  
                
                
                  ∂
                  
                    p
                    
                      i
                    
                  
                
              
            
            
              d
            
            
              p
              
                i
              
            
          
          )
        
        +
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              t
            
          
        
        
          d
        
        t
         
        .
      
    
    {\displaystyle \sum _{i}\left(-{\frac {\partial {\mathcal {l}}}{\partial q^{i}}}\mathrm {d} q^{i}+{\dot {q}}^{i}\mathrm {d} p_{i}\right)-{\frac {\partial {\mathcal {l}}}{\partial t}}\mathrm {d} t\ =\ \sum _{i}\left({\frac {\partial {\mathcal {h}}}{\partial q^{i}}}\mathrm {d} q^{i}+{\frac {\partial {\mathcal {h}}}{\partial p_{i}}}\mathrm {d} p_{i}\right)+{\frac {\partial {\mathcal {h}}}{\partial t}}\mathrm {d} t\ .}
  since these calculations are off-shell, one can equate the respective coefficients of 
  
    
      
        
          d
        
        
          q
          
            i
          
        
        ,
        
          d
        
        
          p
          
            i
          
        
        ,
        
          d
        
        t
      
    
    {\displaystyle \mathrm {d} q^{i},\mathrm {d} p_{i},\mathrm {d} t}
   on the two sides:

  
    
      
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              
                q
                
                  i
                
              
            
          
        
        =
        −
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                q
                
                  i
                
              
            
          
        
        
        ,
        
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              
                p
                
                  i
                
              
            
          
        
        =
        
          
            
              
                q
                ˙
              
            
          
          
            i
          
        
        
        ,
        
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              t
            
          
        
        =
        −
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              t
            
          
        
         
        .
      
    
    {\displaystyle {\frac {\partial {\mathcal {h}}}{\partial q^{i}}}=-{\frac {\partial {\mathcal {l}}}{\partial q^{i}}}\quad ,\quad {\frac {\partial {\mathcal {h}}}{\partial p_{i}}}={\dot {q}}^{i}\quad ,\quad {\frac {\partial {\mathcal {h}}}{\partial t}}=-{\partial {\mathcal {l}} \over \partial t}\ .}
  on-shell, one assumes 
  
    
      
        
          q
          
            i
          
        
        =
        
          q
          
            i
          
        
        (
        t
        )
      
    
    {\displaystyle q^{i}=q^{i}(t)}
   are parametric functions which define a trajectory in phase space obeying lagrange's equations:

  
    
      
        
          
            
              d
            
            
              
                d
              
              t
            
          
        
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                
                  
                    
                      q
                      ˙
                    
                  
                
                
                  i
                
              
            
          
        
        −
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                q
                
                  i
                
              
            
          
        
        =
        0
         
        .
      
    
    {\displaystyle {\frac {\mathrm {d} }{\mathrm {d} t}}{\frac {\partial {\mathcal {l}}}{\partial {\dot {q}}^{i}}}-{\frac {\partial {\mathcal {l}}}{\partial q^{i}}}=0\ .}
  rearranging and writing in terms of the on-shell 
  
    
      
        
          p
          
            i
          
        
        =
        
          p
          
            i
          
        
        (
        t
        )
      
    
    {\displaystyle p_{i}=p_{i}(t)}
   gives:

  
    
      
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                q
                
                  i
                
              
            
          
        
        =
        
          
            
              
                p
                ˙
              
            
          
          
            i
          
        
         
        .
      
    
    {\displaystyle {\frac {\partial {\mathcal {l}}}{\partial q^{i}}}={\dot {p}}_{i}\ .}
  thus lagarange's equations are equivalent to hamilton's equations:

  
    
      
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              
                q
                
                  i
                
              
            
          
        
        =
        −
        
          
            
              
                p
                ˙
              
            
          
          
            i
          
        
        
        ,
        
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              
                p
                
                  i
                
              
            
          
        
        =
        
          
            
              
                q
                ˙
              
            
          
          
            i
          
        
        
        ,
        
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              t
            
          
        
        =
        −
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              t
            
          
        
         
        .
      
    
    {\displaystyle {\frac {\partial {\mathcal {h}}}{\partial q^{i}}}=-{\dot {p}}_{i}\quad ,\quad {\frac {\partial {\mathcal {h}}}{\partial p_{i}}}={\dot {q}}^{i}\quad ,\quad {\frac {\partial {\mathcal {h}}}{\partial t}}=-{\partial {\mathcal {l}} \over \partial t}\ .}
  in the case of time-independent 
  
    
      
        
          
            h
          
        
      
    
    {\displaystyle {\mathcal {h}}}
   and 
  
    
      
        
          
            l
          
        
      
    
    {\displaystyle {\mathcal {l}}}
  , hamilton's equations consist of 2n first-order differential equations, while lagrange's equations consist of n second-order equations. hamilton's equations usually do not reduce the difficulty of finding explicit solutions, but important theoretical results can be derived from them, because coordinates and momenta are independent variables with nearly symmetric roles.
hamilton's equations have another advantage over lagrange's equations: if a system has a symmetry, so that some coordinate does not occur in the hamiltonian (i.e. a cyclic coordinate), the corresponding momentum is conserved, and that coordinate can be reduced to a constant in the other equations of the set. this effectively reduces the problem from n coordinates to (n − 1) coordinates: this is the basis of symplectic reduction in geometry. in the lagrangian framework, however, the result that the corresponding momentum is conserved still follows immediately, but all the generalized velocities still occur in the lagrangian, and a system of equations in n coordinates still has to be solved. the lagrangian and hamiltonian approaches provide the groundwork for deeper results in classical mechanics, and suggest analogies leading to the formulations of quantum mechanics.


== properties of the hamiltonian h ==
the value of the hamiltonian 
  
    
      
        
          
            h
          
        
      
    
    {\displaystyle {\cal {h}}}
   is the total energy of the system if and only if the energy function 
  
    
      
        
          e
          
            
              l
            
          
        
      
    
    {\displaystyle e_{\cal {l}}}
   has the same property. (see definition of 
  
    
      
        
          
            h
          
        
        )
        .
      
    
    {\displaystyle {\cal {h}}).}
  

  
    
      
        
          
            
              d
              
                
                  h
                
              
            
            
              d
              t
            
          
        
        =
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              t
            
          
        
      
    
    {\displaystyle {\frac {d{\cal {h}}}{dt}}={\frac {\partial {\cal {h}}}{\partial t}}}
   when 
  
    
      
        
          p
        
        (
        t
        )
        ,
        
          q
        
        (
        t
        )
      
    
    {\displaystyle \mathbf {p} (t),\mathbf {q} (t)}
   form a solution of hamilton's equations. indeed, 
  
    
      
        
          
            
              
                d
                
                  
                    h
                  
                
              
              
                d
                t
              
            
          
          =
          
            
              
                ∂
                
                  
                    h
                  
                
              
              
                ∂
                
                  p
                
              
            
          
          ⋅
          
            
              
                p
                ˙
              
            
          
          +
          
            
              
                ∂
                
                  
                    h
                  
                
              
              
                ∂
                
                  q
                
              
            
          
          ⋅
          
            
              
                q
                ˙
              
            
          
          +
          
            
              
                ∂
                
                  
                    h
                  
                
              
              
                ∂
                t
              
            
          
          ,
        
      
    
    {\displaystyle \textstyle {\frac {d{\cal {h}}}{dt}}={\frac {\partial {\cal {h}}}{\partial {\boldsymbol {p}}}}\cdot {\dot {\boldsymbol {p}}}+{\frac {\partial {\cal {h}}}{\partial {\boldsymbol {q}}}}\cdot {\dot {\boldsymbol {q}}}+{\frac {\partial {\cal {h}}}{\partial t}},}
   and everything but the final term cancels out.

  
    
      
        
          
            h
          
        
      
    
    {\displaystyle {\cal {h}}}
   does not change under point transformations, i.e. smooth changes 
  
    
      
        
          q
        
        ↔
        
          
            q
            ′
          
        
      
    
    {\displaystyle {\boldsymbol {q}}\leftrightarrow {\boldsymbol {q'}}}
   of space coordinates. (follows from the invariance of the energy function 
  
    
      
        
          e
          
            
              l
            
          
        
      
    
    {\displaystyle e_{\cal {l}}}
   under point transformations. the invariance of 
  
    
      
        
          e
          
            
              l
            
          
        
      
    
    {\displaystyle e_{\cal {l}}}
   can be established directly).

  
    
      
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              t
            
          
        
        =
        −
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              t
            
          
        
        .
      
    
    {\displaystyle {\frac {\partial {\cal {h}}}{\partial t}}=-{\frac {\partial {\cal {l}}}{\partial t}}.}
   (see deriving hamilton's equations).

  
    
      
        −
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              
                q
                
                  i
                
              
            
          
        
        =
        
          
            
              
                p
                ˙
              
            
          
          
            i
          
        
        =
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                q
                
                  i
                
              
            
          
        
        .
      
    
    {\displaystyle -{\frac {\partial {\cal {h}}}{\partial q^{i}}}={\dot {p}}_{i}={\frac {\partial {\cal {l}}}{\partial q^{i}}}.}
   (compare hamilton's and euler-lagrange equations or see deriving hamilton's equations).

  
    
      
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              
                q
                
                  i
                
              
            
          
        
        =
        0
      
    
    {\displaystyle {\frac {\partial {\cal {h}}}{\partial q^{i}}}=0}
   if and only if 
  
    
      
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                q
                
                  i
                
              
            
          
        
        =
        0.
      
    
    {\displaystyle {\frac {\partial {\cal {l}}}{\partial q^{i}}}=0.}
  a coordinate for which the last equation holds is called cyclic (or ignorable). every cyclic coordinate 
  
    
      
        
          q
          
            i
          
        
      
    
    {\displaystyle q^{i}}
   reduces the number of degrees of freedom by 
  
    
      
        1
        ,
      
    
    {\displaystyle 1,}
   causes the corresponding momentum 
  
    
      
        
          p
          
            i
          
        
      
    
    {\displaystyle p_{i}}
   to be conserved, and makes hamilton's equations easier to solve.


== hamiltonian of a charged particle in an electromagnetic field ==
a sufficient illustration of hamiltonian mechanics is given by the hamiltonian of a charged particle in an electromagnetic field. in cartesian coordinates the lagrangian of a non-relativistic classical particle in an electromagnetic field is (in si units):

  
    
      
        
          
            l
          
        
        =
        
          ∑
          
            i
          
        
        
          
            
              1
              2
            
          
        
        m
        
          
            
              
                x
                ˙
              
            
          
          
            i
          
          
            2
          
        
        +
        
          ∑
          
            i
          
        
        q
        
          
            
              
                x
                ˙
              
            
          
          
            i
          
        
        
          a
          
            i
          
        
        −
        q
        φ
      
    
    {\displaystyle {\mathcal {l}}=\sum _{i}{\tfrac {1}{2}}m{\dot {x}}_{i}^{2}+\sum _{i}q{\dot {x}}_{i}a_{i}-q\varphi }
  where q is the electric charge of the particle, φ is the electric scalar potential, and the ai are the components of the magnetic vector potential that may all explicitly depend on 
  
    
      
        
          x
          
            i
          
        
      
    
    {\displaystyle x_{i}}
   and 
  
    
      
        t
      
    
    {\displaystyle t}
  .
this lagrangian, combined with euler–lagrange equation, produces the lorentz force law

  
    
      
        m
        
          
            
              
                x
              
              ¨
            
          
        
        =
        q
        
          e
        
        +
        q
        
          
            
              
                x
              
              ˙
            
          
        
        ×
        
          b
        
        
        ,
      
    
    {\displaystyle m{\ddot {\mathbf {x} }}=q\mathbf {e} +q{\dot {\mathbf {x} }}\times \mathbf {b} \,,}
  and is called minimal coupling.
note that the values of scalar potential and vector potential would change during a gauge transformation, and the lagrangian itself will pick up extra terms as well; but the extra terms in lagrangian add up to a total time derivative of a scalar function, and therefore won't change the euler–lagrange equation.
the canonical momenta are given by:

  
    
      
        
          p
          
            i
          
        
        =
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                
                  
                    
                      x
                      ˙
                    
                  
                
                
                  i
                
              
            
          
        
        =
        m
        
          
            
              
                x
                ˙
              
            
          
          
            i
          
        
        +
        q
        
          a
          
            i
          
        
      
    
    {\displaystyle p_{i}={\frac {\partial {\mathcal {l}}}{\partial {\dot {x}}_{i}}}=m{\dot {x}}_{i}+qa_{i}}
  note that canonical momenta are not gauge invariant, and are not physically measurable. however, the kinetic momentum:

  
    
      
        
          p
          
            i
          
        
        ≡
        m
        
          
            
              
                x
                ˙
              
            
          
          
            i
          
        
        =
        
          p
          
            i
          
        
        −
        q
        
          a
          
            i
          
        
      
    
    {\displaystyle p_{i}\equiv m{\dot {x}}_{i}=p_{i}-qa_{i}}
  is gauge invariant and physically measurable.
the hamiltonian, as the legendre transformation of the lagrangian, is therefore:

  
    
      
        
          
            h
          
        
        =
        
          {
          
            
              ∑
              
                i
              
            
            
              
                
                  
                    x
                    ˙
                  
                
              
              
                i
              
            
            
              p
              
                i
              
            
          
          }
        
        −
        
          
            l
          
        
        =
        
          ∑
          
            i
          
        
        
          
            
              
                (
                
                  
                    p
                    
                      i
                    
                  
                  −
                  q
                  
                    a
                    
                      i
                    
                  
                
                )
              
              
                2
              
            
            
              2
              m
            
          
        
        +
        q
        φ
      
    
    {\displaystyle {\mathcal {h}}=\left\{\sum _{i}{\dot {x}}_{i}p_{i}\right\}-{\mathcal {l}}=\sum _{i}{\frac {\left(p_{i}-qa_{i}\right)^{2}}{2m}}+q\varphi }
  this equation is used frequently in quantum mechanics.
under gauge transformation:

  
    
      
        
          a
        
        →
        
          a
        
        +
        ∇
        f
        
        ,
        
        φ
        →
        φ
        −
        
          
            
              f
              ˙
            
          
        
        
        ,
      
    
    {\displaystyle \mathbf {a} \rightarrow \mathbf {a} +\nabla f\,,\quad \varphi \rightarrow \varphi -{\dot {f}}\,,}
  where f(r,t) is any scalar function of space and time, the aforementioned lagrangian, canonical momenta, and hamiltonian transform like:

  
    
      
        l
        →
        
          l
          ′
        
        =
        l
        +
        q
        
          
            
              d
              f
            
            
              d
              t
            
          
        
        
        ,
        
        
          p
        
        →
        
          
            p
            ′
          
        
        =
        
          p
        
        +
        q
        ∇
        f
        
        ,
        
        h
        →
        
          h
          ′
        
        =
        h
        −
        q
        
          
            
              ∂
              f
            
            
              ∂
              t
            
          
        
        
        ,
      
    
    {\displaystyle l\rightarrow l'=l+q{\frac {df}{dt}}\,,\quad \mathbf {p} \rightarrow \mathbf {p'} =\mathbf {p} +q\nabla f\,,\quad h\rightarrow h'=h-q{\frac {\partial f}{\partial t}}\,,}
  which still produces the same hamilton's equation:

  
    
      
        
          
            
              
                
                  
                    
                    
                      
                        
                          ∂
                          
                            h
                            ′
                          
                        
                        
                          ∂
                          
                            
                              x
                              
                                i
                              
                            
                          
                        
                      
                    
                    |
                  
                  
                    
                      p
                      
                        i
                      
                      ′
                    
                  
                
              
              
                
                =
                
                  
                    
                    
                      
                        ∂
                        
                          ∂
                          
                            
                              x
                              
                                i
                              
                            
                          
                        
                      
                    
                    |
                  
                  
                    
                      p
                      
                        i
                      
                      ′
                    
                  
                
                (
                
                  
                    
                      
                        x
                        ˙
                      
                    
                  
                  
                    i
                  
                
                
                  p
                  
                    i
                  
                  ′
                
                −
                
                  l
                  ′
                
                )
                =
                −
                
                  
                    
                    
                      
                        
                          ∂
                          
                            l
                            ′
                          
                        
                        
                          ∂
                          
                            
                              x
                              
                                i
                              
                            
                          
                        
                      
                    
                    |
                  
                  
                    
                      p
                      
                        i
                      
                      ′
                    
                  
                
              
            
            
              
              
                
                =
                −
                
                  
                    
                    
                      
                        
                          ∂
                          l
                        
                        
                          ∂
                          
                            
                              x
                              
                                i
                              
                            
                          
                        
                      
                    
                    |
                  
                  
                    
                      p
                      
                        i
                      
                      ′
                    
                  
                
                −
                q
                
                  
                    
                    
                      
                        ∂
                        
                          ∂
                          
                            
                              x
                              
                                i
                              
                            
                          
                        
                      
                    
                    |
                  
                  
                    
                      p
                      
                        i
                      
                      ′
                    
                  
                
                
                  
                    
                      d
                      f
                    
                    
                      d
                      t
                    
                  
                
              
            
            
              
              
                
                =
                −
                
                  
                    d
                    
                      d
                      t
                    
                  
                
                
                  (
                  
                    
                      
                        
                        
                          
                            
                              ∂
                              l
                            
                            
                              ∂
                              
                                
                                  
                                    
                                      
                                        x
                                        ˙
                                      
                                    
                                  
                                  
                                    i
                                  
                                
                              
                            
                          
                        
                        |
                      
                      
                        
                          p
                          
                            i
                          
                          ′
                        
                      
                    
                    +
                    q
                    
                      
                        
                        
                          
                            
                              ∂
                              f
                            
                            
                              ∂
                              
                                
                                  x
                                  
                                    i
                                  
                                
                              
                            
                          
                        
                        |
                      
                      
                        
                          p
                          
                            i
                          
                          ′
                        
                      
                    
                  
                  )
                
              
            
            
              
              
                
                =
                −
                
                  
                    
                      
                        p
                        ˙
                      
                    
                  
                  
                    i
                  
                  ′
                
              
            
          
        
      
    
    {\displaystyle {\begin{aligned}\left.{\frac {\partial h'}{\partial {x_{i}}}}\right|_{p'_{i}}&=\left.{\frac {\partial }{\partial {x_{i}}}}\right|_{p'_{i}}({\dot {x}}_{i}p'_{i}-l')=-\left.{\frac {\partial l'}{\partial {x_{i}}}}\right|_{p'_{i}}\\&=-\left.{\frac {\partial l}{\partial {x_{i}}}}\right|_{p'_{i}}-q\left.{\frac {\partial }{\partial {x_{i}}}}\right|_{p'_{i}}{\frac {df}{dt}}\\&=-{\frac {d}{dt}}\left(\left.{\frac {\partial l}{\partial {{\dot {x}}_{i}}}}\right|_{p'_{i}}+q\left.{\frac {\partial f}{\partial {x_{i}}}}\right|_{p'_{i}}\right)\\&=-{\dot {p}}'_{i}\end{aligned}}}
  in quantum mechanics, the wave function will also undergo a local u(1) group transformation during the gauge transformation, which implies that all physical results must be invariant under local u(1) transformations.


=== relativistic charged particle in an electromagnetic field ===
the relativistic lagrangian for a particle (rest mass 
  
    
      
        m
      
    
    {\displaystyle m}
   and charge 
  
    
      
        q
      
    
    {\displaystyle q}
  ) is given by:

  
    
      
        
          
            l
          
        
        (
        t
        )
        =
        −
        m
        
          c
          
            2
          
        
        
          
            1
            −
            
              
                
                  
                    
                      
                        
                          
                            x
                          
                          ˙
                        
                      
                    
                    (
                    t
                    )
                  
                  
                    2
                  
                
                
                  c
                  
                    2
                  
                
              
            
          
        
        +
        q
        
          
            
              
                x
              
              ˙
            
          
        
        (
        t
        )
        ⋅
        
          a
        
        
          (
          
            
              x
            
            (
            t
            )
            ,
            t
          
          )
        
        −
        q
        φ
        
          (
          
            
              x
            
            (
            t
            )
            ,
            t
          
          )
        
      
    
    {\displaystyle {\mathcal {l}}(t)=-mc^{2}{\sqrt {1-{\frac {{{\dot {\mathbf {x} }}(t)}^{2}}{c^{2}}}}}+q{\dot {\mathbf {x} }}(t)\cdot \mathbf {a} \left(\mathbf {x} (t),t\right)-q\varphi \left(\mathbf {x} (t),t\right)}
  thus the particle's canonical momentum is

  
    
      
        
          p
        
        (
        t
        )
        =
        
          
            
              ∂
              
                
                  l
                
              
            
            
              ∂
              
                
                  
                    
                      x
                    
                    ˙
                  
                
              
            
          
        
        =
        
          
            
              m
              
                
                  
                    
                      x
                    
                    ˙
                  
                
              
            
            
              1
              −
              
                
                  
                    
                      
                        
                          
                            x
                          
                          ˙
                        
                      
                    
                    
                      2
                    
                  
                  
                    c
                    
                      2
                    
                  
                
              
            
          
        
        +
        q
        
          a
        
      
    
    {\displaystyle \mathbf {p} (t)={\frac {\partial {\mathcal {l}}}{\partial {\dot {\mathbf {x} }}}}={\frac {m{\dot {\mathbf {x} }}}{\sqrt {1-{\frac {{\dot {\mathbf {x} }}^{2}}{c^{2}}}}}}+q\mathbf {a} }
  that is, the sum of the kinetic momentum and the potential momentum.
solving for the velocity, we get

  
    
      
        
          
            
              
                x
              
              ˙
            
          
        
        (
        t
        )
        =
        
          
            
              
                p
              
              −
              q
              
                a
              
            
            
              
                m
                
                  2
                
              
              +
              
                
                  1
                  
                    c
                    
                      2
                    
                  
                
              
              
                
                  
                    (
                    
                      
                        p
                      
                      −
                      q
                      
                        a
                      
                    
                    )
                  
                
                
                  2
                
              
            
          
        
      
    
    {\displaystyle {\dot {\mathbf {x} }}(t)={\frac {\mathbf {p} -q\mathbf {a} }{\sqrt {m^{2}+{\frac {1}{c^{2}}}{\left(\mathbf {p} -q\mathbf {a} \right)}^{2}}}}}
  so the hamiltonian is

  
    
      
        
          
            h
          
        
        (
        t
        )
        =
        
          
            
              
                x
              
              ˙
            
          
        
        ⋅
        
          p
        
        −
        
          
            l
          
        
        =
        c
        
          
            
              m
              
                2
              
            
            
              c
              
                2
              
            
            +
            
              
                
                  (
                  
                    
                      p
                    
                    −
                    q
                    
                      a
                    
                  
                  )
                
              
              
                2
              
            
          
        
        +
        q
        φ
      
    
    {\displaystyle {\mathcal {h}}(t)={\dot {\mathbf {x} }}\cdot \mathbf {p} -{\mathcal {l}}=c{\sqrt {m^{2}c^{2}+{\left(\mathbf {p} -q\mathbf {a} \right)}^{2}}}+q\varphi }
  this results in the force equation (equivalent to the euler–lagrange equation)

  
    
      
        
          
            
              
                p
              
              ˙
            
          
        
        =
        −
        
          
            
              ∂
              
                
                  h
                
              
            
            
              ∂
              
                x
              
            
          
        
        =
        q
        
          
            
              
                x
              
              ˙
            
          
        
        ⋅
        (
        
          ∇
        
        
          a
        
        )
        −
        q
        
          ∇
        
        φ
        =
        q
        
          ∇
        
        (
        
          
            
              
                x
              
              ˙
            
          
        
        ⋅
        
          a
        
        )
        −
        q
        
          ∇
        
        φ
      
    
    {\displaystyle {\dot {\mathbf {p} }}=-{\frac {\partial {\mathcal {h}}}{\partial \mathbf {x} }}=q{\dot {\mathbf {x} }}\cdot ({\boldsymbol {\nabla }}\mathbf {a} )-q{\boldsymbol {\nabla }}\varphi =q{\boldsymbol {\nabla }}({\dot {\mathbf {x} }}\cdot \mathbf {a} )-q{\boldsymbol {\nabla }}\varphi }
  from which one can derive

  
    
      
        
          
            
              
                
                  
                    
                      d
                    
                    
                      
                        d
                      
                      t
                    
                  
                
                
                  (
                  
                    
                      
                        m
                        
                          
                            
                              
                                x
                              
                              ˙
                            
                          
                        
                      
                      
                        1
                        −
                        
                          
                            
                              
                                
                                  
                                    
                                      x
                                    
                                    ˙
                                  
                                
                              
                              
                                2
                              
                            
                            
                              c
                              
                                2
                              
                            
                          
                        
                      
                    
                  
                  )
                
              
              
                
                =
                
                  
                    
                      d
                    
                    
                      
                        d
                      
                      t
                    
                  
                
                (
                
                  p
                
                −
                q
                
                  a
                
                )
                =
                
                  
                    
                      
                        p
                      
                      ˙
                    
                  
                
                −
                q
                
                  
                    
                      ∂
                      a
                    
                    
                      ∂
                      t
                    
                  
                
                −
                q
                (
                
                  
                    
                      
                        x
                      
                      ˙
                    
                  
                
                ⋅
                ∇
                )
                
                  a
                
              
            
            
              
              
                
                =
                q
                
                  ∇
                
                (
                
                  
                    
                      
                        x
                      
                      ˙
                    
                  
                
                ⋅
                
                  a
                
                )
                −
                q
                
                  ∇
                
                φ
                −
                q
                
                  
                    
                      ∂
                      a
                    
                    
                      ∂
                      t
                    
                  
                
                −
                q
                (
                
                  
                    
                      
                        x
                      
                      ˙
                    
                  
                
                ⋅
                ∇
                )
                
                  a
                
              
            
            
              
              
                
                =
                q
                
                  e
                
                +
                q
                
                  
                    
                      
                        x
                      
                      ˙
                    
                  
                
                ×
                
                  b
                
              
            
          
        
      
    
    {\displaystyle {\begin{aligned}{\frac {\mathrm {d} }{\mathrm {d} t}}\left({\frac {m{\dot {\mathbf {x} }}}{\sqrt {1-{\frac {{\dot {\mathbf {x} }}^{2}}{c^{2}}}}}}\right)&={\frac {\mathrm {d} }{\mathrm {d} t}}(\mathbf {p} -q\mathbf {a} )={\dot {\mathbf {p} }}-q{\frac {\partial a}{\partial t}}-q({\dot {\mathbf {x} }}\cdot \nabla )\mathbf {a} \\&=q{\boldsymbol {\nabla }}({\dot {\mathbf {x} }}\cdot \mathbf {a} )-q{\boldsymbol {\nabla }}\varphi -q{\frac {\partial a}{\partial t}}-q({\dot {\mathbf {x} }}\cdot \nabla )\mathbf {a} \\&=q\mathbf {e} +q{\dot {\mathbf {x} }}\times \mathbf {b} \end{aligned}}}
  the above derivation makes use of the vector calculus identity:

  
    
      
        
          
            
              1
              2
            
          
        
        ∇
        
          (
          
            
              a
            
            ⋅
            
              a
            
          
          )
        
         
        =
         
        
          a
        
        ⋅
        
          
            j
          
          
            
              a
            
          
        
         
        =
         
        
          a
        
        ⋅
        (
        ∇
        
          a
        
        )
         
        =
         
        (
        
          a
        
        
          ⋅
        
        ∇
        )
        
          a
        
        
        +
        
        
          a
        
        
          ×
        
        (
        ∇
        
          ×
        
        
          a
        
        )
        .
      
    
    {\displaystyle {\tfrac {1}{2}}\nabla \left(\mathbf {a} \cdot \mathbf {a} \right)\ =\ \mathbf {a} \cdot \mathbf {j} _{\mathbf {a} }\ =\ \mathbf {a} \cdot (\nabla \mathbf {a} )\ =\ (\mathbf {a} {\cdot }\nabla )\mathbf {a} \,+\,\mathbf {a} {\times }(\nabla {\times }\mathbf {a} ).}
  an equivalent expression for the hamiltonian as function of the relativistic (kinetic) momentum, 
  
    
      
        
          p
        
        =
        γ
        m
        
          
            
              
                x
              
              ˙
            
          
        
        (
        t
        )
        =
        
          p
        
        −
        q
        
          a
        
      
    
    {\displaystyle \mathbf {p} =\gamma m{\dot {\mathbf {x} }}(t)=\mathbf {p} -q\mathbf {a} }
  , is

  
    
      
        
          
            h
          
        
        (
        t
        )
        =
        
          
            
              
                x
              
              ˙
            
          
        
        (
        t
        )
        ⋅
        
          p
        
        (
        t
        )
        +
        
          
            
              m
              
                c
                
                  2
                
              
            
            γ
          
        
        +
        q
        φ
        (
        
          x
        
        (
        t
        )
        ,
        t
        )
        =
        γ
        m
        
          c
          
            2
          
        
        +
        q
        φ
        (
        
          x
        
        (
        t
        )
        ,
        t
        )
        =
        e
        +
        v
      
    
    {\displaystyle {\mathcal {h}}(t)={\dot {\mathbf {x} }}(t)\cdot \mathbf {p} (t)+{\frac {mc^{2}}{\gamma }}+q\varphi (\mathbf {x} (t),t)=\gamma mc^{2}+q\varphi (\mathbf {x} (t),t)=e+v}
  this has the advantage that kinetic momentum 
  
    
      
        
          p
        
      
    
    {\displaystyle \mathbf {p} }
   can be measured experimentally whereas canonical momentum 
  
    
      
        
          p
        
      
    
    {\displaystyle \mathbf {p} }
   cannot. notice that the hamiltonian (total energy) can be viewed as the sum of the relativistic energy (kinetic+rest), 
  
    
      
        e
        =
        γ
        m
        
          c
          
            2
          
        
      
    
    {\displaystyle e=\gamma mc^{2}}
  , plus the potential energy, 
  
    
      
        v
        =
        q
        φ
      
    
    {\displaystyle v=q\varphi }
  .


== from symplectic geometry to hamilton's equations ==


=== geometry of hamiltonian systems ===
the hamiltonian can induce a symplectic structure on a smooth even-dimensional manifold m2n in several equivalent ways, the best known being the following:as a closed nondegenerate symplectic 2-form ω. according to the darboux's theorem, in a small neighbourhood around any point on m there exist suitable local coordinates 
  
    
      
        
          p
          
            1
          
        
        ,
        ⋯
        ,
        
          p
          
            n
          
        
        ,
         
        
          q
          
            1
          
        
        ,
        ⋯
        ,
        
          q
          
            n
          
        
      
    
    {\displaystyle p_{1},\cdots ,p_{n},\ q_{1},\cdots ,q_{n}}
   (canonical or symplectic coordinates) in which the symplectic form becomes: 

  
    
      
        ω
        =
        
          ∑
          
            i
            =
            1
          
          
            n
          
        
        d
        
          p
          
            i
          
        
        ∧
        d
        
          q
          
            i
          
        
         
        .
      
    
    {\displaystyle \omega =\sum _{i=1}^{n}dp_{i}\wedge dq_{i}\ .}
  the form 
  
    
      
        ω
      
    
    {\displaystyle \omega }
   induces a natural isomorphism of the tangent space with the cotangent space: 
  
    
      
        
          t
          
            x
          
        
        m
        ≅
        
          t
          
            x
          
          
            ∗
          
        
        m
        .
      
    
    {\displaystyle t_{x}m\cong t_{x}^{*}m.}
   this is done by mapping a vector 
  
    
      
        ξ
        ∈
        
          t
          
            x
          
        
        m
      
    
    {\displaystyle \xi \in t_{x}m}
   to the 1-form 
  
    
      
        
          ω
          
            ξ
          
        
        ∈
        
          t
          
            x
          
          
            ∗
          
        
        m
        ,
      
    
    {\displaystyle \omega _{\xi }\in t_{x}^{*}m,}
   where 
  
    
      
        
          ω
          
            ξ
          
        
        (
        η
        )
        =
        ω
        (
        η
        ,
        ξ
        )
      
    
    {\displaystyle \omega _{\xi }(\eta )=\omega (\eta ,\xi )}
   for all 
  
    
      
        η
        ∈
        
          t
          
            x
          
        
        m
        .
      
    
    {\displaystyle \eta \in t_{x}m.}
   due to the bilinearity and non-degeneracy of 
  
    
      
        ω
        ,
      
    
    {\displaystyle \omega ,}
   and the fact that 
  
    
      
        
          
            d
            i
            m
          
        
        ⁡
        
          t
          
            x
          
        
        m
        =
        
          
            d
            i
            m
          
        
        ⁡
        
          t
          
            x
          
          
            ∗
          
        
        m
        ,
      
    
    {\displaystyle \mathop {\rm {dim}} t_{x}m=\mathop {\rm {dim}} t_{x}^{*}m,}
   the mapping 
  
    
      
        ξ
        →
        
          ω
          
            ξ
          
        
      
    
    {\displaystyle \xi \to \omega _{\xi }}
   is indeed a linear isomorphism. this isomorphism is natural in that it does not change with change of coordinates on 
  
    
      
        m
        .
      
    
    {\displaystyle m.}
   repeating over all 
  
    
      
        x
        ∈
        m
        ,
      
    
    {\displaystyle x\in m,}
   we end up with an isomorphism 
  
    
      
        
          j
          
            −
            1
          
        
        :
        
          vect
        
        (
        m
        )
        →
        
          ω
          
            1
          
        
        (
        m
        )
      
    
    {\displaystyle j^{-1}:{\text{vect}}(m)\to \omega ^{1}(m)}
   between the infinite-dimensional space of smooth vector fields and that of smooth 1-forms. for every 
  
    
      
        f
        ,
        g
        ∈
        
          c
          
            ∞
          
        
        (
        m
        ,
        
          r
        
        )
      
    
    {\displaystyle f,g\in c^{\infty }(m,\mathbb {r} )}
   and  
  
    
      
        ξ
        ,
        η
        ∈
        
          vect
        
        (
        m
        )
        ,
      
    
    {\displaystyle \xi ,\eta \in {\text{vect}}(m),}
  

  
    
      
        
          j
          
            −
            1
          
        
        (
        f
        ξ
        +
        g
        η
        )
        =
        f
        
          j
          
            −
            1
          
        
        (
        ξ
        )
        +
        g
        
          j
          
            −
            1
          
        
        (
        η
        )
        .
      
    
    {\displaystyle j^{-1}(f\xi +g\eta )=fj^{-1}(\xi )+gj^{-1}(\eta ).}
  (in algebraic terms, one would say that the 
  
    
      
        
          c
          
            ∞
          
        
        (
        m
        ,
        
          r
        
        )
      
    
    {\displaystyle c^{\infty }(m,\mathbb {r} )}
  -modules 
  
    
      
        
          vect
        
        (
        m
        )
      
    
    {\displaystyle {\text{vect}}(m)}
   and 
  
    
      
        
          ω
          
            1
          
        
        (
        m
        )
      
    
    {\displaystyle \omega ^{1}(m)}
   are isomorphic). if 
  
    
      
        h
        ∈
        
          c
          
            ∞
          
        
        (
        m
        ×
        
          
            r
          
          
            t
          
        
        ,
        
          r
        
        )
        ,
      
    
    {\displaystyle h\in c^{\infty }(m\times \mathbb {r} _{t},\mathbb {r} ),}
   then, for every fixed 
  
    
      
        t
        ∈
        
          
            r
          
          
            t
          
        
        ,
      
    
    {\displaystyle t\in \mathbb {r} _{t},}
   
  
    
      
        d
        h
        ∈
        
          ω
          
            1
          
        
        (
        m
        )
        ,
      
    
    {\displaystyle dh\in \omega ^{1}(m),}
   and 
  
    
      
        j
        (
        d
        h
        )
        ∈
        
          vect
        
        (
        m
        )
        .
      
    
    {\displaystyle j(dh)\in {\text{vect}}(m).}
   
  
    
      
        j
        (
        d
        h
        )
      
    
    {\displaystyle j(dh)}
   is known as a hamiltonian vector field. the respective differential equation on 
  
    
      
        m
      
    
    {\displaystyle m}
  

  
    
      
        
          
            
              x
              ˙
            
          
        
        =
        j
        (
        d
        h
        )
        (
        x
        )
      
    
    {\displaystyle {\dot {x}}=j(dh)(x)}
  is called hamilton's equation. here 
  
    
      
        x
        =
        x
        (
        t
        )
      
    
    {\displaystyle x=x(t)}
   and 
  
    
      
        j
        (
        d
        h
        )
        (
        x
        )
        ∈
        
          t
          
            x
          
        
        m
      
    
    {\displaystyle j(dh)(x)\in t_{x}m}
   is the (time-dependent) value of the vector field 
  
    
      
        j
        (
        d
        h
        )
      
    
    {\displaystyle j(dh)}
   at 
  
    
      
        x
        ∈
        m
        .
      
    
    {\displaystyle x\in m.}
  
a hamiltonian system may be understood as a fiber bundle e over time r, with the fiber et being the position space at time t ∈ r. the lagrangian is thus a function on the jet bundle j over e; taking the fiberwise legendre transform of the lagrangian produces a function on the dual bundle over time whose fiber at t is the cotangent space t∗et, which comes equipped with a natural symplectic form, and this latter function is the hamiltonian.  the correspondence between lagrangian and hamiltonian mechanics is achieved with the tautological one-form.
any smooth real-valued function h on a symplectic manifold can be used to define a hamiltonian system. the function h is known as "the hamiltonian" or "the energy function." the symplectic manifold is then called the phase space. the hamiltonian induces a special vector field on the symplectic manifold, known as the hamiltonian vector field.
the hamiltonian vector field induces a hamiltonian flow on the manifold. this is a one-parameter family of transformations of the manifold (the parameter of the curves is commonly called "the time"); in other words, an isotopy of symplectomorphisms, starting with the identity. by liouville's theorem, each symplectomorphism preserves the volume form on the phase space. the collection of symplectomorphisms induced by the hamiltonian flow is commonly called "the hamiltonian mechanics" of the hamiltonian system.
the symplectic structure induces a poisson bracket. the poisson bracket gives the space of functions on the manifold the structure of a lie algebra.
if f and g are smooth functions on m then the smooth function ω2(idg, idf) is properly defined; it is called a poisson bracket of functions f and g and is denoted {f, g}. the poisson bracket has the following properties:

bilinearity
antisymmetry

  
    
      
        {
        
          f
          
            1
          
        
        ⋅
        
          f
          
            2
          
        
        ,
        g
        }
        =
        
          f
          
            1
          
        
        {
        
          f
          
            2
          
        
        ,
        g
        }
        +
        
          f
          
            2
          
        
        {
        
          f
          
            1
          
        
        ,
        g
        }
      
    
    {\displaystyle \{f_{1}\cdot f_{2},g\}=f_{1}\{f_{2},g\}+f_{2}\{f_{1},g\}}
   (leibniz rule)

  
    
      
        {
        {
        h
        ,
        f
        }
        ,
        g
        }
        +
        {
        {
        f
        ,
        g
        }
        ,
        h
        }
        +
        {
        {
        g
        ,
        h
        }
        ,
        f
        }
        ≡
        0
      
    
    {\displaystyle \{\{h,f\},g\}+\{\{f,g\},h\}+\{\{g,h\},f\}\equiv 0}
   (jacobi identity)
non-degeneracy: if the point x on m is not critical for f then a smooth function g exists such that 
  
    
      
        {
        f
        ,
        g
        }
        (
        x
        )
        ≠
        0
      
    
    {\displaystyle \{f,g\}(x)\neq 0}
  .given a function f

  
    
      
        
          
            
              d
            
            
              
                d
              
              t
            
          
        
        f
        =
        
          
            ∂
            
              ∂
              t
            
          
        
        f
        +
        
          {
          
            f
            ,
            
              
                h
              
            
          
          }
        
        ,
      
    
    {\displaystyle {\frac {\mathrm {d} }{\mathrm {d} t}}f={\frac {\partial }{\partial t}}f+\left\{f,{\mathcal {h}}\right\},}
  if there is a probability distribution ρ, then (since the phase space velocity 
  
    
      
        (
        
          
            
              
                p
                ˙
              
            
          
          
            i
          
        
        ,
        
          
            
              
                q
                ˙
              
            
          
          
            i
          
        
        )
      
    
    {\displaystyle ({\dot {p}}_{i},{\dot {q}}_{i})}
   has zero divergence and probability is conserved) its convective derivative can be shown to be zero and so

  
    
      
        
          
            ∂
            
              ∂
              t
            
          
        
        ρ
        =
        −
        
          {
          
            ρ
            ,
            
              
                h
              
            
          
          }
        
      
    
    {\displaystyle {\frac {\partial }{\partial t}}\rho =-\left\{\rho ,{\mathcal {h}}\right\}}
  this is called liouville's theorem. every smooth function g over the symplectic manifold generates a one-parameter family of symplectomorphisms and if {g, h} = 0, then g is conserved and the symplectomorphisms are symmetry transformations.
a hamiltonian may have multiple conserved quantities gi. if the symplectic manifold has dimension 2n and there are n functionally independent conserved quantities gi which are in involution (i.e., {gi, gj} = 0), then the hamiltonian is liouville integrable. the liouville–arnold theorem says that, locally, any liouville integrable hamiltonian can be transformed via a symplectomorphism into a new hamiltonian with the conserved quantities gi as coordinates; the new coordinates are called action-angle coordinates. the transformed hamiltonian depends only on the gi, and hence the equations of motion have the simple form

  
    
      
        
          
            
              
                g
                ˙
              
            
          
          
            i
          
        
        =
        0
        
        ,
        
        
          
            
              
                φ
                ˙
              
            
          
          
            i
          
        
        =
        
          f
          
            i
          
        
        (
        g
        )
      
    
    {\displaystyle {\dot {g}}_{i}=0\quad ,\quad {\dot {\varphi }}_{i}=f_{i}(g)}
  for some function f. there is an entire field focusing on small deviations from integrable systems governed by the kam theorem.
the integrability of hamiltonian vector fields is an open question. in general, hamiltonian systems are chaotic; concepts of measure, completeness, integrability and stability are poorly defined.


=== riemannian manifolds ===
an important special case consists of those hamiltonians that are quadratic forms, that is, hamiltonians that can be written as

  
    
      
        
          
            h
          
        
        (
        q
        ,
        p
        )
        =
        
          
            
              1
              2
            
          
        
        ⟨
        p
        ,
        p
        
          ⟩
          
            q
          
        
      
    
    {\displaystyle {\mathcal {h}}(q,p)={\tfrac {1}{2}}\langle p,p\rangle _{q}}
  where ⟨ , ⟩q is a smoothly varying inner product on the fibers t∗qq, the cotangent space to the point q in the configuration space, sometimes called a cometric. this hamiltonian consists entirely of the kinetic term.
if one considers a riemannian manifold or a pseudo-riemannian manifold, the riemannian metric induces a linear isomorphism between the tangent and cotangent bundles. (see musical isomorphism). using this isomorphism, one can define a cometric.  (in coordinates, the matrix defining the cometric is the inverse of the matrix defining the metric.) the solutions to the hamilton–jacobi equations for this hamiltonian are then the same as the geodesics on the manifold. in particular, the hamiltonian flow in this case is the same thing as the geodesic flow. the existence of such solutions, and the completeness of the set of solutions, are discussed in detail in the article on geodesics.  see also geodesics as hamiltonian flows.


=== sub-riemannian manifolds ===
when the cometric is degenerate, then it is not invertible. in this case, one does not have a riemannian manifold, as one does not have a metric.  however, the hamiltonian still exists. in the case where the cometric is degenerate at every point q of the configuration space manifold q, so that the rank of the cometric is less than the dimension of the manifold q, one has a sub-riemannian manifold.
the hamiltonian in this case is known as a sub-riemannian hamiltonian. every such hamiltonian uniquely determines the cometric, and vice versa. this implies that every sub-riemannian manifold is uniquely determined by its sub-riemannian hamiltonian, and that the converse is true: every sub-riemannian manifold has a unique sub-riemannian hamiltonian. the existence of sub-riemannian geodesics is given by the chow–rashevskii theorem.
the continuous, real-valued heisenberg group provides a simple example of a sub-riemannian manifold.  for the heisenberg group, the hamiltonian is given by

  
    
      
        
          
            h
          
        
        
          (
          
            x
            ,
            y
            ,
            z
            ,
            
              p
              
                x
              
            
            ,
            
              p
              
                y
              
            
            ,
            
              p
              
                z
              
            
          
          )
        
        =
        
          
            
              1
              2
            
          
        
        
          (
          
            
              p
              
                x
              
              
                2
              
            
            +
            
              p
              
                y
              
              
                2
              
            
          
          )
        
      
    
    {\displaystyle {\mathcal {h}}\left(x,y,z,p_{x},p_{y},p_{z}\right)={\tfrac {1}{2}}\left(p_{x}^{2}+p_{y}^{2}\right)}
  pz is not involved in the hamiltonian.


=== poisson algebras ===
hamiltonian systems can be generalized in various ways. instead of simply looking at the algebra of smooth functions over a symplectic manifold, hamiltonian mechanics can be formulated on general commutative unital real poisson algebras. a state is a continuous linear functional on the poisson algebra (equipped with some suitable topology) such that for any element a of the algebra, a2 maps to a nonnegative real number.
a further generalization is given by nambu dynamics.


=== generalization to quantum mechanics through poisson bracket ===
hamilton's equations above work well for classical mechanics, but not for quantum mechanics, since the differential equations discussed assume that one can specify the exact position and momentum of the particle simultaneously at any point in time.  however, the equations can be further generalized to then be extended to apply to quantum mechanics as well as to classical mechanics, through the deformation of the poisson algebra over p and q to the algebra of moyal brackets.
specifically, the more general form of the hamilton's equation reads

  
    
      
        
          
            
              
                d
              
              f
            
            
              
                d
              
              t
            
          
        
        =
        
          {
          
            f
            ,
            
              
                h
              
            
          
          }
        
        +
        
          
            
              ∂
              f
            
            
              ∂
              t
            
          
        
      
    
    {\displaystyle {\frac {\mathrm {d} f}{\mathrm {d} t}}=\left\{f,{\mathcal {h}}\right\}+{\frac {\partial f}{\partial t}}}
  where f is some function of p and q, and h is the hamiltonian. to find out the rules for evaluating a poisson bracket without resorting to differential equations, see lie algebra; a poisson bracket is the name for the lie bracket in a poisson algebra. these poisson brackets can then be extended to moyal brackets comporting to an inequivalent lie algebra, as proven by hilbrand j. groenewold, and thereby describe quantum mechanical diffusion in phase space (see the phase space formulation and the wigner–weyl transform). this more algebraic approach not only permits ultimately extending probability distributions in phase space to wigner quasi-probability distributions, but, at the mere poisson bracket classical setting, also provides more power in helping analyze the relevant conserved quantities in a system.


== see also ==


== references ==


== further reading ==
landau, lev davidovich; lifshitz, evgenii mikhailovich (1976). mechanics. course of theoretical physics. vol. 1. sykes, j. b. (john bradbury), bell, j. s. (3rd ed.). oxford. isbn 0-08-021022-8. oclc 2591126.
abraham, r.; marsden, j.e. (1978). foundations of mechanics (2d ed., rev., enl., and reset ed.). reading, mass.: benjamin/cummings pub. co. isbn 0-8053-0102-x. oclc 3516353.
arnol'd, v. i.; kozlov, v. v.; neĩshtadt, a. i. (1988). "mathematical aspects of classical and celestial mechanics". encyclopaedia of mathematical sciences, dynamical systems iii. vol. 3. anosov, d. v. berlin: springer-verlag. isbn 0-387-17002-2. oclc 16404140.
arnol'd, v. i. (1989). mathematical methods of classical mechanics (2nd ed.). new york: springer-verlag. isbn 0-387-96890-3. oclc 18681352.
goldstein, herbert; poole, charles p. jr.; safko, john l. (2002). classical mechanics (3rd ed.). san francisco: addison wesley. isbn 0-201-31611-0. oclc 47056311.
vinogradov, a. m.; kupershmidt, b a (1977-08-31). "the structure of hamiltonian mechanics". russian mathematical surveys. 32 (4): 177–243. bibcode:1977rumas..32..177v. doi:10.1070/rm1977v032n04abeh001642. issn 0036-0279.


== external links ==
binney, james j., classical mechanics (lecture notes) (pdf), university of oxford, retrieved 27 october 2010
tong, david, classical dynamics (cambridge lecture notes), university of cambridge, retrieved 27 october 2010
hamilton, william rowan, on a general method in dynamics, trinity college dublin