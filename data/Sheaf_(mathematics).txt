in mathematics, a sheaf is a tool for systematically tracking data (such as sets, abelian groups, rings) attached to the open sets of a topological space and defined locally with regard to them. for example, for each open set, the data could be the ring of continuous functions defined on that open set. such data is well behaved in that it can be restricted to smaller open sets, and also the data assigned to an open set is equivalent to all collections of compatible data assigned to collections of smaller open sets covering the original open set. (intuitively, every piece of data is the sum of its parts.)
sheaves are understood conceptually as general and abstract objects.  their correct definition is rather technical. they are specifically defined as sheaves of sets or sheaves of rings, for example, depending on the type of data assigned to the open sets.
there are also maps (or morphisms) from one sheaf to another; sheaves (of a specific type, such as sheaves of abelian groups) with their morphisms on a fixed topological space from a category. on the other hand, to each continuous map there is associated both a direct image functor, taking sheaves and their morphisms on the domain to sheaves and morphisms on the codomain, and an inverse image functor operating in the opposite direction. these functors, and certain variants of them, are essential parts of sheaf theory.
due to their general nature and versatility, sheaves have several applications in topology and especially in algebraic and differential geometry. first, geometric structures such as that of a differentiable manifold or a scheme can be expressed in terms of a sheaf of rings on the space. in such contexts, several geometric constructions such as vector bundles or divisors are naturally specified in terms of sheaves. second, sheaves provide the framework for a very general cohomology theory, which encompasses also the "usual" topological cohomology theories such as singular cohomology. especially in algebraic geometry and the theory of complex manifolds, sheaf cohomology provides a powerful link between topological and geometric properties of spaces. sheaves also provide the basis for the theory of d-modules, which provide applications to the theory of differential equations. in addition, generalisations of sheaves to more general settings than topological spaces, such as grothendieck topology, have provided applications to mathematical logic and number theory.


== definitions and examples ==
in many mathematical branches, several structures defined on a topological space 
  
    
      
        x
      
    
    {\displaystyle x}
   (e.g., a differentiable manifold) can be naturally localised or restricted to open subsets 
  
    
      
        u
        ⊂
        x
      
    
    {\displaystyle u\subset x}
  : typical examples include continuous real-valued or complex-valued functions, 
  
    
      
        n
      
    
    {\displaystyle n}
   times differentiable (real-valued or complex-valued) functions, bounded real-valued functions, vector fields, and sections of any vector bundle on the space. the ability to restrict data to smaller open subsets gives rise to the concept of presheaves. roughly speaking, sheaves are then those presheaves, where local data can be glued to global data.


=== presheaves ===

let 
  
    
      
        x
      
    
    {\displaystyle x}
   be a topological space. a presheaf of sets 
  
    
      
        f
      
    
    {\displaystyle f}
   on 
  
    
      
        x
      
    
    {\displaystyle x}
   consists of the following data:

for each open set 
  
    
      
        u
      
    
    {\displaystyle u}
   of 
  
    
      
        x
      
    
    {\displaystyle x}
  , a set 
  
    
      
        f
        (
        u
        )
      
    
    {\displaystyle f(u)}
  . this set is also denoted 
  
    
      
        γ
        (
        u
        ,
        f
        )
      
    
    {\displaystyle \gamma (u,f)}
  . the elements in this set are called the sections of 
  
    
      
        f
      
    
    {\displaystyle f}
   over 
  
    
      
        u
      
    
    {\displaystyle u}
  .  the sections of 
  
    
      
        f
      
    
    {\displaystyle f}
   over 
  
    
      
        x
      
    
    {\displaystyle x}
   are called the global sections of 
  
    
      
        f
      
    
    {\displaystyle f}
  .
for each inclusion of open sets 
  
    
      
        v
        ⊆
        u
      
    
    {\displaystyle v\subseteq u}
  , a function 
  
    
      
        
          res
          
            v
            ,
            u
          
        
        :
        f
        (
        u
        )
        →
        f
        (
        v
        )
      
    
    {\displaystyle \operatorname {res} _{v,u}\colon f(u)\rightarrow f(v)}
  . in view of many of the examples below, the morphisms 
  
    
      
        
          
            res
          
          
            v
            ,
            u
          
        
      
    
    {\displaystyle {\text{res}}_{v,u}}
   are called restriction morphisms.  if 
  
    
      
        s
        ∈
        f
        (
        u
        )
      
    
    {\displaystyle s\in f(u)}
  , then its restriction 
  
    
      
        
          
            res
          
          
            v
            ,
            u
          
        
        (
        s
        )
      
    
    {\displaystyle {\text{res}}_{v,u}(s)}
   is often denoted 
  
    
      
        s
        
          
            |
          
          
            v
          
        
      
    
    {\displaystyle s|_{v}}
   by analogy with restriction of functions.the restriction morphisms are required to satisfy two additional (functorial) properties:

for every open set 
  
    
      
        u
      
    
    {\displaystyle u}
   of 
  
    
      
        x
      
    
    {\displaystyle x}
  , the restriction morphism 
  
    
      
        
          res
          
            u
            ,
            u
          
        
        :
        f
        (
        u
        )
        →
        f
        (
        u
        )
      
    
    {\displaystyle \operatorname {res} _{u,u}\colon f(u)\rightarrow f(u)}
   is the identity morphism on 
  
    
      
        f
        (
        u
        )
      
    
    {\displaystyle f(u)}
  .
if we have three open sets 
  
    
      
        w
        ⊆
        v
        ⊆
        u
      
    
    {\displaystyle w\subseteq v\subseteq u}
  , then the composite 
  
    
      
        
          
            res
          
          
            w
            ,
            v
          
        
        ∘
        
          
            res
          
          
            v
            ,
            u
          
        
        =
        
          
            res
          
          
            w
            ,
            u
          
        
      
    
    {\displaystyle {\text{res}}_{w,v}\circ {\text{res}}_{v,u}={\text{res}}_{w,u}}
  informally, the second axiom says it doesn't matter whether we restrict to w in one step or restrict first to v, then to w. a concise functorial reformulation of this definition is given further below.
many examples of presheaves come from different classes of functions: to any 
  
    
      
        u
      
    
    {\displaystyle u}
  , one can assign the set 
  
    
      
        
          c
          
            0
          
        
        (
        u
        )
      
    
    {\displaystyle c^{0}(u)}
   of continuous real-valued functions on 
  
    
      
        u
      
    
    {\displaystyle u}
  . the restriction maps are then just given by restricting a continuous function on 
  
    
      
        u
      
    
    {\displaystyle u}
   to a smaller open subset 
  
    
      
        v
      
    
    {\displaystyle v}
  , which again is a continuous function. the two presheaf axioms are immediately checked, thereby giving an example of a presheaf. this can be extended to a sheaf of holomorphic functions 
  
    
      
        
          
            h
          
        
        (
        −
        )
      
    
    {\displaystyle {\mathcal {h}}(-)}
   and a sheaf of smooth functions 
  
    
      
        
          c
          
            ∞
          
        
        (
        −
        )
      
    
    {\displaystyle c^{\infty }(-)}
  .
another common class of examples is assigning to 
  
    
      
        u
      
    
    {\displaystyle u}
   the set of constant real-valued functions on u. this presheaf is called the constant presheaf associated to 
  
    
      
        
          r
        
      
    
    {\displaystyle \mathbb {r} }
   and is denoted 
  
    
      
        
          
            
              
                r
              
              _
            
          
          
            p
            s
            h
          
        
      
    
    {\displaystyle {\underline {\mathbb {r} }}^{psh}}
  .


=== sheaves ===
given a presheaf, a natural question to ask is to what extent its sections over an open set 
  
    
      
        u
      
    
    {\displaystyle u}
   are specified by their restrictions to smaller open sets 
  
    
      
        
          u
          
            i
          
        
      
    
    {\displaystyle u_{i}}
   of an open cover 
  
    
      
        
          
            u
          
        
        =
        {
        
          u
          
            i
          
        
        
          }
          
            i
            ∈
            i
          
        
      
    
    {\displaystyle {\mathcal {u}}=\{u_{i}\}_{i\in i}}
   of 
  
    
      
        u
      
    
    {\displaystyle u}
  . a sheaf is a presheaf that satisfies both of the following two additional axioms:

(locality) suppose 
  
    
      
        u
      
    
    {\displaystyle u}
   is an open set, 
  
    
      
        {
        
          u
          
            i
          
        
        
          }
          
            i
            ∈
            i
          
        
      
    
    {\displaystyle \{u_{i}\}_{i\in i}}
   is an open cover of 
  
    
      
        u
      
    
    {\displaystyle u}
  , and 
  
    
      
        s
        ,
        t
        ∈
        f
        (
        u
        )
      
    
    {\displaystyle s,t\in f(u)}
   are sections.  if 
  
    
      
        s
        
          
            |
          
          
            
              u
              
                i
              
            
          
        
        =
        t
        
          
            |
          
          
            
              u
              
                i
              
            
          
        
      
    
    {\displaystyle s|_{u_{i}}=t|_{u_{i}}}
   for all 
  
    
      
        i
        ∈
        i
      
    
    {\displaystyle i\in i}
  , then 
  
    
      
        s
        =
        t
      
    
    {\displaystyle s=t}
  .
(gluing) suppose 
  
    
      
        u
      
    
    {\displaystyle u}
   is an open set, 
  
    
      
        {
        
          u
          
            i
          
        
        
          }
          
            i
            ∈
            i
          
        
      
    
    {\displaystyle \{u_{i}\}_{i\in i}}
   is an open cover of 
  
    
      
        u
      
    
    {\displaystyle u}
  , and 
  
    
      
        {
        
          s
          
            i
          
        
        ∈
        f
        (
        
          u
          
            i
          
        
        )
        
          }
          
            i
            ∈
            i
          
        
      
    
    {\displaystyle \{s_{i}\in f(u_{i})\}_{i\in i}}
   is a family of sections.  if all pairs of sections agree on the overlap of their domains, that is, if 
  
    
      
        
          s
          
            i
          
        
        
          
            |
          
          
            
              u
              
                i
              
            
            ∩
            
              u
              
                j
              
            
          
        
        =
        
          s
          
            j
          
        
        
          
            |
          
          
            
              u
              
                i
              
            
            ∩
            
              u
              
                j
              
            
          
        
      
    
    {\displaystyle s_{i}|_{u_{i}\cap u_{j}}=s_{j}|_{u_{i}\cap u_{j}}}
   for all 
  
    
      
        i
        ,
        j
        ∈
        i
      
    
    {\displaystyle i,j\in i}
  , then there exists a section 
  
    
      
        s
        ∈
        f
        (
        u
        )
      
    
    {\displaystyle s\in f(u)}
   such that 
  
    
      
        s
        
          
            |
          
          
            
              u
              
                i
              
            
          
        
        =
        
          s
          
            i
          
        
      
    
    {\displaystyle s|_{u_{i}}=s_{i}}
   for all 
  
    
      
        i
        ∈
        i
      
    
    {\displaystyle i\in i}
  .the section 
  
    
      
        s
      
    
    {\displaystyle s}
   whose existence is guaranteed by axiom 2 is called the gluing, concatenation, or collation of the sections si. by axiom 1 it is unique. sections 
  
    
      
        
          s
          
            i
          
        
      
    
    {\displaystyle s_{i}}
   and 
  
    
      
        
          s
          
            j
          
        
      
    
    {\displaystyle s_{j}}
   satisfying the agreement precondition of axiom 2 are often called compatible; thus axioms 1 and 2 together state that any collection of pairwise compatible sections can be uniquely glued together. a separated presheaf, or monopresheaf, is a presheaf satisfying axiom 1.the presheaf consisting of continuous functions mentioned above is a sheaf. this assertion reduces to checking that, given continuous functions 
  
    
      
        
          f
          
            i
          
        
        :
        
          u
          
            i
          
        
        →
        
          r
        
      
    
    {\displaystyle f_{i}:u_{i}\to \mathbf {r} }
   which agree on the intersections 
  
    
      
        
          u
          
            i
          
        
        ∩
        
          u
          
            j
          
        
      
    
    {\displaystyle u_{i}\cap u_{j}}
  , there is a unique continuous function 
  
    
      
        f
        :
        u
        →
        
          r
        
      
    
    {\displaystyle f:u\to \mathbf {r} }
   whose restriction equals the 
  
    
      
        
          f
          
            i
          
        
      
    
    {\displaystyle f_{i}}
  . by contrast, the constant presheaf is usually not a sheaf: if 
  
    
      
        u
        =
        
          u
          
            1
          
        
        ⊔
        
          u
          
            2
          
        
      
    
    {\displaystyle u=u_{1}\sqcup u_{2}}
   is a disjoint union of two open subsets, and 
  
    
      
        
          f
          
            1
          
        
        ,
        
          f
          
            2
          
        
      
    
    {\displaystyle f_{1},f_{2}}
   take different values, then there is no constant function on u whose restriction would equal these two (different) constant functions.
presheaves and sheaves are typically denoted by capital letters, f being particularly common, presumably for the french word for sheaf, faisceau. use of calligraphic letters such as 
  
    
      
        
          
            f
          
        
      
    
    {\displaystyle {\mathcal {f}}}
   is also common.
it can be shown that to specify a sheaf, it is enough to specify its restriction to the open sets of a basis for the topology of the underlying space. moreover, it can also be shown that it is enough to verify the sheaf axioms above relative to the open sets of a covering. this observation is used to construct another example which is crucial in algebraic geometry, namely quasi-coherent sheaves. here the topological space in question is the spectrum of a commutative ring r, whose points are the prime ideals p in r. the open sets 
  
    
      
        
          d
          
            f
          
        
        :=
        {
        p
        ⊂
        r
        ,
        f
        ∉
        p
        }
      
    
    {\displaystyle d_{f}:=\{p\subset r,f\notin p\}}
   form a basis for the zariski topology on this space. given an r-module m, there is a sheaf, denoted by 
  
    
      
        
          
            
              m
              ~
            
          
        
      
    
    {\displaystyle {\tilde {m}}}
   on the spec r, that satisfies

  
    
      
        
          
            
              m
              ~
            
          
        
        (
        
          d
          
            f
          
        
        )
        :=
        m
        [
        1
        
          /
        
        f
        ]
        ,
      
    
    {\displaystyle {\tilde {m}}(d_{f}):=m[1/f],}
   the localization of m at f.


=== further examples ===


==== sheaf of sections of a continuous map ====
any continuous map 
  
    
      
        f
        :
        y
        →
        x
      
    
    {\displaystyle f:y\to x}
   of topological spaces determines a sheaf 
  
    
      
        γ
        (
        y
        
          /
        
        x
        )
      
    
    {\displaystyle \gamma (y/x)}
   on 
  
    
      
        x
      
    
    {\displaystyle x}
   by setting

  
    
      
        γ
        (
        y
        
          /
        
        x
        )
        (
        u
        )
        =
        {
        s
        :
        u
        →
        y
        ,
        f
        ∘
        s
        =
        
          id
          
            u
          
        
        }
        .
      
    
    {\displaystyle \gamma (y/x)(u)=\{s:u\to y,f\circ s=\operatorname {id} _{u}\}.}
  any such 
  
    
      
        s
      
    
    {\displaystyle s}
   is commonly called a section of 
  
    
      
        f
      
    
    {\displaystyle f}
  , and this example is the reason why the elements in 
  
    
      
        f
        (
        u
        )
      
    
    {\displaystyle f(u)}
   are generally called sections. this construction is especially important when 
  
    
      
        f
      
    
    {\displaystyle f}
   is the projection of a fiber bundle onto its base space. for example, the sheaves of smooth functions are the sections of the trivial bundle. another example: the sheaf of sections of

  
    
      
        
          c
        
        
          
            
              
                →
              
              
                exp
              
            
          
        
        
          c
        
        ∖
        {
        0
        }
      
    
    {\displaystyle \mathbf {c} {\stackrel {\exp }{\to }}\mathbf {c} \setminus \{0\}}
  is the sheaf which assigns to any 
  
    
      
        u
      
    
    {\displaystyle u}
   the set of branches of the complex logarithm on 
  
    
      
        u
      
    
    {\displaystyle u}
  .
given a point x and an abelian group s, the skyscraper sheaf sx defined as follows: if u is an open set containing x, then sx(u) = s.  if u does not contain x, then sx(u) = 0, the trivial group.  the restriction maps are either the identity on s, if both open sets contain x, or the zero map otherwise.


==== sheaves on manifolds ====
on an n-dimensional 
  
    
      
        
          c
          
            k
          
        
      
    
    {\displaystyle c^{k}}
  -manifold m, there is a number of important sheaves, such as the sheaf of j-times continuously differentiable functions 
  
    
      
        
          
            
              o
            
          
          
            m
          
          
            j
          
        
      
    
    {\displaystyle {\mathcal {o}}_{m}^{j}}
   (with 
  
    
      
        j
        ≤
        k
      
    
    {\displaystyle j\leq k}
  ). its sections on some open 
  
    
      
        u
      
    
    {\displaystyle u}
   are the 
  
    
      
        
          c
          
            j
          
        
      
    
    {\displaystyle c^{j}}
  -functions 
  
    
      
        u
        →
        
          r
        
      
    
    {\displaystyle u\to \mathbf {r} }
  . for 
  
    
      
        j
        =
        k
      
    
    {\displaystyle j=k}
  , this sheaf is called the structure sheaf and is denoted 
  
    
      
        
          
            
              o
            
          
          
            m
          
        
      
    
    {\displaystyle {\mathcal {o}}_{m}}
  . the nonzero 
  
    
      
        
          c
          
            k
          
        
      
    
    {\displaystyle c^{k}}
   functions also form a sheaf, denoted 
  
    
      
        
          
            
              o
            
          
          
            x
          
          
            ×
          
        
      
    
    {\displaystyle {\mathcal {o}}_{x}^{\times }}
  . differential forms (of degree p) also form a sheaf 
  
    
      
        
          ω
          
            m
          
          
            p
          
        
      
    
    {\displaystyle \omega _{m}^{p}}
  . in all these examples, the restriction morphisms are given by restricting functions or forms.
the assignment sending 
  
    
      
        u
      
    
    {\displaystyle u}
   to the compactly supported functions on 
  
    
      
        u
      
    
    {\displaystyle u}
   is not a sheaf, since there is, in general, no way to preserve this property by passing to a smaller open subset. instead, this forms a cosheaf, a dual concept where the restriction maps go in the opposite direction than with sheaves. however, taking the dual of these vector spaces does give a sheaf, the sheaf of distributions.


==== presheaves that are not sheaves ====
in addition to the constant presheaf mentioned above, which is usually not a sheaf, there are further examples of presheaves that are not sheaves:

let 
  
    
      
        x
      
    
    {\displaystyle x}
   be the two-point topological space 
  
    
      
        {
        x
        ,
        y
        }
      
    
    {\displaystyle \{x,y\}}
   with the discrete topology.  define a presheaf 
  
    
      
        f
      
    
    {\displaystyle f}
   as follows: the restriction map 
  
    
      
        f
        (
        {
        x
        ,
        y
        }
        )
        →
        f
        (
        {
        x
        }
        )
      
    
    {\displaystyle f(\{x,y\})\to f(\{x\})}
   is the projection of 
  
    
      
        
          r
        
        ×
        
          r
        
        ×
        
          r
        
      
    
    {\displaystyle \mathbf {r} \times \mathbf {r} \times \mathbf {r} }
   onto its first coordinate, and the restriction map 
  
    
      
        f
        (
        {
        x
        ,
        y
        }
        )
        →
        f
        (
        {
        y
        }
        )
      
    
    {\displaystyle f(\{x,y\})\to f(\{y\})}
   is the projection of 
  
    
      
        
          r
        
        ×
        
          r
        
        ×
        
          r
        
      
    
    {\displaystyle \mathbf {r} \times \mathbf {r} \times \mathbf {r} }
   onto its second coordinate. 
  
    
      
        f
      
    
    {\displaystyle f}
   is a presheaf that is not separated: a global section is determined by three numbers, but the values of that section over {x} and {y} determine only two of those numbers.  so while we can glue any two sections over {x} and {y}, we cannot glue them uniquely.
let 
  
    
      
        x
        =
        
          r
        
      
    
    {\displaystyle x=\mathbf {r} }
   be the real line, and let 
  
    
      
        f
        (
        u
        )
      
    
    {\displaystyle f(u)}
   be the set of bounded continuous functions on 
  
    
      
        u
      
    
    {\displaystyle u}
  .  this is not a sheaf because it is not always possible to glue.  for example, let ui be the set of all x such that |x| < i.  the identity function f(x) = x is bounded on each ui.  consequently we get a section si on ui.  however, these sections do not glue, because the function f is not bounded on the real line.  consequently f is a presheaf, but not a sheaf.  in fact, f is separated because it is a sub-presheaf of the sheaf of continuous functions.


=== motivating sheaves from complex analytic spaces and algebraic geometry ===
one of the historical motivations for sheaves have come from studying complex manifolds, complex analytic geometry, and scheme theory from algebraic geometry. this is because in all of the previous cases, we consider a topological space 
  
    
      
        x
      
    
    {\displaystyle x}
   together with a structure sheaf 
  
    
      
        
          
            o
          
        
      
    
    {\displaystyle {\mathcal {o}}}
   giving it the structure of a complex manifold, complex analytic space, or scheme. this perspective of equipping a topological space with a sheaf is essential to the theory of locally ringed spaces (see below).


==== technical challenges with complex manifolds ====
one of the main historical motivations for introducing sheaves was constructing a device which keeps track of holomorphic functions on complex manifolds. for example, on a compact complex manifold 
  
    
      
        x
      
    
    {\displaystyle x}
   (like complex projective space or the vanishing locus of a homogeneous polynomial), the only holomorphic functions
  
    
      
        f
        :
        x
        →
        
          c
        
      
    
    {\displaystyle f:x\to \mathbf {c} }
  are the constant functions. this means there could exist two compact complex manifolds 
  
    
      
        x
        ,
        
          x
          ′
        
      
    
    {\displaystyle x,x'}
   which are not isomorphic, but nevertheless their ring of global holomorphic functions, denoted 
  
    
      
        
          
            h
          
        
        (
        x
        )
        ,
        
          
            h
          
        
        (
        
          x
          ′
        
        )
      
    
    {\displaystyle {\mathcal {h}}(x),{\mathcal {h}}(x')}
  , are isomorphic. contrast this with smooth manifolds where every manifold 
  
    
      
        m
      
    
    {\displaystyle m}
   can be embedded inside some 
  
    
      
        
          
            r
          
          
            n
          
        
      
    
    {\displaystyle \mathbf {r} ^{n}}
  , hence its ring of smooth functions 
  
    
      
        
          c
          
            ∞
          
        
        (
        m
        )
      
    
    {\displaystyle c^{\infty }(m)}
   comes from restricting the smooth functions from 
  
    
      
        
          c
          
            ∞
          
        
        (
        
          
            r
          
          
            n
          
        
        )
      
    
    {\displaystyle c^{\infty }(\mathbf {r} ^{n})}
  . another complexity when considering the ring of holomorphic functions on a complex manifold 
  
    
      
        x
      
    
    {\displaystyle x}
   is given a small enough open set 
  
    
      
        u
        ⊂
        x
      
    
    {\displaystyle u\subset x}
  , the holomorphic functions will be isomorphic to 
  
    
      
        
          
            h
          
        
        (
        u
        )
        ≅
        
          
            h
          
        
        (
        
          
            c
          
          
            n
          
        
        )
      
    
    {\displaystyle {\mathcal {h}}(u)\cong {\mathcal {h}}(\mathbf {c} ^{n})}
  . sheaves are a direct tool for dealing with this complexity since they make it possible to keep track of the holomorphic structure on the underlying topological space of 
  
    
      
        x
      
    
    {\displaystyle x}
   on arbitrary open subsets 
  
    
      
        u
        ⊂
        x
      
    
    {\displaystyle u\subset x}
  . this means as 
  
    
      
        u
      
    
    {\displaystyle u}
   becomes more complex topologically, the ring 
  
    
      
        
          
            h
          
        
        (
        u
        )
      
    
    {\displaystyle {\mathcal {h}}(u)}
   can be expressed from gluing the 
  
    
      
        
          
            h
          
        
        (
        
          u
          
            i
          
        
        )
      
    
    {\displaystyle {\mathcal {h}}(u_{i})}
  . note that sometimes this sheaf is denoted 
  
    
      
        
          
            o
          
        
        (
        −
        )
      
    
    {\displaystyle {\mathcal {o}}(-)}
   or just 
  
    
      
        
          
            o
          
        
      
    
    {\displaystyle {\mathcal {o}}}
  , or even 
  
    
      
        
          
            
              o
            
          
          
            x
          
        
      
    
    {\displaystyle {\mathcal {o}}_{x}}
   when we want to emphasize the space the structure sheaf is associated to.


==== tracking submanifolds with sheaves ====
another common example of sheaves can be constructed by considering a complex submanifold 
  
    
      
        y
        ↪
        x
      
    
    {\displaystyle y\hookrightarrow x}
  . there is an associated sheaf 
  
    
      
        
          
            
              o
            
          
          
            y
          
        
      
    
    {\displaystyle {\mathcal {o}}_{y}}
   which takes an open subset 
  
    
      
        u
        ⊂
        x
      
    
    {\displaystyle u\subset x}
   and gives the ring of holomorphic functions on 
  
    
      
        u
        ∩
        y
      
    
    {\displaystyle u\cap y}
  . this kind of formalism was found to be extremely powerful and motivates a lot of homological algebra such as sheaf cohomology since an intersection theory can be built using these kinds of sheaves from the serre intersection formula.


== operations with sheaves ==


=== morphisms ===
morphisms of sheaves are, roughly speaking, analogous to functions between them. in contrast to a function between sets, which have no additional structure, morphisms of sheaves are those functions which preserve the structure inherent in the sheaves. this idea is made precise in the following definition.
let f and g be two sheaves on x.  a morphism 
  
    
      
        φ
        :
        g
        →
        f
      
    
    {\displaystyle \varphi :g\to f}
   consists of a morphism 
  
    
      
        
          φ
          
            u
          
        
        :
        g
        (
        u
        )
        →
        f
        (
        u
        )
      
    
    {\displaystyle \varphi _{u}:g(u)\to f(u)}
   for each open set u of x, subject to the condition that this morphism is compatible with restrictions.  in other words, for every open subset v of an open set u, the following diagram is commutative.

  
    
      
        
          
            
              
                g
                (
                u
                )
              
              
                
                  
                    →
                    
                      
                      
                        φ
                        
                          u
                        
                      
                      
                    
                  
                
              
              
                f
                (
                u
                )
              
            
            
              
                
                  r
                  
                    v
                    ,
                    u
                  
                
                
                  
                    ↓
                  
                
              
              
              
                
                  
                    ↓
                  
                
                
                  r
                  
                    v
                    ,
                    u
                  
                
              
            
            
              
                g
                (
                v
                )
              
              
                
                  
                    →
                    
                      
                        
                        
                          φ
                          
                            v
                          
                        
                        
                      
                    
                    
                  
                
              
              
                f
                (
                v
                )
              
            
          
        
      
    
    {\displaystyle {\begin{array}{rcl}g(u)&{\xrightarrow {\quad \varphi _{u}\quad }}&f(u)\\r_{v,u}{\biggl \downarrow }&&{\biggl \downarrow }r_{v,u}\\g(v)&{\xrightarrow[{\quad \varphi _{v}\quad }]{}}&f(v)\end{array}}}
  for example, taking the derivative gives a morphism of sheaves on r:

  
    
      
        
          
            
              o
            
          
          
            
              r
            
          
          
            n
          
        
        →
        
          
            
              o
            
          
          
            
              r
            
          
          
            n
            −
            1
          
        
        .
      
    
    {\displaystyle {\mathcal {o}}_{\mathbf {r} }^{n}\to {\mathcal {o}}_{\mathbf {r} }^{n-1}.}
  
indeed, given an (n-times continuously differentiable) function 
  
    
      
        f
        :
        u
        →
        
          r
        
      
    
    {\displaystyle f:u\to \mathbf {r} }
   (with u in r open), the restriction (to a smaller open subset v) of its derivative equals the derivative of 
  
    
      
        f
        
          
            |
          
          
            v
          
        
      
    
    {\displaystyle f|_{v}}
  .
with this notion of morphism, sheaves on a fixed topological space x form a category. the general categorical notions of mono-, epi- and isomorphisms can therefore be applied to sheaves. a sheaf morphism 
  
    
      
        φ
      
    
    {\displaystyle \varphi }
   is an isomorphism (resp. monomorphism) if and only if each 
  
    
      
        
          φ
          
            u
          
        
      
    
    {\displaystyle \varphi _{u}}
   is a bijection (resp. injective map). moreover, a morphism of sheaves 
  
    
      
        φ
      
    
    {\displaystyle \varphi }
   is an isomorphism if and only if there exists an open cover 
  
    
      
        {
        
          u
          
            α
          
        
        }
      
    
    {\displaystyle \{u_{\alpha }\}}
   such that 
  
    
      
        φ
        
          
            |
          
          
            
              u
              
                α
              
            
          
        
      
    
    {\displaystyle \varphi |_{u_{\alpha }}}
   are isomorphisms of sheaves for all 
  
    
      
        α
      
    
    {\displaystyle \alpha }
  . this statement, which also holds for monomorphisms, but does not hold for presheaves, is another instance of the idea that sheaves are of a local nature.
the corresponding statements do not hold for epimorphisms (of sheaves), and their failure is measured by sheaf cohomology.


=== stalks of a sheaf ===

the stalk 
  
    
      
        
          
            
              f
            
          
          
            x
          
        
      
    
    {\displaystyle {\mathcal {f}}_{x}}
   of a sheaf 
  
    
      
        
          
            f
          
        
      
    
    {\displaystyle {\mathcal {f}}}
   captures the properties of a sheaf "around" a point x ∈ x, generalizing the germs of functions.
here, "around" means that, conceptually speaking, one looks at smaller and smaller neighborhoods of the point. of course, no single neighborhood will be small enough, which requires considering a limit of some sort. more precisely, the stalk is defined by

  
    
      
        
          
            
              f
            
          
          
            x
          
        
        =
        
          
            
              lim
              →
            
          
          
            u
            ∋
            x
          
        
        ⁡
        
          
            f
          
        
        (
        u
        )
        ,
      
    
    {\displaystyle {\mathcal {f}}_{x}=\varinjlim _{u\ni x}{\mathcal {f}}(u),}
  the direct limit being over all open subsets of x containing the given point x. in other words, an element of the stalk is given by a section over some open neighborhood of x, and two such sections are considered equivalent if their restrictions agree on a smaller neighborhood.
the natural morphism f(u) → fx takes a section s in f(u) to its germ at x.  this generalises the usual definition of a germ.
in many situations, knowing the stalks of a sheaf is enough to control the sheaf itself. for example, whether or not a morphism of sheaves is a monomorphism, epimorphism, or isomorphism can be tested on the stalks. in this sense, a sheaf is determined by its stalks, which are a local data. by contrast, the global information present in a sheaf, i.e., the global sections, i.e., the sections 
  
    
      
        
          
            f
          
        
        (
        x
        )
      
    
    {\displaystyle {\mathcal {f}}(x)}
   on the whole space x, typically carry less information. for example, for a compact complex manifold x, the global sections of the sheaf of holomorphic functions are just c, since any holomorphic function

  
    
      
        x
        →
        
          c
        
      
    
    {\displaystyle x\to \mathbf {c} }
  is constant by liouville's theorem.


=== turning a presheaf into a sheaf ===
it is frequently useful to take the data contained in a presheaf and to express it as a sheaf.  it turns out that there is a best possible way to do this.  it takes a presheaf f and produces a new sheaf af called the sheafification or sheaf associated to the presheaf f. for example, the sheafification of the constant presheaf (see above) is called the constant sheaf. despite its name, its sections are locally constant functions.
the sheaf af can be constructed using the étalé space of f, namely as the sheaf of sections of the map

  
    
      
        
          s
          p
          e
        
        (
        f
        )
        →
        x
        .
      
    
    {\displaystyle \mathrm {spe} (f)\to x.}
  another construction of the sheaf af proceeds by means of a functor l from presheaves to presheaves that gradually improves the properties of a presheaf: for any presheaf f, lf is a separated presheaf, and for any separated presheaf f, lf is a sheaf. the associated sheaf af is given by llf.the idea that the sheaf af is the best possible approximation to f by a sheaf is made precise using the following universal property: there is a natural morphism of presheaves 
  
    
      
        i
        :
        f
        →
        a
        f
      
    
    {\displaystyle i\colon f\to af}
   so that for any sheaf g and any morphism of presheaves 
  
    
      
        f
        :
        f
        →
        g
      
    
    {\displaystyle f\colon f\to g}
  , there is a unique morphism of sheaves 
  
    
      
        
          
            
              f
              ~
            
          
        
        :
        a
        f
        →
        g
      
    
    {\displaystyle {\tilde {f}}\colon af\rightarrow g}
   such that 
  
    
      
        f
        =
        
          
            
              f
              ~
            
          
        
        i
      
    
    {\displaystyle f={\tilde {f}}i}
  .  in fact a is the left adjoint functor to the inclusion functor (or forgetful functor) from the category of sheaves to the category of presheaves, and i is the unit of the adjunction. in this way, the category of  sheaves turns into a giraud subcategory of presheaves. this categorical situation is the reason why the sheafification functor appears in constructing cokernels of sheaf morphisms or tensor products of sheaves, but not for kernels, say.


=== subsheaves, quotient sheaves ===
if k is a subsheaf of a sheaf f of abelian groups, then the quotient sheaf q is the sheaf associated to the presheaf 
  
    
      
        u
        ↦
        f
        (
        u
        )
        
          /
        
        k
        (
        u
        )
      
    
    {\displaystyle u\mapsto f(u)/k(u)}
  ; in other words, the quotient sheaf fits into an exact sequence of sheaves of abelian groups;

  
    
      
        0
        →
        k
        →
        f
        →
        q
        →
        0.
      
    
    {\displaystyle 0\to k\to f\to q\to 0.}
  (this is also called a sheaf extension.)
let f, g be sheaves of abelian groups. the set 
  
    
      
        hom
        ⁡
        (
        f
        ,
        g
        )
      
    
    {\displaystyle \operatorname {hom} (f,g)}
   of morphisms of sheaves from f to g forms an abelian group (by the abelian group structure of g). the sheaf hom of f and g, denoted by,

  
    
      
        
          
            h
            o
            m
          
        
        (
        f
        ,
        g
        )
      
    
    {\displaystyle {\mathcal {hom}}(f,g)}
  is the sheaf of abelian groups 
  
    
      
        u
        ↦
        hom
        ⁡
        (
        f
        
          
            |
          
          
            u
          
        
        ,
        g
        
          
            |
          
          
            u
          
        
        )
      
    
    {\displaystyle u\mapsto \operatorname {hom} (f|_{u},g|_{u})}
   where 
  
    
      
        f
        
          
            |
          
          
            u
          
        
      
    
    {\displaystyle f|_{u}}
   is the sheaf on u given by 
  
    
      
        (
        f
        
          
            |
          
          
            u
          
        
        )
        (
        v
        )
        =
        f
        (
        v
        )
      
    
    {\displaystyle (f|_{u})(v)=f(v)}
   (note sheafification is not needed here). the direct sum of f and g is the sheaf given by 
  
    
      
        u
        ↦
        f
        (
        u
        )
        ⊕
        g
        (
        u
        )
      
    
    {\displaystyle u\mapsto f(u)\oplus g(u)}
  , and the tensor product of f and g is the sheaf associated to the presheaf 
  
    
      
        u
        ↦
        f
        (
        u
        )
        ⊗
        g
        (
        u
        )
      
    
    {\displaystyle u\mapsto f(u)\otimes g(u)}
  .
all of these operations extend to sheaves of modules over a sheaf of rings a; the above is the special case when a is the constant sheaf 
  
    
      
        
          
            
              z
            
            _
          
        
      
    
    {\displaystyle {\underline {\mathbf {z} }}}
  .


=== basic functoriality ===

since the data of a (pre-)sheaf depends on the open subsets of the base space, sheaves on different topological spaces are unrelated to each other in the sense that there are no morphisms between them. however, given a continuous map f : x → y between two topological spaces, pushforward and pullback relate sheaves on x to those on y and vice versa.


==== direct image ====
the pushforward (also known as direct image) of a sheaf 
  
    
      
        
          
            f
          
        
      
    
    {\displaystyle {\mathcal {f}}}
   on x is the sheaf defined by

  
    
      
        (
        
          f
          
            ∗
          
        
        
          
            f
          
        
        )
        (
        v
        )
        =
        
          
            f
          
        
        (
        
          f
          
            −
            1
          
        
        (
        v
        )
        )
        .
      
    
    {\displaystyle (f_{*}{\mathcal {f}})(v)={\mathcal {f}}(f^{-1}(v)).}
  here v is an open subset of y, so that its preimage is open in x by the continuity of f. 
this construction recovers the skyscraper sheaf 
  
    
      
        
          s
          
            x
          
        
      
    
    {\displaystyle s_{x}}
   mentioned above:

  
    
      
        
          s
          
            x
          
        
        =
        
          i
          
            ∗
          
        
        (
        s
        )
      
    
    {\displaystyle s_{x}=i_{*}(s)}
  where 
  
    
      
        i
        :
        {
        x
        }
        →
        x
      
    
    {\displaystyle i:\{x\}\to x}
   is the inclusion, and s is regarded as a sheaf on the singleton (by 
  
    
      
        s
        (
        {
        ∗
        }
        )
        =
        s
        ,
        s
        (
        ∅
        )
        =
        ∅
      
    
    {\displaystyle s(\{*\})=s,s(\emptyset )=\emptyset }
  .
for a map between locally compact spaces, the direct image with compact support is a subsheaf of the direct image. by definition, 
  
    
      
        (
        
          f
          
            !
          
        
        
          
            f
          
        
        )
        (
        v
        )
      
    
    {\displaystyle (f_{!}{\mathcal {f}})(v)}
   consists of those 
  
    
      
        f
        ∈
        
          
            f
          
        
        (
        
          f
          
            −
            1
          
        
        (
        v
        )
        )
      
    
    {\displaystyle f\in {\mathcal {f}}(f^{-1}(v))}
   whose support is proper map over v. if f is proper itself, then 
  
    
      
        
          f
          
            !
          
        
        
          
            f
          
        
        =
        
          f
          
            ∗
          
        
        
          
            f
          
        
      
    
    {\displaystyle f_{!}{\mathcal {f}}=f_{*}{\mathcal {f}}}
  , but in general they disagree.


==== inverse image ====
the pullback or inverse image goes the other way: it produces a sheaf on x, denoted 
  
    
      
        
          f
          
            −
            1
          
        
        
          
            g
          
        
      
    
    {\displaystyle f^{-1}{\mathcal {g}}}
   out of a sheaf 
  
    
      
        
          
            g
          
        
      
    
    {\displaystyle {\mathcal {g}}}
   on y. if f is the inclusion of an open subset, then the inverse image is just a restriction, i.e., it is given by 
  
    
      
        (
        
          f
          
            −
            1
          
        
        
          
            g
          
        
        )
        (
        u
        )
        =
        
          
            g
          
        
        (
        u
        )
      
    
    {\displaystyle (f^{-1}{\mathcal {g}})(u)={\mathcal {g}}(u)}
   for an open u in x. a sheaf f (on some space x) is called locally constant if 
  
    
      
        x
        =
        
          ⋃
          
            i
            ∈
            i
          
        
        
          u
          
            i
          
        
      
    
    {\displaystyle x=\bigcup _{i\in i}u_{i}}
   by some open subsets 
  
    
      
        
          u
          
            i
          
        
      
    
    {\displaystyle u_{i}}
   such that the restriction of f to all these open subsets is constant. one a wide range of topological spaces x, such sheaves are equivalent to representations of the fundamental group 
  
    
      
        
          π
          
            1
          
        
        (
        x
        )
      
    
    {\displaystyle \pi _{1}(x)}
  .
for general maps f, the definition of 
  
    
      
        
          f
          
            −
            1
          
        
        
          
            g
          
        
      
    
    {\displaystyle f^{-1}{\mathcal {g}}}
   is more involved; it is detailed at inverse image functor. the stalk is an essential special case of the pullback in view of a natural identification, where i is as above:

  
    
      
        
          
            
              g
            
          
          
            x
          
        
        =
        
          i
          
            −
            1
          
        
        
          
            g
          
        
        (
        {
        x
        }
        )
        .
      
    
    {\displaystyle {\mathcal {g}}_{x}=i^{-1}{\mathcal {g}}(\{x\}).}
  more generally, stalks satisfy 
  
    
      
        (
        
          f
          
            −
            1
          
        
        
          
            g
          
        
        
          )
          
            x
          
        
        =
        
          
            
              g
            
          
          
            f
            (
            x
            )
          
        
      
    
    {\displaystyle (f^{-1}{\mathcal {g}})_{x}={\mathcal {g}}_{f(x)}}
  .


==== extension by zero ====
for the inclusion 
  
    
      
        j
        :
        u
        →
        x
      
    
    {\displaystyle j:u\to x}
   of an open subset, the extension by zero of a sheaf of abelian groups on u is defined as 

  
    
      
        (
        
          j
          
            !
          
        
        
          
            f
          
        
        )
        (
        v
        )
        =
        
          
            f
          
        
        (
        v
        )
      
    
    {\displaystyle (j_{!}{\mathcal {f}})(v)={\mathcal {f}}(v)}
   if 
  
    
      
        v
        ⊂
        u
      
    
    {\displaystyle v\subset u}
   and 
  
    
      
        (
        
          j
          
            !
          
        
        
          
            f
          
        
        )
        (
        v
        )
        =
        0
      
    
    {\displaystyle (j_{!}{\mathcal {f}})(v)=0}
   otherwise.for a sheaf 
  
    
      
        
          
            g
          
        
      
    
    {\displaystyle {\mathcal {g}}}
   on x, this construction is in a sense complementary to 
  
    
      
        
          i
          
            ∗
          
        
      
    
    {\displaystyle i_{*}}
  , where 
  
    
      
        i
      
    
    {\displaystyle i}
   is the inclusion of the complement of u:

  
    
      
        (
        
          j
          
            !
          
        
        
          j
          
            ∗
          
        
        
          
            g
          
        
        
          )
          
            x
          
        
        =
        
          
            
              g
            
          
          
            x
          
        
      
    
    {\displaystyle (j_{!}j^{*}{\mathcal {g}})_{x}={\mathcal {g}}_{x}}
   for x in u, and the stalk is zero otherwise, while

  
    
      
        (
        
          i
          
            ∗
          
        
        
          i
          
            ∗
          
        
        
          
            g
          
        
        
          )
          
            x
          
        
        =
        0
      
    
    {\displaystyle (i_{*}i^{*}{\mathcal {g}})_{x}=0}
   for x in u, and equals 
  
    
      
        
          
            
              g
            
          
          
            x
          
        
      
    
    {\displaystyle {\mathcal {g}}_{x}}
   otherwise.these functors are therefore useful in reducing sheaf-theoretic questions on x to ones on the strata of a stratification, i.e., a decomposition of x into smaller, locally closed subsets.


== complements ==


=== sheaves in more general categories ===
in addition to (pre-)sheaves as introduced above, where 
  
    
      
        
          
            f
          
        
        (
        u
        )
      
    
    {\displaystyle {\mathcal {f}}(u)}
   is merely a set, it is in many cases important to keep track of additional structure on these sections. for example, the sections of the sheaf of continuous functions naturally form a real vector space, and restriction is a linear map between these vector spaces.
presheaves with values in an arbitrary category c are defined by first considering the category of open sets on x to be the posetal category o(x) whose objects are the open sets of x and whose morphisms are inclusions.  then a c-valued presheaf on x is the same as a contravariant functor from o(x) to c. morphisms in this category of functors, also known as natural transformations, are the same as the morphisms defined above, as can be seen by unraveling the definitions.
if the target category c admits all limits, a c-valued presheaf is a sheaf if the following diagram is an equalizer for every open cover

  
    
      
        
          
            u
          
        
        =
        {
        
          u
          
            i
          
        
        
          }
          
            i
            ∈
            i
          
        
      
    
    {\displaystyle {\mathcal {u}}=\{u_{i}\}_{i\in i}}
   of any open set 
  
    
      
        u
      
    
    {\displaystyle u}
  :

  
    
      
        f
        (
        u
        )
        →
        
          ∏
          
            i
          
        
        f
        (
        
          u
          
            i
          
        
        )
        
          
            
              
                

                
                ⟶
              
            
            
              
                ⟶
                

                
              
            
          
        
        
          ∏
          
            i
            ,
            j
          
        
        f
        (
        
          u
          
            i
          
        
        ∩
        
          u
          
            j
          
        
        )
        .
      
    
    {\displaystyle f(u)\rightarrow \prod _{i}f(u_{i}){{{} \atop \longrightarrow } \atop {\longrightarrow  \atop {}}}\prod _{i,j}f(u_{i}\cap u_{j}).}
  here the first map is the product of the restriction maps

  
    
      
        
          res
          
            
              u
              
                i
              
            
            ,
            u
          
        
        :
        f
        (
        u
        )
        →
        f
        (
        
          u
          
            i
          
        
        )
      
    
    {\displaystyle \operatorname {res} _{u_{i},u}\colon f(u)\rightarrow f(u_{i})}
  and the pair of arrows the products of the two sets of restrictions

  
    
      
        
          res
          
            
              u
              
                i
              
            
            ∩
            
              u
              
                j
              
            
            ,
            
              u
              
                i
              
            
          
        
        :
        f
        (
        
          u
          
            i
          
        
        )
        →
        f
        (
        
          u
          
            i
          
        
        ∩
        
          u
          
            j
          
        
        )
      
    
    {\displaystyle \operatorname {res} _{u_{i}\cap u_{j},u_{i}}\colon f(u_{i})\rightarrow f(u_{i}\cap u_{j})}
  and

  
    
      
        
          res
          
            
              u
              
                i
              
            
            ∩
            
              u
              
                j
              
            
            ,
            
              u
              
                j
              
            
          
        
        :
        f
        (
        
          u
          
            j
          
        
        )
        →
        f
        (
        
          u
          
            i
          
        
        ∩
        
          u
          
            j
          
        
        )
        .
      
    
    {\displaystyle \operatorname {res} _{u_{i}\cap u_{j},u_{j}}\colon f(u_{j})\rightarrow f(u_{i}\cap u_{j}).}
  if c is an abelian category, this condition can also be rephrased by requiring that there is an exact sequence

  
    
      
        0
        →
        f
        (
        u
        )
        →
        
          ∏
          
            i
          
        
        f
        (
        
          u
          
            i
          
        
        )
        
          →
          
            
              res
              
                
                  u
                  
                    i
                  
                
                ∩
                
                  u
                  
                    j
                  
                
                ,
                
                  u
                  
                    i
                  
                
              
            
            −
            
              res
              
                
                  u
                  
                    i
                  
                
                ∩
                
                  u
                  
                    j
                  
                
                ,
                
                  u
                  
                    j
                  
                
              
            
          
        
        
          ∏
          
            i
            ,
            j
          
        
        f
        (
        
          u
          
            i
          
        
        ∩
        
          u
          
            j
          
        
        )
        .
      
    
    {\displaystyle 0\to f(u)\to \prod _{i}f(u_{i})\xrightarrow {\operatorname {res} _{u_{i}\cap u_{j},u_{i}}-\operatorname {res} _{u_{i}\cap u_{j},u_{j}}} \prod _{i,j}f(u_{i}\cap u_{j}).}
  a particular case of this sheaf condition occurs for u being the empty set, and the index set i also being empty. in this case, the sheaf condition requires 
  
    
      
        
          
            f
          
        
        (
        ∅
        )
      
    
    {\displaystyle {\mathcal {f}}(\emptyset )}
   to be the terminal object in c.


=== ringed spaces and sheaves of modules ===

in several geometrical disciplines, including algebraic geometry and differential geometry, the spaces come along with a natural sheaf of rings, often called the structure sheaf and denoted by 
  
    
      
        
          
            
              o
            
          
          
            x
          
        
      
    
    {\displaystyle {\mathcal {o}}_{x}}
  . such a pair 
  
    
      
        (
        x
        ,
        
          
            
              o
            
          
          
            x
          
        
        )
      
    
    {\displaystyle (x,{\mathcal {o}}_{x})}
   is called a ringed space. many types of spaces can be defined as certain types of ringed spaces. commonly, all the stalks 
  
    
      
        
          
            
              o
            
          
          
            x
            ,
            x
          
        
      
    
    {\displaystyle {\mathcal {o}}_{x,x}}
   of the structure sheaf are local rings, in which case the pair is called a locally ringed space.
for example, an n-dimensional ck manifold m is a locally ringed space whose structure sheaf consists of 
  
    
      
        
          c
          
            k
          
        
      
    
    {\displaystyle c^{k}}
  -functions on the open subsets of m. the property of being a locally ringed space translates into the fact that such a function, which is nonzero at a point x, is also non-zero on a sufficiently small open neighborhood of x. some authors actually define real (or complex) manifolds to be locally ringed spaces that are locally isomorphic to the pair consisting of an open subset of 
  
    
      
        
          
            r
          
          
            n
          
        
      
    
    {\displaystyle \mathbf {r} ^{n}}
   (resp. 
  
    
      
        
          
            c
          
          
            n
          
        
      
    
    {\displaystyle \mathbf {c} ^{n}}
  ) together with the sheaf of ck (resp. holomorphic) functions. similarly, schemes, the foundational notion of spaces in algebraic geometry, are locally ringed spaces that are locally isomorphic to the spectrum of a ring.
given a ringed space, a sheaf of modules is a sheaf 
  
    
      
        
          
            m
          
        
      
    
    {\displaystyle {\mathcal {m}}}
   such that on every open set u of x, 
  
    
      
        
          
            m
          
        
        (
        u
        )
      
    
    {\displaystyle {\mathcal {m}}(u)}
   is an 
  
    
      
        
          
            
              o
            
          
          
            x
          
        
        (
        u
        )
      
    
    {\displaystyle {\mathcal {o}}_{x}(u)}
  -module and for every inclusion of open sets v ⊆ u, the restriction map 
  
    
      
        
          
            m
          
        
        (
        u
        )
        →
        
          
            m
          
        
        (
        v
        )
      
    
    {\displaystyle {\mathcal {m}}(u)\to {\mathcal {m}}(v)}
   is compatible with the restriction map o(u) → o(v): the restriction of fs is the restriction of f times that of s for any f in o(u) and s in f(u).
most important geometric objects are sheaves of modules. for example, there is a one-to-one correspondence between vector bundles and locally free sheaves of 
  
    
      
        
          
            
              o
            
          
          
            x
          
        
      
    
    {\displaystyle {\mathcal {o}}_{x}}
  -modules. this paradigm applies to real vector bundles, complex vector bundles, or vector bundles in algebraic geometry (where 
  
    
      
        
          
            o
          
        
      
    
    {\displaystyle {\mathcal {o}}}
   consists of smooth functions, holomorphic functions, or regular functions, respectively). sheaves of solutions to differential equations are d-modules, that is, modules over the sheaf of differential operators. on any topological space, modules over the constant sheaf 
  
    
      
        
          
            
              z
            
            _
          
        
      
    
    {\displaystyle {\underline {\mathbf {z} }}}
   are the same as sheaves of abelian groups in the sense above.
there is a different inverse image functor for sheaves of modules over sheaves of rings.  this functor is usually denoted 
  
    
      
        
          f
          
            ∗
          
        
      
    
    {\displaystyle f^{*}}
   and it is distinct from 
  
    
      
        
          f
          
            −
            1
          
        
      
    
    {\displaystyle f^{-1}}
  .  see inverse image functor.


==== finiteness conditions for sheaves of modules ====
finiteness conditions for module over commutative rings give rise to similar finiteness conditions for sheaves of modules: 
  
    
      
        
          
            m
          
        
      
    
    {\displaystyle {\mathcal {m}}}
   is called finitely generated (resp. finitely presented) if, for every point x of x, there exists an open neighborhood u of x, a natural number n (possibly depending on u), and a surjective morphism of sheaves 
  
    
      
        
          
            
              o
            
          
          
            x
          
          
            n
          
        
        
          
            |
          
          
            u
          
        
        →
        
          
            m
          
        
        
          
            |
          
          
            u
          
        
      
    
    {\displaystyle {\mathcal {o}}_{x}^{n}|_{u}\to {\mathcal {m}}|_{u}}
   (respectively, in addition a natural number m, and an exact sequence 
  
    
      
        
          
            
              o
            
          
          
            x
          
          
            m
          
        
        
          
            |
          
          
            u
          
        
        →
        
          
            
              o
            
          
          
            x
          
          
            n
          
        
        
          
            |
          
          
            u
          
        
        →
        
          
            m
          
        
        
          
            |
          
          
            u
          
        
        →
        0
      
    
    {\displaystyle {\mathcal {o}}_{x}^{m}|_{u}\to {\mathcal {o}}_{x}^{n}|_{u}\to {\mathcal {m}}|_{u}\to 0}
  .) paralleling the notion of a coherent module, 
  
    
      
        
          
            m
          
        
      
    
    {\displaystyle {\mathcal {m}}}
   is called a coherent sheaf if it is of finite type and if, for every open set u and every morphism of sheaves 
  
    
      
        ϕ
        :
        
          
            
              o
            
          
          
            x
          
          
            n
          
        
        →
        
          
            m
          
        
      
    
    {\displaystyle \phi :{\mathcal {o}}_{x}^{n}\to {\mathcal {m}}}
   (not necessarily surjective), the kernel of φ is of finite type. 
  
    
      
        
          
            
              o
            
          
          
            x
          
        
      
    
    {\displaystyle {\mathcal {o}}_{x}}
   is coherent if it is coherent as a module over itself. like for modules, coherence is in general a strictly stronger condition than finite presentation. the oka coherence theorem states that the sheaf of holomorphic functions on a complex manifold is coherent.


=== the étalé space of a sheaf ===

in the examples above it was noted that some sheaves occur naturally as sheaves of sections.  in fact, all sheaves of sets can be represented as sheaves of sections of a topological space called the étalé space, from the french word étalé [etale], meaning roughly "spread out". if 
  
    
      
        f
        ∈
        
          sh
        
        (
        x
        )
      
    
    {\displaystyle f\in {\text{sh}}(x)}
   is a sheaf over 
  
    
      
        x
      
    
    {\displaystyle x}
  , then the étalé space of 
  
    
      
        f
      
    
    {\displaystyle f}
   is a topological space 
  
    
      
        e
      
    
    {\displaystyle e}
   together with a local homeomorphism 
  
    
      
        π
        :
        e
        →
        x
      
    
    {\displaystyle \pi :e\to x}
   such that the sheaf of sections 
  
    
      
        γ
        (
        π
        ,
        −
        )
      
    
    {\displaystyle \gamma (\pi ,-)}
   of 
  
    
      
        π
      
    
    {\displaystyle \pi }
   is 
  
    
      
        f
      
    
    {\displaystyle f}
  . the space 
  
    
      
        e
      
    
    {\displaystyle e}
   is usually very strange, and even if the sheaf 
  
    
      
        f
      
    
    {\displaystyle f}
   arises from a natural topological situation, 
  
    
      
        e
      
    
    {\displaystyle e}
   may not have any clear topological interpretation. for example, if 
  
    
      
        f
      
    
    {\displaystyle f}
   is the sheaf of sections of a continuous function 
  
    
      
        f
        :
        y
        →
        x
      
    
    {\displaystyle f:y\to x}
  , then 
  
    
      
        e
        =
        y
      
    
    {\displaystyle e=y}
   if and only if 
  
    
      
        f
      
    
    {\displaystyle f}
   is a local homeomorphism.
the étalé space 
  
    
      
        e
      
    
    {\displaystyle e}
   is constructed from the stalks of 
  
    
      
        f
      
    
    {\displaystyle f}
   over 
  
    
      
        x
      
    
    {\displaystyle x}
  . as a set, it is their disjoint union and 
  
    
      
        π
      
    
    {\displaystyle \pi }
   is the obvious map that takes the value 
  
    
      
        x
      
    
    {\displaystyle x}
   on the stalk of 
  
    
      
        f
      
    
    {\displaystyle f}
   over 
  
    
      
        x
        ∈
        x
      
    
    {\displaystyle x\in x}
  .  the topology of 
  
    
      
        e
      
    
    {\displaystyle e}
   is defined as follows. for each element 
  
    
      
        s
        ∈
        f
        (
        u
        )
      
    
    {\displaystyle s\in f(u)}
   and each 
  
    
      
        x
        ∈
        u
      
    
    {\displaystyle x\in u}
  , we get a germ of 
  
    
      
        s
      
    
    {\displaystyle s}
   at 
  
    
      
        x
      
    
    {\displaystyle x}
  , denoted 
  
    
      
        [
        s
        
          ]
          
            x
          
        
      
    
    {\displaystyle [s]_{x}}
   or 
  
    
      
        
          s
          
            x
          
        
      
    
    {\displaystyle s_{x}}
  .  these germs determine points of 
  
    
      
        e
      
    
    {\displaystyle e}
  .  for any 
  
    
      
        u
      
    
    {\displaystyle u}
   and 
  
    
      
        s
        ∈
        f
        (
        u
        )
      
    
    {\displaystyle s\in f(u)}
  , the union of these points (for all 
  
    
      
        x
        ∈
        u
      
    
    {\displaystyle x\in u}
  ) is declared to be open in 
  
    
      
        e
      
    
    {\displaystyle e}
  . notice that each stalk has the discrete topology as subspace topology. two morphisms between sheaves determine a continuous map of the corresponding étalé spaces that is compatible with the projection maps (in the sense that every germ is mapped to a germ over the same point). this makes the construction into a functor.
the construction above determines an equivalence of categories between the category of sheaves of sets on 
  
    
      
        x
      
    
    {\displaystyle x}
   and the category of étalé spaces over 
  
    
      
        x
      
    
    {\displaystyle x}
  . the construction of an étalé space can also be applied to a presheaf, in which case the sheaf of sections of the étalé space recovers the sheaf associated to the given presheaf.

this construction makes all sheaves into representable functors on certain categories of topological spaces. as above, let 
  
    
      
        f
      
    
    {\displaystyle f}
   be a sheaf on 
  
    
      
        x
      
    
    {\displaystyle x}
  , let 
  
    
      
        e
      
    
    {\displaystyle e}
   be its étalé space, and let 
  
    
      
        π
        :
        e
        →
        x
      
    
    {\displaystyle \pi :e\to x}
   be the natural projection. consider the overcategory 
  
    
      
        
          top
        
        
          /
        
        x
      
    
    {\displaystyle {\text{top}}/x}
   of topological spaces over 
  
    
      
        x
      
    
    {\displaystyle x}
  , that is, the category of topological spaces together with fixed continuous maps to 
  
    
      
        x
      
    
    {\displaystyle x}
  . every object of this category is a continuous map 
  
    
      
        f
        :
        y
        →
        x
      
    
    {\displaystyle f:y\to x}
  , and a morphism from 
  
    
      
        y
        →
        x
      
    
    {\displaystyle y\to x}
   to 
  
    
      
        z
        →
        x
      
    
    {\displaystyle z\to x}
   is a continuous map 
  
    
      
        y
        →
        z
      
    
    {\displaystyle y\to z}
   that commutes with the two maps to 
  
    
      
        x
      
    
    {\displaystyle x}
  . there is a functor
  
    
      
        γ
        :
        
          top
        
        
          /
        
        x
        →
        
          sets
        
      
    
    {\displaystyle \gamma :{\text{top}}/x\to {\text{sets}}}
  sending an object 
  
    
      
        f
        :
        y
        →
        x
      
    
    {\displaystyle f:y\to x}
   to 
  
    
      
        
          f
          
            −
            1
          
        
        f
        (
        y
        )
      
    
    {\displaystyle f^{-1}f(y)}
  . for example, if 
  
    
      
        i
        :
        u
        ↪
        x
      
    
    {\displaystyle i:u\hookrightarrow x}
   is the inclusion of an open subset, then
  
    
      
        γ
        (
        i
        )
        =
        
          f
          
            −
            1
          
        
        f
        (
        u
        )
        =
        f
        (
        u
        )
        =
        γ
        (
        f
        ,
        u
        )
      
    
    {\displaystyle \gamma (i)=f^{-1}f(u)=f(u)=\gamma (f,u)}
  and for the inclusion of a point 
  
    
      
        i
        :
        {
        x
        }
        ↪
        x
      
    
    {\displaystyle i:\{x\}\hookrightarrow x}
  , then
  
    
      
        γ
        (
        i
        )
        =
        
          f
          
            −
            1
          
        
        f
        (
        {
        x
        }
        )
        =
        f
        
          
            |
          
          
            x
          
        
      
    
    {\displaystyle \gamma (i)=f^{-1}f(\{x\})=f|_{x}}
  is the stalk of 
  
    
      
        f
      
    
    {\displaystyle f}
   at 
  
    
      
        x
      
    
    {\displaystyle x}
  .  there is a natural isomorphism
  
    
      
        (
        
          f
          
            −
            1
          
        
        f
        )
        (
        y
        )
        ≅
        
          hom
          
            
              t
              o
              p
            
            
              /
            
            x
          
        
        ⁡
        (
        f
        ,
        π
        )
      
    
    {\displaystyle (f^{-1}f)(y)\cong \operatorname {hom} _{\mathbf {top} /x}(f,\pi )}
  ,which shows that 
  
    
      
        π
        :
        e
        →
        x
      
    
    {\displaystyle \pi :e\to x}
   (for the étalé space) represents the functor 
  
    
      
        γ
      
    
    {\displaystyle \gamma }
  .

  
    
      
        e
      
    
    {\displaystyle e}
   is constructed so that the projection map 
  
    
      
        π
      
    
    {\displaystyle \pi }
   is a covering map. in algebraic geometry, the natural analog of a covering map is called an étale morphism. despite its similarity to "étalé", the word étale [etal] has a different meaning in french. it is possible to turn 
  
    
      
        e
      
    
    {\displaystyle e}
   into a scheme and 
  
    
      
        π
      
    
    {\displaystyle \pi }
   into a morphism of schemes in such a way that 
  
    
      
        π
      
    
    {\displaystyle \pi }
   retains the same universal property, but 
  
    
      
        π
      
    
    {\displaystyle \pi }
   is not in general an étale morphism because it is not quasi-finite. it is, however, formally étale.
the definition of sheaves by étalé spaces is older than the definition given earlier in the article. it is still common in some areas of mathematics such as mathematical analysis.


== sheaf cohomology ==

in contexts, where the open set u is fixed, and the sheaf is regarded as a variable, the set f(u) is also often denoted 
  
    
      
        γ
        (
        u
        ,
        f
        )
        .
      
    
    {\displaystyle \gamma (u,f).}
  

as was noted above, this functor does not preserve epimorphisms. instead, an epimorphism of sheaves 
  
    
      
        
          
            f
          
        
        →
        
          
            g
          
        
      
    
    {\displaystyle {\mathcal {f}}\to {\mathcal {g}}}
   is a map with the following property: for any section 
  
    
      
        g
        ∈
        
          
            g
          
        
        (
        u
        )
      
    
    {\displaystyle g\in {\mathcal {g}}(u)}
   there is a covering 
  
    
      
        
          
            u
          
        
        =
        {
        
          u
          
            i
          
        
        
          }
          
            i
            ∈
            i
          
        
      
    
    {\displaystyle {\mathcal {u}}=\{u_{i}\}_{i\in i}}
   where 
  
    
      
        u
        =
        
          ⋃
          
            i
            ∈
            i
          
        
        
          u
          
            i
          
        
      
    
    {\displaystyle u=\bigcup _{i\in i}u_{i}}
   of open subsets, such that the restriction 
  
    
      
        g
        
          
            |
          
          
            
              u
              
                i
              
            
          
        
      
    
    {\displaystyle g|_{u_{i}}}
   are in the image of 
  
    
      
        
          
            f
          
        
        (
        
          u
          
            i
          
        
        )
      
    
    {\displaystyle {\mathcal {f}}(u_{i})}
  . however, g itself need not be in the image of 
  
    
      
        
          
            f
          
        
        (
        u
        )
      
    
    {\displaystyle {\mathcal {f}}(u)}
  . a concrete example of this phenomenon is the exponential map 

  
    
      
        
          
            o
          
        
        
          
            
              
                →
              
              
                exp
              
            
          
        
        
          
            
              o
            
          
          
            ×
          
        
      
    
    {\displaystyle {\mathcal {o}}{\stackrel {\exp }{\to }}{\mathcal {o}}^{\times }}
  between the sheaf of holomorphic functions and non-zero holomorphic functions. this map is an epimorphism, which amounts to saying that any non-zero holomorphic function g (on some open subset in c, say), admits a complex logarithm locally, i.e., after restricting g to appropriate open subsets. however, g need not have a logarithm globally.
sheaf cohomology captures this phenomenon. more precisely, for an exact sequence of sheaves of abelian groups

  
    
      
        0
        →
        
          
            
              f
            
          
          
            1
          
        
        →
        
          
            
              f
            
          
          
            2
          
        
        →
        
          
            
              f
            
          
          
            3
          
        
        →
        0
        ,
      
    
    {\displaystyle 0\to {\mathcal {f}}_{1}\to {\mathcal {f}}_{2}\to {\mathcal {f}}_{3}\to 0,}
  (i.e., an epimorphism 
  
    
      
        
          
            
              f
            
          
          
            2
          
        
        →
        
          
            
              f
            
          
          
            3
          
        
      
    
    {\displaystyle {\mathcal {f}}_{2}\to {\mathcal {f}}_{3}}
   whose kernel is 
  
    
      
        
          
            
              f
            
          
          
            1
          
        
      
    
    {\displaystyle {\mathcal {f}}_{1}}
  ), there is a long exact sequenceby means of this sequence, the first cohomology group 
  
    
      
        
          h
          
            1
          
        
        (
        u
        ,
        
          
            
              f
            
          
          
            1
          
        
        )
      
    
    {\displaystyle h^{1}(u,{\mathcal {f}}_{1})}
   is a measure for the non-surjectivity of the map between sections of 
  
    
      
        
          
            
              f
            
          
          
            2
          
        
      
    
    {\displaystyle {\mathcal {f}}_{2}}
   and 
  
    
      
        
          
            
              f
            
          
          
            3
          
        
      
    
    {\displaystyle {\mathcal {f}}_{3}}
  .
there are several different ways of constructing sheaf cohomology. grothendieck (1957) introduced them by defining sheaf cohomology as the derived functor of 
  
    
      
        γ
      
    
    {\displaystyle \gamma }
  . this method is theoretically satisfactory, but, being based on injective resolutions, of little use in concrete computations. godement resolutions are another general, but practically inaccessible approach.


=== computing sheaf cohomology ===
especially in the context of sheaves on manifolds, sheaf cohomology can often be computed using resolutions by soft sheaves, fine sheaves, and flabby sheaves (also known as flasque sheaves from the french flasque meaning flabby). for example, a partition of unity argument shows that the sheaf of smooth functions on a manifold is soft. the higher cohomology groups 
  
    
      
        
          h
          
            i
          
        
        (
        u
        ,
        
          
            f
          
        
        )
      
    
    {\displaystyle h^{i}(u,{\mathcal {f}})}
   for 
  
    
      
        i
        >
        0
      
    
    {\displaystyle i>0}
   vanish for soft sheaves, which gives a way of computing cohomology of other sheaves. for example, the de rham complex is a resolution of the constant sheaf 
  
    
      
        
          
            
              r
            
            _
          
        
      
    
    {\displaystyle {\underline {\mathbf {r} }}}
   on any smooth manifold, so the sheaf cohomology of 
  
    
      
        
          
            
              r
            
            _
          
        
      
    
    {\displaystyle {\underline {\mathbf {r} }}}
   is equal to its de rham cohomology.
a different approach is by čech cohomology. čech cohomology was the first cohomology theory developed for sheaves and it is well-suited to concrete calculations, such as computing the coherent sheaf cohomology of complex projective space 
  
    
      
        
          
            p
          
          
            n
          
        
      
    
    {\displaystyle \mathbb {p} ^{n}}
  . it relates sections on open subsets of the space to cohomology classes on the space. in most cases, čech cohomology computes the same cohomology groups as the derived functor cohomology. however, for some pathological spaces, čech cohomology will give the correct 
  
    
      
        
          h
          
            1
          
        
      
    
    {\displaystyle h^{1}}
   but incorrect higher cohomology groups. to get around this, jean-louis verdier developed hypercoverings. hypercoverings not only give the correct higher cohomology groups but also allow the open subsets mentioned above to be replaced by certain morphisms from another space. this flexibility is necessary in some applications, such as the construction of pierre deligne's mixed hodge structures.

many other coherent sheaf cohomology groups are found using an embedding 
  
    
      
        i
        :
        x
        ↪
        y
      
    
    {\displaystyle i:x\hookrightarrow y}
   of a space 
  
    
      
        x
      
    
    {\displaystyle x}
   into a space with known cohomology, such as 
  
    
      
        
          
            p
          
          
            n
          
        
      
    
    {\displaystyle \mathbb {p} ^{n}}
  , or some weighted projective space. in this way, the known sheaf cohomology groups on these ambient spaces can be related to the sheaves 
  
    
      
        
          i
          
            ∗
          
        
        
          
            f
          
        
      
    
    {\displaystyle i_{*}{\mathcal {f}}}
  , giving 
  
    
      
        
          h
          
            i
          
        
        (
        y
        ,
        
          i
          
            ∗
          
        
        
          
            f
          
        
        )
        ≅
        
          h
          
            i
          
        
        (
        x
        ,
        
          
            f
          
        
        )
      
    
    {\displaystyle h^{i}(y,i_{*}{\mathcal {f}})\cong h^{i}(x,{\mathcal {f}})}
  . for example, computing the coherent sheaf cohomology of projective plane curves is easily found. one big theorem in this space is the hodge decomposition found using a spectral sequence associated to sheaf cohomology groups, proved by deligne. essentially, the 
  
    
      
        
          e
          
            1
          
        
      
    
    {\displaystyle e_{1}}
  -page with terms
  
    
      
        
          e
          
            1
          
          
            p
            ,
            q
          
        
        =
        
          h
          
            p
          
        
        (
        x
        ,
        
          ω
          
            x
          
          
            q
          
        
        )
      
    
    {\displaystyle e_{1}^{p,q}=h^{p}(x,\omega _{x}^{q})}
  the sheaf cohomology of a smooth projective variety 
  
    
      
        x
      
    
    {\displaystyle x}
  , degenerates, meaning 
  
    
      
        
          e
          
            1
          
        
        =
        
          e
          
            ∞
          
        
      
    
    {\displaystyle e_{1}=e_{\infty }}
  . this gives the canonical hodge structure on the cohomology groups 
  
    
      
        
          h
          
            k
          
        
        (
        x
        ,
        
          c
        
        )
      
    
    {\displaystyle h^{k}(x,\mathbb {c} )}
  . it was later found these cohomology groups can be easily explicitly computed using griffiths residues. see jacobian ideal. these kinds of theorems lead to one of the deepest theorems about the cohomology of algebraic varieties, the decomposition theorem, paving the path for mixed hodge modules.
another clean approach to the computation of some cohomology groups is the borel–bott–weil theorem, which identifies the cohomology groups of some line bundles on flag manifolds with irreducible representations of lie groups.  this theorem can be used, for example, to easily compute the cohomology groups of all line bundles on projective space and grassmann manifolds.
in many cases there is a duality theory for sheaves that generalizes poincaré duality. see grothendieck duality and verdier duality.


=== derived categories of sheaves ===
the derived category of the category of sheaves of, say, abelian groups on some space x, denoted here as 
  
    
      
        d
        (
        x
        )
      
    
    {\displaystyle d(x)}
  , is the conceptual haven for sheaf cohomology, by virtue of the following relation: 

  
    
      
        
          h
          
            n
          
        
        (
        x
        ,
        
          
            f
          
        
        )
        =
        
          hom
          
            d
            (
            x
            )
          
        
        ⁡
        (
        
          z
        
        ,
        
          
            f
          
        
        [
        n
        ]
        )
        .
      
    
    {\displaystyle h^{n}(x,{\mathcal {f}})=\operatorname {hom} _{d(x)}(\mathbf {z} ,{\mathcal {f}}[n]).}
  the adjunction between 
  
    
      
        
          f
          
            −
            1
          
        
      
    
    {\displaystyle f^{-1}}
  , which is the left adjoint of 
  
    
      
        
          f
          
            ∗
          
        
      
    
    {\displaystyle f_{*}}
   (already on the level of sheaves of abelian groups) gives rise to an adjunction 

  
    
      
        
          f
          
            −
            1
          
        
        :
        d
        (
        y
        )
        ⇄
        d
        (
        x
        )
        :
        r
        
          f
          
            ∗
          
        
      
    
    {\displaystyle f^{-1}:d(y)\rightleftarrows d(x):rf_{*}}
   (for 
  
    
      
        f
        :
        x
        →
        y
      
    
    {\displaystyle f:x\to y}
  ),where 
  
    
      
        r
        
          f
          
            ∗
          
        
      
    
    {\displaystyle rf_{*}}
   is the derived functor. this latter functor encompasses the notion of sheaf cohomology since 
  
    
      
        
          h
          
            n
          
        
        (
        x
        ,
        
          
            f
          
        
        )
        =
        
          r
          
            n
          
        
        
          f
          
            ∗
          
        
        
          
            f
          
        
      
    
    {\displaystyle h^{n}(x,{\mathcal {f}})=r^{n}f_{*}{\mathcal {f}}}
   for 
  
    
      
        f
        :
        x
        →
        {
        ∗
        }
      
    
    {\displaystyle f:x\to \{*\}}
  .

like 
  
    
      
        
          f
          
            ∗
          
        
      
    
    {\displaystyle f_{*}}
  , the direct image with compact support 
  
    
      
        
          f
          
            !
          
        
      
    
    {\displaystyle f_{!}}
   can also be derived. by virtue of the following isomorphism 
  
    
      
        r
        
          f
          
            !
          
        
        f
      
    
    {\displaystyle rf_{!}f}
   parametrizes the cohomology with compact support of the fibers of 
  
    
      
        f
      
    
    {\displaystyle f}
  :

  
    
      
        (
        
          r
          
            i
          
        
        
          f
          
            !
          
        
        f
        
          )
          
            y
          
        
        =
        
          h
          
            c
          
          
            i
          
        
        (
        
          f
          
            −
            1
          
        
        (
        y
        )
        ,
        f
        )
        .
      
    
    {\displaystyle (r^{i}f_{!}f)_{y}=h_{c}^{i}(f^{-1}(y),f).}
  this isomorphism is an example of a base change theorem. there is another adjunction

  
    
      
        r
        
          f
          
            !
          
        
        :
        d
        (
        x
        )
        ⇄
        d
        (
        y
        )
        :
        
          f
          
            !
          
        
        .
      
    
    {\displaystyle rf_{!}:d(x)\rightleftarrows d(y):f^{!}.}
  unlike all the functors considered above, the twisted (or exceptional) inverse image functor 
  
    
      
        
          f
          
            !
          
        
      
    
    {\displaystyle f^{!}}
   is in general only defined on the level of derived categories, i.e., the functor is not obtained as the derived functor of some functor between abelian categories. if 
  
    
      
        f
        :
        x
        →
        {
        ∗
        }
      
    
    {\displaystyle f:x\to \{*\}}
   and x is a smooth orientable manifold of dimension n, then

  
    
      
        
          f
          
            !
          
        
        
          
            
              r
            
            _
          
        
        ≅
        
          
            
              r
            
            _
          
        
        [
        n
        ]
        .
      
    
    {\displaystyle f^{!}{\underline {\mathbf {r} }}\cong {\underline {\mathbf {r} }}[n].}
  this computation, and the compatibility of the functors with duality (see verdier duality) can be used to obtain a high-brow explanation of poincaré duality. in the context of quasi-coherent sheaves on schemes, there is a similar duality known as coherent duality.
perverse sheaves are certain objects in 
  
    
      
        d
        (
        x
        )
      
    
    {\displaystyle d(x)}
  , i.e., complexes of sheaves (but not in general sheaves proper). they are an important tool to study the geometry of singularities.


==== derived categories of coherent sheaves and the grothendieck group ====
another important application of derived categories of sheaves is with the derived category of coherent sheaves on a scheme 
  
    
      
        x
      
    
    {\displaystyle x}
   denoted 
  
    
      
        
          d
          
            c
            o
            h
          
        
        (
        x
        )
      
    
    {\displaystyle d_{coh}(x)}
  . this was used by grothendieck in his development of intersection theory using derived categories and k-theory, that the intersection product of subschemes 
  
    
      
        
          y
          
            1
          
        
        ,
        
          y
          
            2
          
        
      
    
    {\displaystyle y_{1},y_{2}}
   is represented in k-theory as
  
    
      
        [
        
          y
          
            1
          
        
        ]
        ⋅
        [
        
          y
          
            2
          
        
        ]
        =
        [
        
          
            
              o
            
          
          
            
              y
              
                1
              
            
          
        
        
          ⊗
          
            
              
                
                  o
                
              
              
                x
              
            
          
          
            
              l
            
          
        
        
          
            
              o
            
          
          
            
              y
              
                2
              
            
          
        
        ]
        ∈
        k
        (
        
          coh(x)
        
        )
      
    
    {\displaystyle [y_{1}]\cdot [y_{2}]=[{\mathcal {o}}_{y_{1}}\otimes _{{\mathcal {o}}_{x}}^{\mathbf {l} }{\mathcal {o}}_{y_{2}}]\in k({\text{coh(x)}})}
  where 
  
    
      
        
          
            
              o
            
          
          
            
              y
              
                i
              
            
          
        
      
    
    {\displaystyle {\mathcal {o}}_{y_{i}}}
   are coherent sheaves defined by the 
  
    
      
        
          
            
              o
            
          
          
            x
          
        
      
    
    {\displaystyle {\mathcal {o}}_{x}}
  -modules given by their structure sheaves.


== sites and topoi ==

andré weil's weil conjectures stated that there was a cohomology theory for algebraic varieties over finite fields that would give an analogue of the riemann hypothesis.  the cohomology of a complex manifold can be defined as the sheaf cohomology of the locally constant sheaf 
  
    
      
        
          
            
              c
            
            _
          
        
      
    
    {\displaystyle {\underline {\mathbf {c} }}}
   in the euclidean topology, which suggests defining a weil cohomology theory in positive characteristic as the sheaf cohomology of a constant sheaf.  but the only classical topology on such a variety is the zariski topology, and the zariski topology has very few open sets, so few that the cohomology of any zariski-constant sheaf on an irreducible variety vanishes (except in degree zero).  alexandre grothendieck solved this problem by introducing grothendieck topologies, which axiomatize the notion of covering.  grothendieck's insight was that the definition of a sheaf depends only on the open sets of a topological space, not on the individual points.  once he had axiomatized the notion of covering, open sets could be replaced by other objects.  a presheaf takes each one of these objects to data, just as before, and a sheaf is a presheaf that satisfies the gluing axiom with respect to our new notion of covering.  this allowed grothendieck to define étale cohomology and ℓ-adic cohomology, which eventually were used to prove the weil conjectures.
a category with a grothendieck topology is called a site.  a category of sheaves on a site is called a topos or a grothendieck topos.  the notion of a topos was later abstracted by william lawvere and miles tierney to define an elementary topos, which has connections to mathematical logic.


== history ==
the first origins of sheaf theory are hard to pin down – they may be co-extensive with the idea of analytic continuation. it took about 15 years for a recognisable, free-standing theory of sheaves to emerge from the foundational work on cohomology.

1936 eduard čech introduces the nerve construction, for associating a simplicial complex to an open covering.
1938 hassler whitney gives a 'modern' definition of cohomology, summarizing the work since j. w. alexander and kolmogorov first defined cochains.
1943 norman steenrod publishes on homology with local coefficients.
1945 jean leray publishes work carried out as a prisoner of war, motivated by proving fixed-point theorems for application to pde theory; it is the start of sheaf theory and spectral sequences.
1947 henri cartan reproves the de rham theorem by sheaf methods, in correspondence with andré weil (see de rham–weil theorem). leray gives a sheaf definition in his courses via closed sets (the later carapaces).
1948 the cartan seminar writes up sheaf theory for the first time.
1950 the "second edition" sheaf theory from the cartan seminar: the sheaf space (espace étalé) definition is used, with stalkwise structure. supports are introduced, and cohomology with supports. continuous mappings give rise to spectral sequences. at the same time kiyoshi oka introduces an idea (adjacent to that) of a sheaf of ideals, in several complex variables.
1951 the cartan seminar proves theorems a and b, based on oka's work.
1953 the finiteness theorem for coherent sheaves in the analytic theory is proved by cartan and jean-pierre serre, as is serre duality.
1954 serre's paper faisceaux algébriques cohérents (published in 1955) introduces sheaves into algebraic geometry. these ideas are immediately exploited by friedrich hirzebruch, who writes a major 1956 book on topological methods.
1955 alexander grothendieck in lectures in kansas defines abelian category and presheaf, and by using injective resolutions allows direct use of sheaf cohomology on all topological spaces, as derived functors.
1956 oscar zariski's report algebraic sheaf theory
1957 grothendieck's tohoku paper rewrites homological algebra; he proves grothendieck duality (i.e., serre duality for possibly singular algebraic varieties).
1957 onwards: grothendieck extends sheaf theory in line with the needs of algebraic geometry, introducing: schemes and general sheaves on them, local cohomology, derived categories (with verdier), and grothendieck topologies. there emerges also his influential schematic idea of 'six operations' in homological algebra.
1958 roger godement's book on sheaf theory is published. at around this time mikio sato proposes his hyperfunctions, which will turn out to have sheaf-theoretic nature.at this point sheaves had become a mainstream part of mathematics, with use by no means restricted to algebraic topology. it was later discovered that the logic in categories of sheaves is intuitionistic logic (this observation is now often referred to as kripke–joyal semantics, but probably should be attributed to a number of authors).


== see also ==
coherent sheaf
gerbe
stack (mathematics)
sheaf of spectra
perverse sheaf
presheaf of spaces
constructible sheaf


== notes ==


== references ==
bredon, glen e. (1997), sheaf theory, graduate texts in mathematics, vol. 170 (2nd ed.), springer-verlag, isbn 978-0-387-94905-5, mr 1481706 (oriented towards conventional topological applications)
de cataldo, andrea mark; migliorini, luca (2010). "what is a perverse sheaf?" (pdf). notices of the american mathematical society. 57 (5): 632–4. arxiv:1004.2983. bibcode:2010arxiv1004.2983d. mr 2664042.
godement, roger (2006) [1973], topologie algébrique et théorie des faisceaux, paris: hermann, isbn 2705612521, mr 0345092
grothendieck, alexander (1957), "sur quelques points d'algèbre homologique", the tohoku mathematical journal, second series, 9 (2): 119–221, doi:10.2748/tmj/1178244839, issn 0040-8735, mr 0102537
hirzebruch, friedrich (1995), topological methods in algebraic geometry, classics in mathematics, springer-verlag, isbn 978-3-540-58663-0, mr 1335917 (updated edition of a classic using enough sheaf theory to show its power)
iversen, birger (1986), cohomology of sheaves, universitext, springer, doi:10.1007/978-3-642-82783-9, isbn 3-540-16389-1, mr 0842190
kashiwara, masaki; schapira, pierre (1994), sheaves on manifolds, grundlehren der mathematischen wissenschaften [fundamental principles of mathematical sciences], vol. 292, springer-verlag, isbn 978-3-540-51861-7, mr 1299726 (advanced techniques such as the derived category and vanishing cycles on the most reasonable spaces)
mac lane, saunders; moerdijk, ieke (1994), sheaves in geometry and logic: a first introduction to topos theory, universitext, springer-verlag, isbn 978-0-387-97710-2, mr 1300636 (category theory and toposes emphasised)
martin, william t.; chern, shiing-shen; zariski, oscar (1956), "scientific report on the second summer institute, several complex variables", bulletin of the american mathematical society, 62 (2): 79–141, doi:10.1090/s0002-9904-1956-10013-x, issn 0002-9904, mr 0077995
ramanan, s. (2005), global calculus, graduate studies in mathematics, vol. 65, american mathematical society, doi:10.1090/gsm/065, isbn 0-8218-3702-8, mr 2104612
seebach, j. arthur; seebach, linda a.; steen, lynn a. (1970), "what is a sheaf", american mathematical monthly, 77 (7): 681–703, doi:10.1080/00029890.1970.11992563, mr 0263073
serre, jean-pierre (1955), "faisceaux algébriques cohérents" (pdf), annals of mathematics, second series, 61 (2): 197–278, doi:10.2307/1969915, issn 0003-486x, jstor 1969915, mr 0068874
swan, richard g. (1964), the theory of sheaves, chicago lectures in mathematics (3 ed.), university of chicago press, isbn 9780226783291 (concise lecture notes)
tennison, barry r. (1975), sheaf theory, london mathematical society lecture note series, vol. 20, cambridge university press, isbn 978-0-521-20784-3, mr 0404390 (pedagogic treatment)