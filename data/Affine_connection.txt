in differential geometry, an affine connection is a geometric object on a smooth manifold which connects nearby tangent spaces, so it permits tangent vector fields to be differentiated as if they were functions on the manifold with values in a fixed vector space. connections are among the simplest methods of defining differentiation of the sections of vector bundles.the notion of an affine connection has its roots in 19th-century geometry and tensor calculus, but was not fully developed until the early 1920s, by élie cartan (as part of his general theory of connections) and hermann weyl (who used the notion as a part of his foundations for general relativity). the terminology is due to cartan and has its origins in the identification of tangent spaces in euclidean space rn by translation: the idea is that a choice of affine connection makes a manifold look infinitesimally like euclidean space not just smoothly, but as an affine space.
on any manifold of positive dimension there are infinitely many affine connections. if the manifold is further endowed with a metric tensor then there is a natural choice of affine connection, called the levi-civita connection. the choice of an affine connection is equivalent to prescribing a way of differentiating vector fields which satisfies several reasonable properties (linearity and the leibniz rule). this yields a possible definition of an affine connection as a covariant derivative or (linear) connection on the tangent bundle. a choice of affine connection is also equivalent to a notion of parallel transport, which is a method for transporting tangent vectors along curves. this also defines a parallel transport on the frame bundle. infinitesimal parallel transport in the frame bundle yields another description of an affine connection, either as a cartan connection for the affine group or as a principal connection on the frame bundle.
the main invariants of an affine connection are its torsion and its curvature. the torsion measures how closely the lie bracket of vector fields can be recovered from the affine connection. affine connections may also be used to define (affine) geodesics on a manifold, generalizing the straight lines of euclidean space, although the geometry of those straight lines can be very different from usual euclidean geometry; the main differences are encapsulated in the curvature of the connection.


== motivation and history ==
a smooth manifold is a mathematical object which looks locally like a smooth deformation of euclidean space rn: for example a smooth curve or surface looks locally like a smooth deformation of a line or a plane. smooth functions and vector fields can be defined on manifolds, just as they can on euclidean space, and scalar functions on manifolds can be differentiated in a natural way. however, differentiation of vector fields is less straightforward: this is a simple matter in euclidean space, because the tangent space of based vectors at a point p can be identified naturally (by translation) with the tangent space at a nearby point q. on a general manifold, there is no such natural identification between nearby tangent spaces, and so tangent vectors at nearby points cannot be compared in a well-defined way. the notion of an affine connection was introduced to remedy this problem by connecting nearby tangent spaces. the origins of this idea can be traced back to two main sources: surface theory and tensor calculus.


=== motivation from surface theory ===

consider a smooth surface s in 3-dimensional euclidean space. near to any point, s can be approximated by its tangent plane at that point, which is an affine subspace of euclidean space. differential geometers in the 19th century were interested in the notion of development in which one surface was rolled along another, without slipping or twisting. in particular, the tangent plane to a point of s can be rolled on s: this should be easy to imagine when s is a surface like the 2-sphere, which is the smooth boundary of a convex region. as the tangent plane is rolled on s, the point of contact traces out a curve on s. conversely, given a curve on s, the tangent plane can be rolled along that curve. this provides a way to identify the tangent planes at different points along the curve: in particular, a tangent vector in the tangent space at one point on the curve is identified with a unique tangent vector at any other point on the curve. these identifications are always given by affine transformations from one tangent plane to another.
this notion of parallel transport of tangent vectors, by affine transformations, along a curve has a characteristic feature: the point of contact of the tangent plane with the surface always moves with the curve under parallel translation (i.e., as the tangent plane is rolled along the surface, the point of contact moves). this generic condition is characteristic of cartan connections. in more modern approaches, the point of contact is viewed as the origin in the tangent plane (which is then a vector space), and the movement of the origin is corrected by a translation, so that parallel transport is linear, rather than affine.
in the point of view of cartan connections, however, the affine subspaces of euclidean space are model surfaces — they are the simplest surfaces in euclidean 3-space, and are homogeneous under the affine group of the plane — and every smooth surface has a unique model surface tangent to it at each point. these model surfaces are klein geometries in the sense of felix klein's erlangen programme. more generally, an n-dimensional affine space is a klein geometry for the affine group aff(n), the stabilizer of a point being the general linear group gl(n). an affine n-manifold is then a manifold which looks infinitesimally like n-dimensional affine space.


=== motivation from tensor calculus ===

the second motivation for affine connections comes from the notion of a covariant derivative of vector fields. before the advent of coordinate-independent methods, it was necessary to work with vector fields by embedding their respective euclidean vectors into an atlas. these components can be differentiated, but the derivatives do not transform in a manageable way under changes of coordinates. correction terms were introduced by elwin bruno christoffel (following ideas of bernhard riemann) in the 1870s so that the (corrected) derivative of one vector field along another transformed covariantly under coordinate transformations — these correction terms subsequently came to be known as christoffel symbols.
this idea was developed into the theory of absolute differential calculus (now known as tensor calculus) by gregorio ricci-curbastro and his student tullio levi-civita between 1880 and the turn of the 20th century.
tensor calculus really came to life, however, with the advent of albert einstein's theory of general relativity in 1915. a few years after this, levi-civita formalized the unique connection associated to a riemannian metric, now known as the levi-civita connection. more general affine connections were then studied around 1920, by hermann weyl, who developed a detailed mathematical foundation for general relativity, and élie cartan, who made the link with the geometrical ideas coming from surface theory.


=== approaches ===
the complex history has led to the development of widely varying approaches to and generalizations of the affine connection concept.
the most popular approach is probably the definition motivated by covariant derivatives. on the one hand, the ideas of weyl were taken up by physicists in the form of gauge theory and gauge covariant derivatives. on the other hand, the notion of covariant differentiation was abstracted by jean-louis koszul, who defined (linear or koszul) connections on vector bundles. in this language, an affine connection is simply a covariant derivative or (linear) connection on the tangent bundle.
however, this approach does not explain the geometry behind affine connections nor how they acquired their name. the term really has its origins in the identification of tangent spaces in euclidean space by translation: this property means that euclidean n-space is an affine space. (alternatively, euclidean space is a principal homogeneous space or torsor under the group of translations, which is a subgroup of the affine group.) as mentioned in the introduction, there are several ways to make this precise: one uses the fact that an affine connection defines a notion of parallel transport of vector fields along a curve. this also defines a parallel transport on the frame bundle. infinitesimal parallel transport in the frame bundle yields another description of an affine connection, either as a cartan connection for the affine group aff(n) or as a principal gl(n) connection on the frame bundle.


== formal definition as a differential operator ==

let m be a smooth manifold and let γ(tm) be the space of vector fields on m, that is, the space of smooth sections of the tangent bundle tm. then an affine connection on m is a bilinear map

  
    
      
        
          
            
              
                γ
                (
                
                  t
                
                m
                )
                ×
                γ
                (
                
                  t
                
                m
                )
              
              
                
                →
                γ
                (
                
                  t
                
                m
                )
              
            
            
              
                (
                x
                ,
                y
                )
              
              
                
                ↦
                
                  ∇
                  
                    x
                  
                
                y
                
                ,
              
            
          
        
      
    
    {\displaystyle {\begin{aligned}\gamma (\mathrm {t} m)\times \gamma (\mathrm {t} m)&\rightarrow \gamma (\mathrm {t} m)\\(x,y)&\mapsto \nabla _{x}y\,,\end{aligned}}}
  such that for all f in the set of smooth functions on m, written c∞(m, r), and all vector fields x, y on m:

∇fxy = f ∇xy, that is, ∇ is c∞(m, r)-linear in the first variable;
∇x(fy) = ∂x f y + f ∇xy, where ∂x denotes the directional derivative; that is, ∇ satisfies leibniz rule in the second variable.


=== elementary properties ===
it follows from property 1 above that the value of ∇xy at a point x ∈ m depends only on the value of x at x and not on the value of x on m − {x}. it also follows from property 2 above that the value of ∇xy at a point x ∈ m depends only on the value of y on a neighbourhood of x.
if ∇1, ∇2 are affine connections then the value at x of ∇1xy − ∇2xy may be written γx(xx, yx) where  is bilinear and depends smoothly on x (i.e., it defines a smooth bundle homomorphism). conversely if ∇ is an affine connection and γ is such a smooth bilinear bundle homomorphism (called a connection form on m) then ∇ + γ is an affine connection.
if m is an open subset of rn, then the tangent bundle of m is the trivial bundle m × rn. in this situation there is a canonical affine connection d on m: any vector field y is given by a smooth function v from m to rn; then dxy is the vector field corresponding to the smooth function dv(x) = ∂xy from m to rn. any other affine connection ∇ on m may therefore be written ∇ = d + γ, where γ is a connection form on m.
more generally, a local trivialization of the tangent bundle is a bundle isomorphism between the restriction of tm to an open subset u of m, and u × rn. the restriction of an affine connection ∇ to u may then be written in the form d + γ where γ is a connection form on u.


== parallel transport for affine connections ==

comparison of tangent vectors at different points on a manifold is generally not a well-defined process. an affine connection provides one way to remedy this using the notion of parallel transport, and indeed this can be used to give a definition of an affine connection.
let m be a manifold with an affine connection ∇. then a vector field x is said to be parallel if ∇x = 0 in the sense that for any vector field y, ∇yx = 0. intuitively speaking, parallel vectors have all their derivatives equal to zero and are therefore in some sense constant. by evaluating a parallel vector field at two points x and y, an identification between a tangent vector at x and one at y is obtained. such tangent vectors are said to be parallel transports of each other.
nonzero parallel vector fields do not, in general, exist, because the equation ∇x = 0 is a partial differential equation which is overdetermined: the integrability condition for this equation is the vanishing of the curvature of ∇ (see below). however, if this equation is restricted to a curve from x to y it becomes an ordinary differential equation. there is then a unique solution for any initial value of x at x.
more precisely, if γ : i → m a smooth curve parametrized by an interval [a, b] and ξ ∈ txm, where x = γ(a), then a vector field x along γ (and in particular, the value of this vector field at y = γ(b)) is called the parallel transport of ξ along γ if

∇γ′(t)x = 0, for all t ∈ [a, b]
xγ(a) = ξ.formally, the first condition means that x is parallel with respect to the pullback connection on the pullback bundle γ ∗ tm. however, in a local trivialization it is a first-order system of linear ordinary differential equations, which has a unique solution for any initial condition given by the second condition (for instance, by the picard–lindelöf theorem).
thus parallel transport provides a way of moving tangent vectors along a curve using the affine connection to keep them "pointing in the same direction" in an intuitive sense, and this provides a linear isomorphism between the tangent spaces at the two ends of the curve. the isomorphism obtained in this way will in general depend on the choice of the curve: if it does not, then parallel transport along every curve can be used to define parallel vector fields on m, which can only happen if the curvature of ∇ is zero.
a linear isomorphism is determined by its action on an ordered basis or frame. hence parallel transport can also be characterized as a way of transporting elements of the (tangent) frame bundle gl(m) along a curve. in other words, the affine connection provides a lift of any curve γ in m to a curve γ̃ in gl(m).


== formal definition on the frame bundle ==

an affine connection may also be defined as a principal gl(n) connection ω on the frame bundle fm or gl(m) of a manifold m. in more detail, ω is a smooth map from the tangent bundle t(fm) of the frame bundle to the space of n × n matrices (which is the lie algebra gl(n) of the lie group gl(n) of invertible n × n matrices) satisfying two properties:

ω is equivariant with respect to the action of gl(n) on t(fm) and gl(n);
ω(xξ) = ξ for any ξ in gl(n), where xξ is the vector field on fm corresponding to ξ.such a connection ω immediately defines a covariant derivative not only on the tangent bundle, but on vector bundles associated to any group representation of gl(n), including bundles of tensors and tensor densities. conversely, an affine connection on the tangent bundle determines an affine connection on the frame bundle, for instance, by requiring that ω vanishes on tangent vectors to the lifts of curves to the frame bundle defined by parallel transport.
the frame bundle also comes equipped with a solder form θ : t(fm) → rn which is horizontal in the sense that it vanishes on vertical vectors such as the point values of the vector fields xξ: indeed θ is defined first by projecting a tangent vector (to fm at a frame f) to m, then by taking the components of this tangent vector on m with respect to the frame f. note that θ is also gl(n)-equivariant (where gl(n) acts on rn by matrix multiplication).
the pair (θ, ω) defines a bundle isomorphism of t(fm) with the trivial bundle fm × aff(n), where aff(n) is the cartesian product of rn and gl(n) (viewed as the lie algebra of the affine group, which is actually a semidirect product – see below).


== affine connections as cartan connections ==

affine connections can be defined within cartan's general framework. in the modern approach, this is closely related to the definition of affine connections on the frame bundle. indeed, in one formulation, a cartan connection is an absolute parallelism of a principal bundle satisfying suitable properties. from this point of view the aff(n)-valued one-form (θ, ω) : t(fm) → aff(n) on the frame bundle (of an affine manifold) is a cartan connection. however, cartan's original approach was different from this in a number of ways:

the concept of frame bundles or principal bundles did not exist;
a connection was viewed in terms of parallel transport between infinitesimally nearby points;
this parallel transport was affine, rather than linear;
the objects being transported were not tangent vectors in the modern sense, but elements of an affine space with a marked point, which the cartan connection ultimately identifies with the tangent space.


=== explanations and historical intuition ===
the points just raised are easiest to explain in reverse, starting from the motivation provided by surface theory. in this situation, although the planes being rolled over the surface are tangent planes in a naive sense, the notion of a tangent space is really an infinitesimal notion, whereas the planes, as affine subspaces of r3, are infinite in extent. however these affine planes all have a marked point, the point of contact with the surface, and they are tangent to the surface at this point. the confusion therefore arises because an affine space with a marked point can be identified with its tangent space at that point. however, the parallel transport defined by rolling does not fix this origin: it is affine rather than linear; the linear parallel transport can be recovered by applying a translation.
abstracting this idea, an affine manifold should therefore be an n-manifold m with an affine space ax, of dimension n, attached to each x ∈ m at a marked point ax ∈ ax, together with a method for transporting elements of these affine spaces along any curve c in m. this method is required to satisfy several properties:

for any two points x, y on c, parallel transport is an affine transformation from ax to ay;
parallel transport is defined infinitesimally in the sense that it is differentiable at any point on c and depends only on the tangent vector to c at that point;
the derivative of the parallel transport at x determines a linear isomorphism from txm to taxax.these last two points are quite hard to make precise, so affine connections are more often defined infinitesimally. to motivate this, it suffices to consider how affine frames of reference transform infinitesimally with respect to parallel transport. (this is the origin of cartan's method of moving frames.) an affine frame at a point consists of a list (p, e1,… en), where p ∈ ax and the ei form a basis of tp(ax).  the affine connection is then given symbolically by a first order differential system

  
    
      
        (
        ∗
        )
        
          
            {
            
              
                
                  
                    d
                  
                  
                    p
                  
                
                
                  =
                  
                    θ
                    
                      1
                    
                  
                  
                    
                      e
                    
                    
                      1
                    
                  
                  +
                  ⋯
                  +
                  
                    θ
                    
                      n
                    
                  
                  
                    
                      e
                    
                    
                      n
                    
                  
                
              
              
                
                  
                    d
                  
                  
                    
                      e
                    
                    
                      i
                    
                  
                
                
                  =
                  
                    ω
                    
                      i
                    
                    
                      1
                    
                  
                  
                    
                      e
                    
                    
                      1
                    
                  
                  +
                  ⋯
                  +
                  
                    ω
                    
                      i
                    
                    
                      n
                    
                  
                  
                    
                      e
                    
                    
                      n
                    
                  
                
              
            
            
          
        
        
        i
        =
        1
        ,
        2
        ,
        …
        ,
        n
      
    
    {\displaystyle (*){\begin{cases}\mathrm {d} {p}&=\theta ^{1}\mathbf {e} _{1}+\cdots +\theta ^{n}\mathbf {e} _{n}\\\mathrm {d} \mathbf {e} _{i}&=\omega _{i}^{1}\mathbf {e} _{1}+\cdots +\omega _{i}^{n}\mathbf {e} _{n}\end{cases}}\quad i=1,2,\ldots ,n}
  defined by a collection of one-forms (θ j, ω ji). geometrically, an affine frame undergoes a displacement travelling along a curve γ from γ(t) to γ(t + δt) given (approximately, or infinitesimally) by

  
    
      
        
          
            
              
                p
                (
                γ
                (
                t
                +
                δ
                t
                )
                )
                −
                p
                (
                γ
                (
                t
                )
                )
              
              
                
                =
                
                  (
                  
                    
                      θ
                      
                        1
                      
                    
                    
                      (
                      
                        
                          γ
                          ′
                        
                        (
                        t
                        )
                      
                      )
                    
                    
                      
                        e
                      
                      
                        1
                      
                    
                    +
                    ⋯
                    +
                    
                      θ
                      
                        n
                      
                    
                    
                      (
                      
                        
                          γ
                          ′
                        
                        (
                        t
                        )
                      
                      )
                    
                    
                      
                        e
                      
                      
                        n
                      
                    
                  
                  )
                
                
                  δ
                
                t
              
            
            
              
                
                  
                    e
                  
                  
                    i
                  
                
                (
                γ
                (
                t
                +
                δ
                t
                )
                )
                −
                
                  
                    e
                  
                  
                    i
                  
                
                (
                γ
                (
                t
                )
                )
              
              
                
                =
                
                  (
                  
                    
                      ω
                      
                        i
                      
                      
                        1
                      
                    
                    
                      (
                      
                        
                          γ
                          ′
                        
                        (
                        t
                        )
                      
                      )
                    
                    
                      
                        e
                      
                      
                        1
                      
                    
                    +
                    ⋯
                    +
                    
                      ω
                      
                        i
                      
                      
                        n
                      
                    
                    
                      (
                      
                        
                          γ
                          ′
                        
                        (
                        t
                        )
                      
                      )
                    
                    
                      
                        e
                      
                      
                        n
                      
                    
                  
                  )
                
                δ
                t
                
                .
              
            
          
        
      
    
    {\displaystyle {\begin{aligned}p(\gamma (t+\delta t))-p(\gamma (t))&=\left(\theta ^{1}\left(\gamma '(t)\right)\mathbf {e} _{1}+\cdots +\theta ^{n}\left(\gamma '(t)\right)\mathbf {e} _{n}\right)\mathrm {\delta } t\\\mathbf {e} _{i}(\gamma (t+\delta t))-\mathbf {e} _{i}(\gamma (t))&=\left(\omega _{i}^{1}\left(\gamma '(t)\right)\mathbf {e} _{1}+\cdots +\omega _{i}^{n}\left(\gamma '(t)\right)\mathbf {e} _{n}\right)\delta t\,.\end{aligned}}}
  furthermore, the affine spaces ax are required to be tangent to m in the informal sense that the displacement of ax along γ can be identified (approximately or infinitesimally) with the tangent vector γ′(t) to γ at x = γ(t) (which is the infinitesimal displacement of x). since

  
    
      
        
          a
          
            x
          
        
        (
        γ
        (
        t
        +
        δ
        t
        )
        )
        −
        
          a
          
            x
          
        
        (
        γ
        (
        t
        )
        )
        =
        θ
        
          (
          
            
              γ
              ′
            
            (
            t
            )
          
          )
        
        δ
        t
        
        ,
      
    
    {\displaystyle a_{x}(\gamma (t+\delta t))-a_{x}(\gamma (t))=\theta \left(\gamma '(t)\right)\delta t\,,}
  where θ is defined by θ(x) = θ1(x)e1 + … +  θn(x)en, this identification is given by θ, so the requirement is that θ should be a linear isomorphism at each point.
the tangential affine space ax is thus identified intuitively with an infinitesimal affine neighborhood of x.
the modern point of view makes all this intuition more precise using principal bundles (the essential idea is to replace a frame or a variable frame by the space of all frames and functions on this space). it also draws on the inspiration of felix klein's erlangen programme, in which a geometry is defined to be a homogeneous space. affine space is a geometry in this sense, and is equipped with a flat cartan connection. thus a general affine manifold is viewed as curved deformation of the flat model geometry of affine space.


=== affine space as the flat model geometry ===


==== definition of an affine space ====
informally, an affine space is a vector space without a fixed choice of origin.  it describes the geometry of points and free vectors in space.  as a consequence of the lack of origin, points in affine space cannot be added together as this requires a choice of origin with which to form the parallelogram law for vector addition.  however, a vector v may be added to a point p by placing the initial point of the vector at p and then transporting p to the terminal point. the operation thus described p → p + v is the translation of p along v. in technical terms, affine n-space is a set an equipped with a free transitive action of the vector group rn on it through this operation of translation of points: an is thus a principal homogeneous space for the vector group rn.
the general linear group gl(n) is the group of transformations of rn which preserve the linear structure of rn in the sense that t(av + bw) = at(v) + bt(w).  by analogy, the affine group aff(n) is the group of transformations of an preserving the affine structure.  thus φ ∈ aff(n) must preserve translations in the sense that

  
    
      
        φ
        (
        p
        +
        v
        )
        =
        φ
        (
        p
        )
        +
        t
        (
        v
        )
      
    
    {\displaystyle \varphi (p+v)=\varphi (p)+t(v)}
  where t is a general linear transformation. the map sending φ ∈ aff(n) to t ∈ gl(n) is a group homomorphism.  its kernel is the group of translations rn. the stabilizer of any point p in a can thus be identified with gl(n) using this projection: this realises the affine group as a semidirect product of gl(n) and rn, and affine space as the homogeneous space aff(n)/gl(n).


==== affine frames and the flat affine connection ====
an affine frame for a consists of a point p ∈ a and a basis (e1,… en) of the vector space tpa = rn. the general linear group gl(n) acts freely on the set fa of all affine frames by fixing p and transforming the basis (e1,… en) in the usual way, and the map π sending an affine frame (p; e1,… en) to p is the quotient map. thus fa is a principal gl(n)-bundle over a. the action of gl(n) extends naturally to a free transitive action of the affine group aff(n) on fa, so that fa is an aff(n)-torsor, and the choice of a reference frame identifies fa → a with the principal bundle aff(n) → aff(n)/gl(n).
on fa there is a collection of n + 1 functions defined by

  
    
      
        π
        (
        p
        ;
        
          
            e
          
          
            1
          
        
        ,
        …
        ,
        
          
            e
          
          
            n
          
        
        )
        =
        p
      
    
    {\displaystyle \pi (p;\mathbf {e} _{1},\dots ,\mathbf {e} _{n})=p}
  (as before) and

  
    
      
        
          ε
          
            i
          
        
        (
        p
        ;
        
          
            e
          
          
            1
          
        
        ,
        …
        ,
        
          
            e
          
          
            n
          
        
        )
        =
        
          
            e
          
          
            i
          
        
        
        .
      
    
    {\displaystyle \varepsilon _{i}(p;\mathbf {e} _{1},\dots ,\mathbf {e} _{n})=\mathbf {e} _{i}\,.}
  after choosing a basepoint for a, these are all functions with values in rn, so it is possible to take their exterior derivatives to obtain differential 1-forms with values in rn.  since the functions εi yield a basis for rn at each point of fa, these 1-forms must be expressible as sums of the form

  
    
      
        
          
            
              
                
                  d
                
                π
              
              
                
                =
                
                  θ
                  
                    1
                  
                
                
                  ε
                  
                    1
                  
                
                +
                ⋯
                +
                
                  θ
                  
                    n
                  
                
                
                  ε
                  
                    n
                  
                
              
            
            
              
                
                  d
                
                
                  ε
                  
                    i
                  
                
              
              
                
                =
                
                  ω
                  
                    i
                  
                  
                    1
                  
                
                
                  ε
                  
                    1
                  
                
                +
                ⋯
                +
                
                  ω
                  
                    i
                  
                  
                    n
                  
                
                
                  ε
                  
                    n
                  
                
              
            
          
        
      
    
    {\displaystyle {\begin{aligned}\mathrm {d} \pi &=\theta ^{1}\varepsilon _{1}+\cdots +\theta ^{n}\varepsilon _{n}\\\mathrm {d} \varepsilon _{i}&=\omega _{i}^{1}\varepsilon _{1}+\cdots +\omega _{i}^{n}\varepsilon _{n}\end{aligned}}}
  for some collection (θ i, ω kj)1 ≤ i, j, k ≤ n of real-valued one-forms on aff(n).  this system of one-forms on the principal bundle fa → a defines the affine connection on a.
taking the exterior derivative a second time, and using the fact that d2 = 0 as well as the linear independence of the εi, the following relations are obtained:

  
    
      
        
          
            
              
                
                  d
                
                
                  θ
                  
                    j
                  
                
                −
                
                  ∑
                  
                    i
                  
                
                
                  ω
                  
                    i
                  
                  
                    j
                  
                
                ∧
                
                  θ
                  
                    i
                  
                
              
              
                
                =
                0
              
            
            
              
                
                  d
                
                
                  ω
                  
                    i
                  
                  
                    j
                  
                
                −
                
                  ∑
                  
                    k
                  
                
                
                  ω
                  
                    k
                  
                  
                    j
                  
                
                ∧
                
                  ω
                  
                    i
                  
                  
                    k
                  
                
              
              
                
                =
                0
                
                .
              
            
          
        
      
    
    {\displaystyle {\begin{aligned}\mathrm {d} \theta ^{j}-\sum _{i}\omega _{i}^{j}\wedge \theta ^{i}&=0\\\mathrm {d} \omega _{i}^{j}-\sum _{k}\omega _{k}^{j}\wedge \omega _{i}^{k}&=0\,.\end{aligned}}}
  these are the maurer–cartan equations for the lie group aff(n) (identified with fa by the choice of a reference frame).  furthermore:

the pfaffian system θ j = 0 (for all j) is integrable, and its integral manifolds are the fibres of the principal bundle aff(n) → a.
the pfaffian system ω ji = 0 (for all i, j) is also integrable, and its integral manifolds define parallel transport in fa.thus the forms (ω ji) define a flat principal connection on fa → a.
for a strict comparison with the motivation, one should actually define parallel transport in a principal aff(n)-bundle over a. this can be done by pulling back fa by the smooth map φ : rn × a → a defined by translation. then the composite φ′ ∗ fa → fa → a is a principal aff(n)-bundle over a, and the forms (θ i, ω kj) pull back to give a flat principal aff(n)-connection on this bundle.


=== general affine geometries: formal definitions ===
an affine space, as with essentially any smooth klein geometry, is a manifold equipped with a flat cartan connection. more general affine manifolds or affine geometries are obtained easily by dropping the flatness condition expressed by the maurer-cartan equations. there are several ways to approach the definition and two will be given. both definitions are facilitated by the realisation that 1-forms  (θ i, ω kj) in the flat model fit together to give a 1-form with values in the lie algebra aff(n) of the affine group aff(n).
in these definitions, m is a smooth n-manifold and a = aff(n)/gl(n) is an affine space of the same dimension.


==== definition via absolute parallelism ====
let m be a manifold, and p a principal gl(n)-bundle over m. then an affine connection is a 1-form η on p with values in aff(n) satisfying the following properties

η is equivariant with respect to the action of gl(n) on p and aff(n);
η(xξ) = ξ for all ξ in the lie algebra gl(n) of all n × n matrices;
η is a linear isomorphism of each tangent space of p with aff(n).the last condition means that η is an absolute parallelism on p, i.e., it identifies the tangent bundle of p with a trivial bundle (in this case p × aff(n)). the pair (p, η) defines the structure of an affine geometry on m, making it into an affine manifold.
the affine lie algebra aff(n) splits as a semidirect product of rn and gl(n) and so η may be written as a pair (θ, ω) where θ takes values in rn and ω takes values in gl(n). conditions 1 and 2 are equivalent to ω being a principal gl(n)-connection and θ being a horizontal equivariant 1-form, which induces a bundle homomorphism from tm to the associated bundle p ×gl(n) rn. condition 3 is equivalent to the fact that this bundle homomorphism is an isomorphism. (however, this decomposition is a consequence of the rather special structure of the affine group.) since p is the frame bundle of p ×gl(n) rn, it follows that θ provides a bundle isomorphism between p and the frame bundle fm of m; this recovers the definition of an affine connection as a principal gl(n)-connection on fm.
the 1-forms arising in the flat model are just the components of θ and ω.


==== definition as a principal affine connection ====
an affine connection on m is a principal aff(n)-bundle q over m, together with a principal gl(n)-subbundle p of q and a principal aff(n)-connection α (a 1-form on q with values in aff(n)) which satisfies the following (generic) cartan condition. the rn component of pullback of α to p is a horizontal equivariant 1-form and so defines a bundle homomorphism from tm to p ×gl(n) rn: this is required to be an isomorphism.


==== relation to the motivation ====
since aff(n) acts on a, there is, associated to the principal bundle q, a bundle a = q ×aff(n) a, which is a fiber bundle over m whose fiber at x in m is an affine space ax. a section a of a (defining a marked point ax in ax for each x ∈ m) determines a principal gl(n)-subbundle p of q (as the bundle of stabilizers of these marked points) and vice versa. the principal connection α defines an ehresmann connection on this bundle, hence a notion of parallel transport. the cartan condition ensures that the distinguished section a always moves under parallel transport.


== further properties ==


=== curvature and torsion ===
curvature and torsion are the main invariants of an affine connection. as there are many equivalent ways to define the notion of an affine connection, so there are many different ways to define curvature and torsion.
from the cartan connection point of view, the curvature is the failure of the affine connection η to satisfy the maurer–cartan equation

  
    
      
        
          d
        
        η
        +
        
          
            
              1
              2
            
          
        
        [
        η
        ∧
        η
        ]
        =
        0
        ,
      
    
    {\displaystyle \mathrm {d} \eta +{\tfrac {1}{2}}[\eta \wedge \eta ]=0,}
  where the second term on the left hand side is the wedge product using the lie bracket in aff(n) to contract the values. by expanding η into the pair (θ, ω) and using the structure of the lie algebra aff(n), this left hand side can be expanded into the two formulae

  
    
      
        
          d
        
        θ
        +
        ω
        ∧
        θ
        
        
          and
        
        
        
          d
        
        ω
        +
        ω
        ∧
        ω
        
        ,
      
    
    {\displaystyle \mathrm {d} \theta +\omega \wedge \theta \quad {\text{and}}\quad \mathrm {d} \omega +\omega \wedge \omega \,,}
  where the wedge products are evaluated using matrix multiplication. the first expression is called the torsion of the connection, and the second is also called the curvature.
these expressions are differential 2-forms on the total space of a frame bundle. however, they are horizontal and equivariant, and hence define tensorial objects. these can be defined directly from the induced covariant derivative ∇ on tm as follows.
the torsion is given by the formula

  
    
      
        
          t
          
            ∇
          
        
        (
        x
        ,
        y
        )
        =
        
          ∇
          
            x
          
        
        y
        −
        
          ∇
          
            y
          
        
        x
        −
        [
        x
        ,
        y
        ]
        .
      
    
    {\displaystyle t^{\nabla }(x,y)=\nabla _{x}y-\nabla _{y}x-[x,y].}
  if the torsion vanishes, the connection is said to be torsion-free or symmetric.
the curvature is given by the formula

  
    
      
        
          r
          
            x
            ,
            y
          
          
            ∇
          
        
        z
        =
        
          ∇
          
            x
          
        
        
          ∇
          
            y
          
        
        z
        −
        
          ∇
          
            y
          
        
        
          ∇
          
            x
          
        
        z
        −
        
          ∇
          
            [
            x
            ,
            y
            ]
          
        
        z
        .
      
    
    {\displaystyle r_{x,y}^{\nabla }z=\nabla _{x}\nabla _{y}z-\nabla _{y}\nabla _{x}z-\nabla _{[x,y]}z.}
  note that [x, y] is the lie bracket of vector fields

  
    
      
        [
        x
        ,
        y
        ]
        =
        
          (
          
            
              x
              
                j
              
            
            
              ∂
              
                j
              
            
            
              y
              
                i
              
            
            −
            
              y
              
                j
              
            
            
              ∂
              
                j
              
            
            
              x
              
                i
              
            
          
          )
        
        
          ∂
          
            i
          
        
      
    
    {\displaystyle [x,y]=\left(x^{j}\partial _{j}y^{i}-y^{j}\partial _{j}x^{i}\right)\partial _{i}}
  in einstein notation. this is independent of coordinate system choice and

  
    
      
        
          ∂
          
            i
          
        
        =
        
          
            (
            
              
                ∂
                
                  ∂
                  
                    ξ
                    
                      i
                    
                  
                
              
            
            )
          
          
            p
          
        
        
        ,
      
    
    {\displaystyle \partial _{i}=\left({\frac {\partial }{\partial \xi ^{i}}}\right)_{p}\,,}
  the tangent vector at point p of the ith coordinate curve. the ∂i are a natural basis for the tangent space at point p, and the x i the corresponding coordinates for the vector field x = x i ∂i.
when both curvature and torsion vanish, the connection defines a pre-lie algebra structure on the space of global sections of the tangent bundle.


=== the levi-civita connection ===
if (m, g) is a riemannian manifold then there is a unique affine connection ∇ on m with the following two properties:

the connection is torsion-free, i.e., t∇ is zero, so that ∇xy − ∇yx = [x, y];
parallel transport is an isometry, i.e., the inner products (defined using g) between tangent vectors are preserved.this connection is called the levi-civita connection.
the term "symmetric" is often used instead of torsion-free for the first property. the second condition means that the connection is a metric connection in the sense that the riemannian metric g is parallel: ∇g = 0. for a torsion-free connection, the condition is equivalent to the identity x g(y, z) = g(∇xy, z) +
g(y, ∇x z), "compatibility with the metric". in local coordinates the components of the form are called christoffel symbols: because of the uniqueness of the levi-civita connection, there is a formula for these components in terms of the components of g.


=== geodesics ===
since straight lines are a concept in affine geometry, affine connections define a generalized notion of (parametrized) straight lines on any affine manifold, called affine geodesics.  abstractly, a parametric curve γ : i → m is a straight line if its tangent vector remains parallel and equipollent with itself when it is transported along γ.  from the linear point of view, an affine connection m distinguishes the affine geodesics in the following way: a smooth curve γ : i → m is an affine geodesic if γ̇ is parallel transported along γ, that is

  
    
      
        
          τ
          
            t
          
          
            s
          
        
        
          
            
              γ
              ˙
            
          
        
        (
        s
        )
        =
        
          
            
              γ
              ˙
            
          
        
        (
        t
        )
      
    
    {\displaystyle \tau _{t}^{s}{\dot {\gamma }}(s)={\dot {\gamma }}(t)}
  where τst : tγsm → tγtm is the parallel transport map defining the connection.
in terms of the infinitesimal connection ∇, the derivative of this equation implies

  
    
      
        
          ∇
          
            
              
                
                  γ
                  ˙
                
              
            
            (
            t
            )
          
        
        
          
            
              γ
              ˙
            
          
        
        (
        t
        )
        =
        0
      
    
    {\displaystyle \nabla _{{\dot {\gamma }}(t)}{\dot {\gamma }}(t)=0}
  for all t ∈ i.
conversely, any solution of this differential equation yields a curve whose tangent vector is parallel transported along the curve.  for every x ∈ m and every x ∈ txm, there exists a unique affine geodesic γ : i → m with γ(0) = x and γ̇(0) = x and where i is the maximal open interval in r, containing 0, on which the geodesic is defined. this follows from the picard–lindelöf theorem, and allows for the definition of an exponential map associated to the affine connection.
in particular, when m is a (pseudo-)riemannian manifold and ∇ is the levi-civita connection, then the affine geodesics are the usual geodesics of riemannian geometry and are the locally distance minimizing curves.
the geodesics defined here are sometimes called affinely parametrized, since a given straight line in m determines a parametric curve γ through the line up to a choice of affine reparametrization γ(t) → γ(at + b), where a and b are constants.  the tangent vector to an affine geodesic is parallel and equipollent along itself.  an unparametrized geodesic, or one which is merely parallel along itself without necessarily being equipollent, need only satisfy

  
    
      
        
          ∇
          
            
              
                γ
                ˙
              
            
          
        
        
          
            
              γ
              ˙
            
          
        
        =
        k
        
          
            
              γ
              ˙
            
          
        
      
    
    {\displaystyle \nabla _{\dot {\gamma }}{\dot {\gamma }}=k{\dot {\gamma }}}
  for some function k defined along γ. unparametrized geodesics are often studied from the point of view of projective connections.


=== development ===
an affine connection defines a notion of development of curves.  intuitively, development captures the notion that if xt is a curve in m, then the affine tangent space at x0 may be rolled along the curve.  as it does so, the marked point of contact between the tangent space and the manifold traces out a curve ct in this affine space: the development of xt.
in formal terms, let τ0t : txtm → tx0m be the linear parallel transport map associated to the affine connection.  then the development ct is the curve in tx0m starts off at 0 and is parallel to the tangent of xt for all time t:

  
    
      
        
          
            
              
                c
                ˙
              
            
          
          
            t
          
        
        =
        
          τ
          
            t
          
          
            0
          
        
        
          
            
              
                x
                ˙
              
            
          
          
            t
          
        
        
        ,
        
        
          c
          
            0
          
        
        =
        0.
      
    
    {\displaystyle {\dot {c}}_{t}=\tau _{t}^{0}{\dot {x}}_{t}\,,\quad c_{0}=0.}
  in particular, xt is a geodesic if and only if its development is an affinely parametrized straight line in tx0m.


== surface theory revisited ==
if m is a surface in r3, it is easy to see that m has a natural affine connection. from the linear connection point of view, the covariant derivative of a vector field is defined by differentiating the vector field, viewed as a map from m to r3, and then projecting the result orthogonally back onto the tangent spaces of m. it is easy to see that this affine connection is torsion-free. furthermore, it is a metric connection with respect to the riemannian metric on m induced by the inner product on r3, hence it is the levi-civita connection of this metric.


=== example: the unit sphere in euclidean space ===
let ⟨ , ⟩ be the usual scalar product on r3, and let s2 be the unit sphere. the tangent space to s2 at a point x is naturally identified with the vector subspace of r3 consisting of all vectors orthogonal to x. it follows that a vector field y on s2 can be seen as a map y : s2 → r3 which satisfies

  
    
      
        ⟨
        
          y
          
            x
          
        
        ,
        x
        ⟩
        =
        0
        
        ,
        
        ∀
        x
        ∈
        
          
            s
          
          
            2
          
        
        .
      
    
    {\displaystyle \langle y_{x},x\rangle =0\,,\quad \forall x\in \mathbf {s} ^{2}.}
  denote as dy the differential (jacobian matrix) of such a map. then we have:

lemma. the formula

  
    
      
        (
        
          ∇
          
            z
          
        
        y
        
          )
          
            x
          
        
        =
        
          d
        
        
          y
          
            x
          
        
        (
        
          z
          
            x
          
        
        )
        +
        ⟨
        
          z
          
            x
          
        
        ,
        
          y
          
            x
          
        
        ⟩
        x
      
    
    {\displaystyle (\nabla _{z}y)_{x}=\mathrm {d} y_{x}(z_{x})+\langle z_{x},y_{x}\rangle x}
  
defines an affine connection on s2 with vanishing torsion.proof. it is straightforward to prove that ∇ satisfies the leibniz identity and is c∞(s2) linear in the first variable. so all that needs to be proved here is that the map above does indeed define a tangent vector field. that is, we need to prove that for all x in s2

  
    
      
        
          
            ⟨
          
        
        (
        
          ∇
          
            z
          
        
        y
        
          )
          
            x
          
        
        ,
        x
        
          
            ⟩
          
        
        =
        0
        
        .
        
        
          (eq.1)
        
      
    
    {\displaystyle {\bigl \langle }(\nabla _{z}y)_{x},x{\bigr \rangle }=0\,.\qquad {\text{(eq.1)}}}
  consider the map

  
    
      
        
          
            
              
                f
                :
                
                  
                    s
                  
                  
                    2
                  
                
              
              
                
                →
                
                  r
                
              
            
            
              
                x
              
              
                
                ↦
                ⟨
                
                  y
                  
                    x
                  
                
                ,
                x
                ⟩
                
                .
              
            
          
        
      
    
    {\displaystyle {\begin{aligned}f:\mathbf {s} ^{2}&\to \mathbf {r} \\x&\mapsto \langle y_{x},x\rangle \,.\end{aligned}}}
  the map f is constant, hence its differential vanishes. in particular

  
    
      
        
          d
        
        
          f
          
            x
          
        
        (
        
          z
          
            x
          
        
        )
        =
        
          
            ⟨
          
        
        (
        
          d
        
        y
        
          )
          
            x
          
        
        (
        
          z
          
            x
          
        
        )
        ,
        x
        (
        
          γ
          ′
        
        (
        t
        )
        )
        
          
            ⟩
          
        
        +
        ⟨
        
          y
          
            x
          
        
        ,
        
          z
          
            x
          
        
        ⟩
        =
        0
        
        .
      
    
    {\displaystyle \mathrm {d} f_{x}(z_{x})={\bigl \langle }(\mathrm {d} y)_{x}(z_{x}),x(\gamma '(t)){\bigr \rangle }+\langle y_{x},z_{x}\rangle =0\,.}
  equation 1 above follows. q.e.d.


== see also ==
atlas (topology)
connection (mathematics)
connection (fibred manifold)
connection (affine bundle)
differentiable manifold
differential geometry
introduction to the mathematics of general relativity
levi-civita connection
list of formulas in riemannian geometry
riemannian geometry


== notes ==


== citations ==


== references ==


== bibliography ==


=== primary historical references ===


=== secondary references ===